<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Setå’ŒMapæ•°æ®ç»“æ„åŠåŒºåˆ«]]></title>
    <url>%2F2019%2F07%2F22%2FSet%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"></content>
      <categories>
        <category>æ•°æ®ç»“æ„</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°å½•ç§»åŠ¨ç«¯é”®ç›˜å¼¹èµ·å¯¼è‡´åº•éƒ¨ä¸Šæµ®è§£å†³æ–¹æ¡ˆ]]></title>
    <url>%2F2019%2F07%2F15%2F%E8%AE%B0%E5%BD%95%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%94%AE%E7%9B%98%E5%BC%B9%E8%B5%B7%E5%AF%BC%E8%87%B4%E5%BA%95%E9%83%A8%E4%B8%8A%E6%B5%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å„ç§ä¸åŒçš„æµè§ˆå™¨å†…æ ¸ä»¥åŠä¸åŒçš„æ‰‹æœºå‹å·å¯¼è‡´çš„ä¸€äº›å‰ç«¯å…¼å®¹æ€§é—®é¢˜ã€‚å…¶ä¸­åœ¨H5é¡µé¢ä¸­ï¼Œç”±äºç§»åŠ¨ç«¯é”®ç›˜çš„å¤šæ ·æ€§ï¼Œå¯¼è‡´å¾ˆå¤šæ—¶å€™æˆ‘ä»¬åœ¨å”¤èµ·å°é”®ç›˜æ—¶ï¼Œæˆ‘ä»¬çš„é¡µé¢ç»å¸¸ä¼šé‡åˆ°ä¸€äº›é”™ä¹±çš„é—®é¢˜ã€‚ é—®é¢˜æè¿°åœ¨æœ€è¿‘çš„ä¸€æ¬¡å¾®ä¿¡H5é¡µé¢å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç”±äºæˆ‘ä»¬çš„æ•´ä½“é¡µé¢æ˜¯é€šè¿‡Header, Main, Footerä¸‰ä¸ªç»„ä»¶æ‹¼æ¥èµ·æ¥çš„ï¼›æ•´ä½“çš„é«˜åº¦æ˜¯é€‚é…å±å¹•çš„ç™¾åˆ†ä¹‹ç™¾ï¼ŒMainç»„ä»¶åšå†…éƒ¨çš„æ»šåŠ¨ï¼ŒHeaderã€ä»¥åŠFooteré¡µé¢åˆ†åˆ«ä½äºé¡µé¢çš„æœ€ä¸Šæ–¹ä»¥åŠæœ€ä¸‹æ–¹ã€‚è¿™æ—¶å€™æˆ‘ä»¬focusåˆ°è¾“å…¥æ¡†ä¸­ï¼Œä¸€äº›å°é”®ç›˜æ˜¯æ•´ä½“è¦†ç›–åœ¨H5é¡µé¢ä¸Šï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰é€ æˆå¾ˆå¤§çš„å½±å“ï¼›è€Œä¸€éƒ¨åˆ†æœºå‹åˆ™æ˜¯ä¼šå°†é¡µé¢æ•´ä½“å¾€ä¸Šé¡¶ï¼Œè¿™æ ·ä¼šè®©æˆ‘ä»¬çš„å¯è§†è·ç¦»å˜å¾—éå¸¸çš„å°‘ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„Footerä¹Ÿä¼šè¢«é”®ç›˜æ•´ä½“é¡¶ä¸Šæ¥ï¼›Mainç»„ä»¶å¯ä»¥æ˜¾ç¤ºçš„å†…å®¹å˜å¾—å‡ ä¹æ²¡æœ‰ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšå‡ºè°ƒæ•´ã€‚ è§£å†³æ€è·¯åœ¨é”®ç›˜å¼¹èµ·æ—¶ï¼Œä¸è®©åŸæœ¬å›ºå®šåœ¨åº•éƒ¨çš„Footerè¢«æ’‘èµ·ï¼Œç›‘å¬å±å¹•æ­¤æ—¶çš„å®æ—¶é«˜åº¦,æ§åˆ¶Footerçš„æ˜¾ç¤ºä¸å¦ï¼Œè¾¾åˆ°å°†åº•éƒ¨æ å›ºå®šåœ¨åº•éƒ¨çš„æ•ˆæœã€‚ è§£å†³æ–¹æ¡ˆ (framework: weex vue.js)Html123&lt;yoga-footer v-if=&quot;showFooter&quot; name=&quot;talent-circle&quot;&gt;&lt;/yoga-footer&gt; JavaScript1234567891011121314151617181920212223242526272829303132import Footer from &apos;components/weex-footer&apos;;export default &#123; ... components: &#123; &apos;yoga-footer&apos;: Footer, &#125;, // dataæ•°æ® data () &#123; return &#123; domHeight: document.documentElement.clientHeight || document.body.clientHeight, showHeight: document.documentElement.clientHeight || document.body.clientHeight, showFooter: true, &#125;; &#125;, // ç›‘å¬showHeightå˜åŒ– æ£€æµ‹æ˜¯å¦æ˜¾ç¤ºFooter watch: &#123; showHeight() &#123; if (this.domHeight &gt; this.showHeight) &#123; this.showFooter = false; &#125; else &#123; this.showFooter = true; &#125; &#125;, &#125;, // ç»‘å®šé¡µé¢resizeäº‹ä»¶æ”¹å˜showHeight mounted() &#123; window.onresize = () =&gt; (() =&gt; &#123; this.showHeight = document.documentElement.clientHeight || document.body.clientHeight; &#125;)(); &#125; æ€»ç»“è§£å†³ç§»åŠ¨ç«¯é”®ç›˜å¼¹èµ·å¯¼è‡´åº•éƒ¨ä¸Šæµ®çš„æœ€ä½³æ–¹æ¡ˆå°±æ˜¯ç›‘å¬æˆ‘ä»¬çš„resizeäº‹ä»¶ï¼Œç”±äºä¸€äº›ç¯å¢ƒä¸‹çš„é”®ç›˜æ˜¯ç ´åäº†æˆ‘ä»¬åŸæœ‰çš„é¡µé¢ç»“æ„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„resizeäº‹ä»¶ä¹Ÿå‘ç”Ÿäº†æ”¹å˜ï¼Œå¯ä»¥å¿«é€Ÿçš„å“åº”é¡µé¢é«˜åº¦æ”¹å˜å‘ç”Ÿçš„ä¸€äº›é—®é¢˜ï¼›è€Œåœ¨ä¸€äº›IOSæœºå‹ï¼Œå°é”®ç›˜å¼¹èµ·æ˜¯ä¸ä¼šå½±å“é¡µé¢å¸ƒå±€è§¦å‘resizeäº‹ä»¶çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæœ‰å…¶ä»–å‰¯ä½œç”¨çš„å‡ºç°ã€‚]]></content>
      <categories>
        <category>å®æˆ˜ç»éªŒ</category>
      </categories>
      <tags>
        <tag>å®æˆ˜ç»éªŒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡document.referrerè¿”å›å‰ä¸€ä¸ªé¡µé¢]]></title>
    <url>%2F2019%2F06%2F30%2F%E9%80%9A%E8%BF%87document-referrer%E8%BF%94%E5%9B%9E%E5%89%8D%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2%2F</url>
    <content type="text"><![CDATA[å‰è¨€ åœ¨JavaScriptä¸­ï¼Œdocumentå¯¹è±¡æœ‰å¾ˆå¤šå±æ€§ï¼Œå…¶ä¸­æœ‰3ä¸ªä¸å¯¹ç½‘é¡µçš„è¯·æ±‚æœ‰å…³çš„å±æ€§ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯URLã€domainå’Œreferrerã€‚URLå±æ€§åŒ…å«é¡µé¢å®Œæ•´çš„URLï¼Œdomainå±æ€§ä¸­åªåŒ…å«é¡µé¢çš„åŸŸåï¼Œè€Œreferrerå±æ€§ä¸­åˆ™ä¿å­˜ç€é“¾æ¥åˆ°å½“å‰é¡µé¢çš„é‚£ä¸ªé¡µé¢çš„URLã€‚ JSè·å–å‰ä¸€ä¸ªè®¿é—®é¡µé¢çš„URLåœ°å€document.referrerè¦è·å–å‰ä¸€ä¸ªè®¿é—®é¡µé¢çš„URLåœ°å€å‰åç«¯è¯­è¨€éƒ½å¯ä»¥ï¼Œä¾‹å¦‚PHPçš„æ˜¯$_SERVER[â€˜HTTP_REFERERâ€™]ï¼ŒJavaScriptçš„å°±æ˜¯document.referrerã€‚]]></content>
      <categories>
        <category>å®æˆ˜ç»éªŒ</category>
      </categories>
      <tags>
        <tag>å®æˆ˜ç»éªŒ</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€åã€åˆæ ¼ã€‘å‰ç«¯å·¥ç¨‹å¸ˆçš„è‡ªæ£€æ¸…å•é¢˜è§£]]></title>
    <url>%2F2019%2F05%2F06%2F%E4%B8%80%E5%90%8D%E3%80%90%E5%90%88%E6%A0%BC%E3%80%91%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E8%87%AA%E6%A3%80%E6%B8%85%E5%8D%95%E9%A2%98%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å‰è¨€ æœ€è¿‘çœ‹åˆ°ä¸€åã€åˆæ ¼ã€‘å‰ç«¯å·¥ç¨‹å¸ˆçš„è‡ªæ£€æ¸…å•è¿™ä¹ˆä¸€ç¯‡æ–‡ç« ï¼Œåè§‚è‡ªå·±å·²ç»åœ¨ä¸¤å¹´çš„å‰ç«¯ç”Ÿæ¶¯ä¸­å˜å¾—è¶Šæ¥è¶Šè¿·èŒ«ï¼Œæ²¡æœ‰å»ç³»ç»Ÿçš„å­¦ä¹ ã€å·©å›ºå‰ç«¯åŸºç¡€çŸ¥è¯†ï¼Œèº«ä¸ºå‰ç«¯å·¥ç¨‹å¸ˆæ„Ÿè§‰éå¸¸çš„æƒ­æ„§ï¼Œæ‰€ä»¥å†™ä¸‹è¿™ç¯‡é¢˜è§£æ¥è§£ç­”è¿™ç¯‡æ–‡ç« å†…çš„æŠ€æœ¯é—®é¢˜ï¼Œä¹Ÿç®—å¯¹è‡ªå·±çš„å‰ç«¯å­¦ä¹ åšä¸€ä¸ªæ€»ç»“ã€‚ JavaScriptåŸºç¡€å˜é‡å’Œç±»å‹JavaScriptè§„å®šäº†å‡ ç§è¯­è¨€ç±»å‹JavaScript è¯­è¨€è§„å®šäº† 7 ç§è¯­è¨€ç±»å‹ã€‚ Undefined Null Boolean String Number Symbol Object JavaScriptå¯¹è±¡çš„åº•å±‚æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆå¯¹è±¡æ˜¯ä¸€ä¸ªå±æ€§çš„ç´¢å¼•ç»“æ„ã€‚ Symbolç±»å‹åœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨ã€å¯æ‰‹åŠ¨å®ç°ä¸€ä¸ªç®€å•çš„Symbolç”±äºæ¯ä¸€ä¸ª Symbol å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼Œè¿™æ„å‘³ç€ Symbol å€¼å¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œç”¨äºå¯¹è±¡çš„å±æ€§åï¼Œå°±èƒ½ä¿è¯ä¸ä¼šå‡ºç°åŒåçš„å±æ€§ã€‚è¿™å¯¹äºä¸€ä¸ªå¯¹è±¡ç”±å¤šä¸ªæ¨¡å—æ„æˆçš„æƒ…å†µéå¸¸æœ‰ç”¨ï¼Œèƒ½é˜²æ­¢æŸä¸€ä¸ªé”®è¢«ä¸å°å¿ƒæ”¹å†™æˆ–è¦†ç›–ã€‚ JavaScriptä¸­çš„å˜é‡åœ¨å†…å­˜ä¸­çš„å…·ä½“å­˜å‚¨å½¢å¼åŸºæœ¬ç±»å‹å¯¹åº”çš„å†…ç½®å¯¹è±¡ï¼Œä»¥åŠä»–ä»¬ä¹‹é—´çš„è£…ç®±æ‹†ç®±æ“ä½œç†è§£å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹nullå’Œundefinedçš„åŒºåˆ«è‡³å°‘å¯ä»¥è¯´å‡ºä¸‰ç§åˆ¤æ–­JavaScriptæ•°æ®ç±»å‹çš„æ–¹å¼ï¼Œä»¥åŠä»–ä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œå¦‚ä½•å‡†ç¡®çš„åˆ¤æ–­æ•°ç»„ç±»å‹å¯èƒ½å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢çš„åœºæ™¯ä»¥åŠè½¬æ¢åŸåˆ™ï¼Œåº”å¦‚ä½•é¿å…æˆ–å·§å¦™åº”ç”¨å‡ºç°å°æ•°ç²¾åº¦ä¸¢å¤±çš„åŸå› ï¼ŒJavaScriptå¯ä»¥å­˜å‚¨çš„æœ€å¤§æ•°å­—ã€æœ€å¤§å®‰å…¨æ•°å­—ï¼ŒJavaScriptå¤„ç†å¤§æ•°å­—çš„æ–¹æ³•ã€é¿å…ç²¾åº¦ä¸¢å¤±çš„æ–¹æ³•åŸå‹å’ŒåŸå‹é“¾ç†è§£åŸå‹è®¾è®¡æ¨¡å¼ä»¥åŠJavaScriptä¸­çš„åŸå‹è§„åˆ™instanceofçš„åº•å±‚å®ç°åŸç†ï¼Œæ‰‹åŠ¨å®ç°ä¸€ä¸ªinstanceofå®ç°ç»§æ‰¿çš„å‡ ç§æ–¹å¼ä»¥åŠä»–ä»¬çš„ä¼˜ç¼ºç‚¹è‡³å°‘è¯´å‡ºä¸€ç§å¼€æºé¡¹ç›®(å¦‚Node)ä¸­åº”ç”¨åŸå‹ç»§æ‰¿çš„æ¡ˆä¾‹å¯ä»¥æè¿°newä¸€ä¸ªå¯¹è±¡çš„è¯¦ç»†è¿‡ç¨‹ï¼Œæ‰‹åŠ¨å®ç°ä¸€ä¸ªnewæ“ä½œç¬¦ç†è§£es6 classæ„é€ ä»¥åŠç»§æ‰¿çš„åº•å±‚å®ç°åŸç†ä½œç”¨åŸŸå’Œé—­åŒ…ç†è§£è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸç†è§£ JavaScriptçš„ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾ç†è§£ JavaScriptçš„æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œå¯ä»¥åº”ç”¨å †æ ˆä¿¡æ¯å¿«é€Ÿå®šä½é—®é¢˜thisçš„åŸç†ä»¥åŠå‡ ç§ä¸åŒä½¿ç”¨åœºæ™¯çš„å–å€¼é—­åŒ…çš„å®ç°åŸç†å’Œä½œç”¨ï¼Œå¯ä»¥åˆ—ä¸¾å‡ ä¸ªå¼€å‘ä¸­é—­åŒ…çš„å®é™…åº”ç”¨ç†è§£å †æ ˆæº¢å‡ºå’Œå†…å­˜æ³„æ¼çš„åŸç†ï¼Œå¦‚ä½•é˜²æ­¢å¦‚ä½•å¤„ç†å¾ªç¯çš„å¼‚æ­¥æ“ä½œç†è§£æ¨¡å—åŒ–è§£å†³çš„å®é™…é—®é¢˜ï¼Œå¯åˆ—ä¸¾å‡ ä¸ªæ¨¡å—åŒ–æ–¹æ¡ˆå¹¶ç†è§£å…¶ä¸­åŸç†æ‰§è¡Œæœºåˆ¶ä¸ºä½• tryé‡Œé¢æ”¾ returnï¼Œ finallyè¿˜ä¼šæ‰§è¡Œï¼Œç†è§£å…¶å†…éƒ¨æœºåˆ¶JavaScriptå¦‚ä½•å®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œå¯ä»¥è¯¦ç»†æè¿° EventLoopæœºåˆ¶å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡åˆ†åˆ«æœ‰å“ªäº›å¯ä»¥å¿«é€Ÿåˆ†æä¸€ä¸ªå¤æ‚çš„å¼‚æ­¥åµŒå¥—é€»è¾‘ï¼Œå¹¶æŒæ¡åˆ†ææ–¹æ³•ä½¿ç”¨ Promiseå®ç°ä¸²è¡ŒNodeä¸æµè§ˆå™¨ EventLoopçš„å·®å¼‚å¦‚ä½•åœ¨ä¿è¯é¡µé¢è¿è¡Œæµç•…çš„æƒ…å†µä¸‹å¤„ç†æµ·é‡æ•°æ®è¯­æ³•å’ŒAPIç†è§£ ECMAScriptå’Œ JavaScriptçš„å…³ç³»ç†Ÿç»ƒè¿ç”¨ es5ã€ es6æä¾›çš„è¯­æ³•è§„èŒƒï¼Œç†Ÿç»ƒæŒæ¡ JavaScriptæä¾›çš„å…¨å±€å¯¹è±¡ï¼ˆä¾‹å¦‚ Dateã€ Mathï¼‰ã€å…¨å±€å‡½æ•°ï¼ˆä¾‹å¦‚ decodeURIã€ isNaNï¼‰ã€å…¨å±€å±æ€§ï¼ˆä¾‹å¦‚ Infinityã€ undefinedï¼‰ç†Ÿç»ƒåº”ç”¨ mapã€ reduceã€ filter ç­‰é«˜é˜¶å‡½æ•°è§£å†³é—®é¢˜setIntervaléœ€è¦æ³¨æ„çš„ç‚¹ï¼Œä½¿ç”¨ settimeoutå®ç° setIntervalJavaScriptæä¾›çš„æ­£åˆ™è¡¨è¾¾å¼ APIã€å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ˆé‚®ç®±æ ¡éªŒã€ URLè§£æã€å»é‡ç­‰ï¼‰è§£å†³å¸¸è§é—®é¢˜JavaScriptå¼‚å¸¸å¤„ç†çš„æ–¹å¼ï¼Œç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æ–¹æ¡ˆ#HTMLå’ŒCSS HTML###ä»è§„èŒƒçš„è§’åº¦ç†è§£ HTMLï¼Œä»åˆ†ç±»å’Œè¯­ä¹‰çš„è§’åº¦ä½¿ç”¨æ ‡ç­¾ ###å¸¸ç”¨é¡µé¢æ ‡ç­¾çš„é»˜è®¤æ ·å¼ã€è‡ªå¸¦å±æ€§ã€ä¸åŒæµè§ˆå™¨çš„å·®å¼‚ã€å¤„ç†æµè§ˆå™¨å…¼å®¹é—®é¢˜çš„æ–¹å¼ ###å…ƒä¿¡æ¯ç±»æ ‡ç­¾(headã€ titleã€ meta)çš„ä½¿ç”¨ç›®çš„å’Œé…ç½®æ–¹æ³• HTML5ç¦»çº¿ç¼“å­˜åŸç†###å¯ä»¥ä½¿ç”¨ Canvas APIã€ SVGç­‰ç»˜åˆ¶é«˜æ€§èƒ½çš„åŠ¨ç”» CSS###CSSç›’æ¨¡å‹ï¼Œåœ¨ä¸åŒæµè§ˆå™¨çš„å·®å¼‚ CSSæ‰€æœ‰é€‰æ‹©å™¨åŠå…¶ä¼˜å…ˆçº§ã€ä½¿ç”¨åœºæ™¯ï¼Œå“ªäº›å¯ä»¥ç»§æ‰¿ï¼Œå¦‚ä½•è¿ç”¨ atè§„åˆ™CSSä¼ªç±»å’Œä¼ªå…ƒç´ æœ‰å“ªäº›ï¼Œå®ƒä»¬çš„åŒºåˆ«å’Œå®é™…åº”ç”¨HTMLæ–‡æ¡£æµçš„æ’ç‰ˆè§„åˆ™ï¼Œ CSSå‡ ç§å®šä½çš„è§„åˆ™ã€å®šä½å‚ç…§ç‰©ã€å¯¹æ–‡æ¡£æµçš„å½±å“ï¼Œå¦‚ä½•é€‰æ‹©æœ€å¥½çš„å®šä½æ–¹å¼ï¼Œé›ªç¢§å›¾å®ç°åŸç†æ°´å¹³å‚ç›´å±…ä¸­çš„æ–¹æ¡ˆã€å¯ä»¥å®ç° 6ç§ä»¥ä¸Šå¹¶å¯¹æ¯”å®ƒä»¬çš„ä¼˜ç¼ºç‚¹BFCå®ç°åŸç†ï¼Œå¯ä»¥è§£å†³çš„é—®é¢˜ï¼Œå¦‚ä½•åˆ›å»º BFCå¯ä½¿ç”¨ CSSå‡½æ•°å¤ç”¨ä»£ç ï¼Œå®ç°ç‰¹æ®Šæ•ˆæœPostCSSã€ Sassã€ Lessçš„å¼‚åŒï¼Œä»¥åŠä½¿ç”¨é…ç½®ï¼Œè‡³å°‘æŒæ¡ä¸€ç§CSSæ¨¡å—åŒ–æ–¹æ¡ˆã€å¦‚ä½•é…ç½®æŒ‰éœ€åŠ è½½ã€å¦‚ä½•é˜²æ­¢ CSSé˜»å¡æ¸²æŸ“ç†Ÿç»ƒä½¿ç”¨ CSSå®ç°å¸¸è§åŠ¨ç”»ï¼Œå¦‚æ¸å˜ã€ç§»åŠ¨ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰ç­‰CSSæµè§ˆå™¨å…¼å®¹æ€§å†™æ³•ï¼Œäº†è§£ä¸åŒ APIåœ¨ä¸åŒæµè§ˆå™¨ä¸‹çš„å…¼å®¹æ€§æƒ…å†µæŒæ¡ä¸€å¥—å®Œæ•´çš„å“åº”å¼å¸ƒå±€æ–¹æ¡ˆæ‰‹å†™###æ‰‹å†™å›¾ç‰‡ç€‘å¸ƒæµæ•ˆæœ ###ä½¿ç”¨ CSSç»˜åˆ¶å‡ ä½•å›¾å½¢ï¼ˆåœ†å½¢ã€ä¸‰è§’å½¢ã€æ‰‡å½¢ã€è±å½¢ç­‰ï¼‰ ###ä½¿ç”¨çº¯ CSSå®ç°æ›²çº¿è¿åŠ¨ï¼ˆè´å¡å°”æ›²çº¿ï¼‰ ###å®ç°å¸¸ç”¨å¸ƒå±€ï¼ˆä¸‰æ ã€åœ£æ¯ã€åŒé£ç¿¼ã€å¸é¡¶ï¼‰ï¼Œå¯æ˜¯è¯´å‡ºå¤šç§æ–¹å¼å¹¶ç†è§£å…¶ä¼˜ç¼ºç‚¹ è®¡ç®—æœºåŸºç¡€ å…³äºç¼–è¯‘åŸç†ï¼Œä¸éœ€è¦ç†è§£éå¸¸æ·±å…¥ï¼Œä½†æ˜¯æœ€åŸºæœ¬çš„åŸç†å’Œæ¦‚å¿µä¸€å®šè¦æ‡‚ï¼Œè¿™å¯¹äºå­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€éå¸¸é‡è¦ ç¼–è¯‘åŸç†ç†è§£ä»£ç åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œè®¡ç®—æœºå¦‚ä½•å°†ä»£ç è½¬æ¢ä¸ºå¯ä»¥è¿è¡Œçš„ç›®æ ‡ç¨‹åºæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…åŸç†å’Œæ€§èƒ½ä¼˜åŒ–å¦‚ä½•å°† JavaScriptä»£ç è§£ææˆæŠ½è±¡è¯­æ³•æ ‘(AST)base64çš„ç¼–ç åŸç†å‡ ç§è¿›åˆ¶çš„ç›¸äº’è½¬æ¢è®¡ç®—æ–¹æ³•ï¼Œåœ¨ JavaScriptä¸­å¦‚ä½•è¡¨ç¤ºå’Œè½¬æ¢ç½‘ç»œåè®®ç†è§£ä»€ä¹ˆæ˜¯åè®®ï¼Œäº†è§£ TCP/IPç½‘ç»œåè®®æ—çš„æ„æˆï¼Œæ¯å±‚åè®®åœ¨åº”ç”¨ç¨‹åºä¸­å‘æŒ¥çš„ä½œç”¨ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹è¯¦ç»†åŸç†ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ç§æœºåˆ¶æœ‰å“ªäº›åè®®æ˜¯å¯é ï¼Œ TCPæœ‰å“ªäº›æ‰‹æ®µä¿è¯å¯é äº¤ä»˜DNSçš„ä½œç”¨ã€ DNSè§£æçš„è¯¦ç»†è¿‡ç¨‹ï¼Œ DNSä¼˜åŒ–åŸç†CDNçš„ä½œç”¨å’ŒåŸç†HTTPè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡çš„å…·ä½“ç»„æˆï¼Œèƒ½ç†è§£å¸¸è§è¯·æ±‚å¤´çš„å«ä¹‰ï¼Œæœ‰å‡ ç§è¯·æ±‚æ–¹å¼ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆHTTPæ‰€æœ‰çŠ¶æ€ç çš„å…·ä½“å«ä¹‰ï¼Œçœ‹åˆ°å¼‚å¸¸çŠ¶æ€ç èƒ½å¿«é€Ÿå®šä½é—®é¢˜HTTP1.1ã€ HTTP2.0å¸¦æ¥çš„æ”¹å˜HTTPSçš„åŠ å¯†åŸç†ï¼Œå¦‚ä½•å¼€å¯ HTTPSï¼Œå¦‚ä½•åŠ«æŒ HTTPSè¯·æ±‚ç†è§£ WebSocketåè®®çš„åº•å±‚åŸç†ã€ä¸ HTTPçš„åŒºåˆ«è®¾è®¡æ¨¡å¼ç†Ÿç»ƒä½¿ç”¨å‰ç«¯å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ç¼–å†™ä»£ç ï¼Œå¦‚å•ä¾‹æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ç­‰å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„å¼‚åŒä»¥åŠå®é™…åº”ç”¨å¯ä»¥è¯´å‡ºå‡ ç§è®¾è®¡æ¨¡å¼åœ¨å¼€å‘ä¸­çš„å®é™…åº”ç”¨ï¼Œç†è§£æ¡†æ¶æºç ä¸­å¯¹è®¾è®¡æ¨¡å¼çš„åº”ç”¨æ•°æ®ç»“æ„å’Œç®—æ³• æ®æˆ‘äº†è§£çš„å¤§éƒ¨åˆ†å‰ç«¯å¯¹è¿™éƒ¨åˆ†çŸ¥è¯†æœ‰äº›æ¬ ç¼ºï¼Œç”šè‡³æŠµè§¦ï¼Œä½†æ˜¯ï¼Œå¦‚æœçªç ´æ›´é«˜çš„å¤©èŠ±æ¿ï¼Œè¿™éƒ¨åˆ†çŸ¥è¯†æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œè€Œä¸”æˆ‘äº²èº«ç»å†â€”â€”éå¸¸æœ‰ç”¨ï¼ JavaScriptç¼–ç èƒ½åŠ›å¤šç§æ–¹å¼å®ç°æ•°ç»„å»é‡ã€æ‰å¹³åŒ–ã€å¯¹æ¯”ä¼˜ç¼ºç‚¹å¤šç§æ–¹å¼å®ç°æ·±æ‹·è´ã€å¯¹æ¯”ä¼˜ç¼ºç‚¹æ‰‹å†™å‡½æ•°æŸ¯é‡ŒåŒ–å·¥å…·å‡½æ•°ã€å¹¶ç†è§£å…¶åº”ç”¨åœºæ™¯å’Œä¼˜åŠ¿æ‰‹å†™é˜²æŠ–å’ŒèŠ‚æµå·¥å…·å‡½æ•°ã€å¹¶ç†è§£å…¶å†…éƒ¨åŸç†å’Œåº”ç”¨åœºæ™¯å®ç°ä¸€ä¸ª sleepå‡½æ•°æ‰‹åŠ¨å®ç°å‰ç«¯è½®å­æ‰‹åŠ¨å®ç°callã€applyã€bindæ‰‹åŠ¨å®ç°ç¬¦åˆ Promise/A+è§„èŒƒçš„ Promiseã€æ‰‹åŠ¨å®ç° async awaitæ‰‹å†™ä¸€ä¸ª EventEmitterå®ç°äº‹ä»¶å‘å¸ƒã€è®¢é˜…123456789101112131415161718192021222324252627class EventEmitter &#123; constructor() &#123; this.listeners = &#123;&#125;; &#125; // æ³¨å†Œäº‹ä»¶ on(name, func) &#123; if (!this.listeners[name]) &#123; this.listeners[name] = []; &#125; this.listeners[name].push(func); &#125; // è§¦å‘äº‹ä»¶ emit(name, ...args) &#123; if (this.listeners[name]) &#123; this.listeners[name].forEach(listener =&gt; listener(...args)); &#125; &#125; // é”€æ¯äº‹ä»¶ off(name, func) &#123; if (this.listeners[name]) &#123; const index = this.listeners[name].indexOf(func); if (index &gt; -1) &#123; this.listeners[name].splice(index, 1); &#125; &#125; &#125;&#125; å¯ä»¥è¯´å‡ºä¸¤ç§å®ç°åŒå‘ç»‘å®šçš„æ–¹æ¡ˆã€å¯ä»¥æ‰‹åŠ¨å®ç°æ‰‹å†™ JSON.stringifyã€ JSON.parseæ‰‹å†™ä¸€ä¸ªæ¨¡ç‰ˆå¼•æ“ï¼Œå¹¶èƒ½è§£é‡Šå…¶ä¸­åŸç†æ‰‹å†™ æ‡’åŠ è½½ã€ä¸‹æ‹‰åˆ·æ–°ã€ä¸Šæ‹‰åŠ è½½ã€é¢„åŠ è½½ç­‰æ•ˆæœæ•°æ®ç»“æ„ç†è§£å¸¸è§æ•°æ®ç»“æ„çš„ç‰¹ç‚¹ï¼Œä»¥åŠä»–ä»¬åœ¨ä¸åŒåœºæ™¯ä¸‹ä½¿ç”¨çš„ä¼˜ç¼ºç‚¹ç†è§£ æ•°ç»„ã€å­—ç¬¦ä¸²çš„å­˜å‚¨åŸç†ï¼Œå¹¶ç†Ÿç»ƒåº”ç”¨ä»–ä»¬è§£å†³é—®é¢˜ç†è§£ äºŒå‰æ ‘ã€æ ˆã€é˜Ÿåˆ—ã€å“ˆå¸Œè¡¨çš„åŸºæœ¬ç»“æ„å’Œç‰¹ç‚¹ï¼Œå¹¶å¯ä»¥åº”ç”¨å®ƒè§£å†³é—®é¢˜äº†è§£ å›¾ã€å †çš„åŸºæœ¬ç»“æ„å’Œä½¿ç”¨åœºæ™¯ç®—æ³•å¯è®¡ç®—ä¸€ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œå¯ä¼°è®¡ä¸šåŠ¡é€»è¾‘ä»£ç çš„è€—æ—¶å’Œå†…å­˜æ¶ˆè€—è‡³å°‘ç†è§£äº”ç§æ’åºç®—æ³•çš„å®ç°åŸç†ã€åº”ç”¨åœºæ™¯ã€ä¼˜ç¼ºç‚¹ï¼Œå¯å¿«é€Ÿè¯´å‡ºæ—¶é—´ã€ç©ºé—´å¤æ‚åº¦äº†è§£é€’å½’å’Œå¾ªç¯çš„ä¼˜ç¼ºç‚¹ã€åº”ç”¨åœºæ™¯ã€å¹¶å¯åœ¨å¼€å‘ä¸­ç†Ÿç»ƒåº”ç”¨å¯åº”ç”¨ å›æº¯ç®—æ³•ã€è´ªå¿ƒç®—æ³•ã€åˆ†æ²»ç®—æ³•ã€åŠ¨æ€è§„åˆ’ç­‰è§£å†³å¤æ‚é—®é¢˜å‰ç«¯å¤„ç†æµ·é‡æ•°æ®çš„ç®—æ³•æ–¹æ¡ˆè¿è¡Œç¯å¢ƒæˆ‘ä»¬éœ€è¦ç†æ¸…è¯­è¨€å’Œç¯å¢ƒçš„å…³ç³»ï¼š ECMAScriptæè¿°äº† JavaScriptè¯­è¨€çš„è¯­æ³•å’ŒåŸºæœ¬å¯¹è±¡è§„èŒƒ æµè§ˆå™¨ä½œä¸º JavaScriptçš„ä¸€ç§è¿è¡Œç¯å¢ƒï¼Œä¸ºå®ƒæä¾›äº†ï¼šæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆ DOMï¼‰ï¼Œæè¿°å¤„ç†ç½‘é¡µå†…å®¹çš„æ–¹æ³•å’Œæ¥å£ã€æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼ˆ BOMï¼‰ï¼Œæè¿°ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„æ–¹æ³•å’Œæ¥å£ Nodeä¹Ÿæ˜¯ JavaScriptçš„ä¸€ç§è¿è¡Œç¯å¢ƒï¼Œä¸ºå®ƒæä¾›äº†æ“ä½œ I/Oã€ç½‘ç»œç­‰ API æµè§ˆå™¨APIæµè§ˆå™¨æä¾›çš„ç¬¦åˆ W3Cæ ‡å‡†çš„ DOMæ“ä½œ APIã€æµè§ˆå™¨å·®å¼‚ã€å…¼å®¹æ€§æµè§ˆå™¨æä¾›çš„æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ (BOM)æä¾›çš„æ‰€æœ‰å…¨å±€ APIã€æµè§ˆå™¨å·®å¼‚ã€å…¼å®¹æ€§å¤§é‡ DOMæ“ä½œã€æµ·é‡æ•°æ®çš„æ€§èƒ½ä¼˜åŒ–(åˆå¹¶æ“ä½œã€ Diffã€ requestAnimationFrameç­‰)æµè§ˆå™¨æµ·é‡æ•°æ®å­˜å‚¨ã€æ“ä½œæ€§èƒ½ä¼˜åŒ–DOMäº‹ä»¶æµçš„å…·ä½“å®ç°æœºåˆ¶ã€ä¸åŒæµè§ˆå™¨çš„å·®å¼‚ã€äº‹ä»¶ä»£ç†å‰ç«¯å‘èµ·ç½‘ç»œè¯·æ±‚çš„å‡ ç§æ–¹å¼åŠå…¶åº•å±‚å®ç°ã€å¯ä»¥æ‰‹å†™åŸç”Ÿ ajaxã€ fetchã€å¯ä»¥ç†Ÿç»ƒä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œå¦‚ä½•é¿å…åŒæºç­–ç•¥ï¼Œå‡ ç§æ–¹å¼çš„å¼‚åŒç‚¹ä»¥åŠå¦‚ä½•é€‰å‹æµè§ˆå™¨æä¾›çš„å‡ ç§å­˜å‚¨æœºåˆ¶ã€ä¼˜ç¼ºç‚¹ã€å¼€å‘ä¸­æ­£ç¡®çš„é€‰æ‹©æµè§ˆå™¨è·¨æ ‡ç­¾é€šä¿¡æµè§ˆå™¨åŸç†å„æµè§ˆå™¨ä½¿ç”¨çš„ JavaScriptå¼•æ“ä»¥åŠå®ƒä»¬çš„å¼‚åŒç‚¹ã€å¦‚ä½•åœ¨ä»£ç ä¸­è¿›è¡ŒåŒºåˆ†è¯·æ±‚æ•°æ®åˆ°è¯·æ±‚ç»“æŸä¸æœåŠ¡å™¨è¿›è¡Œäº†å‡ æ¬¡äº¤äº’å¯è¯¦ç»†æè¿°æµè§ˆå™¨ä»è¾“å…¥ URLåˆ°é¡µé¢å±•ç°çš„è¯¦ç»†è¿‡ç¨‹æµè§ˆå™¨è§£æ HTMLä»£ç çš„åŸç†ï¼Œä»¥åŠæ„å»º DOMæ ‘çš„æµç¨‹æµè§ˆå™¨å¦‚ä½•è§£æ CSSè§„åˆ™ï¼Œå¹¶å°†å…¶åº”ç”¨åˆ° DOMæ ‘ä¸Šæµè§ˆå™¨å¦‚ä½•å°†è§£æå¥½çš„å¸¦æœ‰æ ·å¼çš„ DOMæ ‘è¿›è¡Œç»˜åˆ¶æµè§ˆå™¨çš„è¿è¡Œæœºåˆ¶ï¼Œå¦‚ä½•é…ç½®èµ„æºå¼‚æ­¥åŒæ­¥åŠ è½½æµè§ˆå™¨å›æµä¸é‡ç»˜çš„åº•å±‚åŸç†ï¼Œå¼•å‘åŸå› ï¼Œå¦‚ä½•æœ‰æ•ˆé¿å…æµè§ˆå™¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå¦‚ä½•é¿å…å†…å­˜æ³„æ¼æµè§ˆå™¨é‡‡ç”¨çš„ç¼“å­˜æ–¹æ¡ˆï¼Œå¦‚ä½•é€‰æ‹©å’Œæ§åˆ¶åˆé€‚çš„ç¼“å­˜æ–¹æ¡ˆNodeç†è§£ Nodeåœ¨åº”ç”¨ç¨‹åºä¸­çš„ä½œç”¨ï¼Œå¯ä»¥ä½¿ç”¨ Nodeæ­å»ºå‰ç«¯è¿è¡Œç¯å¢ƒã€ä½¿ç”¨ Nodeæ“ä½œæ–‡ä»¶ã€æ“ä½œæ•°æ®åº“ç­‰ç­‰æŒæ¡ä¸€ç§ Nodeå¼€å‘æ¡†æ¶ï¼Œå¦‚ Expressï¼Œ Expresså’Œ Koaçš„åŒºåˆ«ç†Ÿç»ƒä½¿ç”¨ Nodeæä¾›çš„ APIå¦‚ Pathã€ Httpã€ Child Processç­‰å¹¶ç†è§£å…¶å®ç°åŸç†Nodeçš„åº•å±‚è¿è¡ŒåŸç†ã€å’Œæµè§ˆå™¨çš„å¼‚åŒNodeäº‹ä»¶é©±åŠ¨ã€éé˜»å¡æœºåˆ¶çš„å®ç°åŸç†#æ¡†æ¶å’Œç±»åº“ è½®å­å±‚å‡ºä¸ç©·ï¼Œä»åŸç†ä¸Šç†è§£æ‰æ˜¯æ­£é“ TypeScriptç†è§£ æ³›å‹ã€æ¥å£ç­‰é¢å‘å¯¹è±¡çš„ç›¸å…³æ¦‚å¿µï¼Œ TypeScriptå¯¹é¢å‘å¯¹è±¡ç†å¿µçš„å®ç°ç†è§£ä½¿ç”¨ TypeScriptçš„å¥½å¤„ï¼ŒæŒæ¡ TypeScriptåŸºç¡€è¯­æ³•TypeScriptçš„è§„åˆ™æ£€æµ‹åŸç†å¯ä»¥åœ¨ Reactã€ Vueç­‰æ¡†æ¶ä¸­ä½¿ç”¨ TypeScriptè¿›è¡Œå¼€å‘ReactReactå’Œ vueé€‰å‹å’Œä¼˜ç¼ºç‚¹ã€æ ¸å¿ƒæ¶æ„çš„åŒºåˆ«Reactä¸­ setStateçš„æ‰§è¡Œæœºåˆ¶ï¼Œå¦‚ä½•æœ‰æ•ˆçš„ç®¡ç†çŠ¶æ€Reactçš„äº‹ä»¶åº•å±‚å®ç°æœºåˆ¶Reactçš„è™šæ‹Ÿ DOMå’Œ Diffç®—æ³•çš„å†…éƒ¨å®ç°Reactçš„ Fiberå·¥ä½œåŸç†ï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜React Routerå’Œ Vue Routerçš„åº•å±‚å®ç°åŸç†ã€åŠ¨æ€åŠ è½½å®ç°åŸç†å¯ç†Ÿç»ƒåº”ç”¨ React APIã€ç”Ÿå‘½å‘¨æœŸç­‰ï¼Œå¯åº”ç”¨ HOCã€ render propsã€ Hooksç­‰é«˜é˜¶ç”¨æ³•è§£å†³é—®é¢˜åŸºäº Reactçš„ç‰¹æ€§å’ŒåŸç†ï¼Œå¯ä»¥æ‰‹åŠ¨å®ç°ä¸€ä¸ªç®€å•çš„ ReactVueç†Ÿç»ƒä½¿ç”¨ Vueçš„ APIã€ç”Ÿå‘½å‘¨æœŸã€é’©å­å‡½æ•°MVVMæ¡†æ¶è®¾è®¡ç†å¿µVueåŒå‘ç»‘å®šå®ç°åŸç†ã€ Diffç®—æ³•çš„å†…éƒ¨å®ç°Vueçš„äº‹ä»¶æœºåˆ¶ä» templateè½¬æ¢æˆçœŸå® DOMçš„å®ç°æœºåˆ¶å¤šç«¯å¼€å‘å•é¡µé¢åº”ç”¨ï¼ˆ SPAï¼‰çš„åŸç†å’Œä¼˜ç¼ºç‚¹ï¼ŒæŒæ¡ä¸€ç§å¿«é€Ÿå¼€å‘ SPAçš„æ–¹æ¡ˆç†è§£ Viewportã€ emã€ remçš„åŸç†å’Œç”¨æ³•ï¼Œåˆ†è¾¨ç‡ã€ pxã€ ppiã€ dpiã€ dpçš„åŒºåˆ«å’Œå®é™…åº”ç”¨ç§»åŠ¨ç«¯é¡µé¢é€‚é…è§£å†³æ–¹æ¡ˆã€ä¸åŒæœºå‹é€‚é…æ–¹æ¡ˆæŒæ¡ä¸€ç§ JavaScriptç§»åŠ¨å®¢æˆ·ç«¯å¼€å‘æŠ€æœ¯ï¼Œå¦‚ React Nativeï¼šå¯ä»¥æ­å»º React Nativeå¼€å‘ç¯å¢ƒï¼Œç†Ÿç»ƒè¿›è¡Œå¼€å‘ï¼Œå¯ç†è§£ React Nativeçš„è¿ä½œåŸç†ï¼Œä¸åŒç«¯é€‚é…æŒæ¡ä¸€ç§ JavaScript PCå®¢æˆ·ç«¯å¼€å‘æŠ€æœ¯ï¼Œå¦‚ Electronï¼šå¯æ­å»º Electronå¼€å‘ç¯å¢ƒï¼Œç†Ÿç»ƒè¿›è¡Œå¼€å‘ï¼Œå¯ç†è§£ Electronçš„è¿ä½œåŸç†æŒæ¡ä¸€ç§å°ç¨‹åºå¼€å‘æ¡†æ¶æˆ–åŸç”Ÿå°ç¨‹åºå¼€å‘ç†è§£å¤šç«¯æ¡†æ¶çš„å†…éƒ¨å®ç°åŸç†ï¼Œè‡³å°‘äº†è§£ä¸€ä¸ªå¤šç«¯æ¡†æ¶çš„ä½¿ç”¨æ•°æ®æµç®¡ç†æŒæ¡ Reactå’Œ Vueä¼ ç»Ÿçš„è·¨ç»„ä»¶é€šä¿¡æ–¹æ¡ˆï¼Œå¯¹æ¯”é‡‡ç”¨æ•°æ®æµç®¡ç†æ¡†æ¶çš„å¼‚åŒç†Ÿç»ƒä½¿ç”¨ Reduxç®¡ç†æ•°æ®æµï¼Œå¹¶ç†è§£å…¶å®ç°åŸç†ï¼Œä¸­é—´ä»¶å®ç°åŸç†ç†Ÿç»ƒä½¿ç”¨ Mobxç®¡ç†æ•°æ®æµï¼Œå¹¶ç†è§£å…¶å®ç°åŸç†ï¼Œç›¸æ¯” Reduxæœ‰ä»€ä¹ˆä¼˜åŠ¿ç†Ÿç»ƒä½¿ç”¨ Vuexç®¡ç†æ•°æ®æµï¼Œå¹¶ç†è§£å…¶å®ç°åŸç†ä»¥ä¸Šæ•°æ®æµæ–¹æ¡ˆçš„å¼‚åŒå’Œä¼˜ç¼ºç‚¹ï¼Œä¸æƒ…å†µä¸‹çš„æŠ€æœ¯é€‰å‹å®ç”¨åº“è‡³å°‘æŒæ¡ä¸€ç§ UIç»„ä»¶æ¡†æ¶ï¼Œå¦‚ antd designï¼Œç†è§£å…¶è®¾è®¡ç†å¿µã€åº•å±‚å®ç°æŒæ¡ä¸€ç§å›¾è¡¨ç»˜åˆ¶æ¡†æ¶ï¼Œå¦‚ Echartï¼Œç†è§£å…¶è®¾è®¡ç†å¿µã€åº•å±‚å®ç°ï¼Œå¯ä»¥è‡ªå·±å®ç°å›¾è¡¨æŒæ¡ä¸€ç§ GISå¼€å‘æ¡†æ¶ï¼Œå¦‚ç™¾åº¦åœ°å›¾ APIæŒæ¡ä¸€ç§å¯è§†åŒ–å¼€å‘æ¡†æ¶ï¼Œå¦‚ Three.jsã€ D3å·¥å…·å‡½æ•°åº“ï¼Œå¦‚ lodashã€ underscoreã€ momentç­‰ï¼Œç†è§£ä½¿ç”¨çš„å·¥å…·ç±»æˆ–å·¥å…·å‡½æ•°çš„å…·ä½“å®ç°åŸç†å¼€å‘å’Œè°ƒè¯•ç†Ÿç»ƒä½¿ç”¨å„æµè§ˆå™¨æä¾›çš„è°ƒè¯•å·¥å…·ç†Ÿç»ƒä½¿ç”¨ä¸€ç§ä»£ç†å·¥å…·å®ç°è¯·æ±‚ä»£ç†ã€æŠ“åŒ…ï¼Œå¦‚ charlså¯ä»¥ä½¿ç”¨ Androidã€ IOSæ¨¡æ‹Ÿå™¨è¿›è¡Œè°ƒè¯•ï¼Œå¹¶æŒæ¡ä¸€ç§çœŸæœºè°ƒè¯•æ–¹æ¡ˆäº†è§£ Vueã€ Reactç­‰æ¡†æ¶è°ƒè¯•å·¥å…·çš„ä½¿ç”¨å‰ç«¯å·¥ç¨‹ å‰ç«¯å·¥ç¨‹åŒ–ï¼šä»¥å·¥ç¨‹åŒ–æ–¹æ³•å’Œå·¥å…·æé«˜å¼€å‘ç”Ÿäº§æ•ˆç‡ã€é™ä½ç»´æŠ¤éš¾åº¦ é¡¹ç›®æ„å»ºç†è§£ npmã€ yarnä¾èµ–åŒ…ç®¡ç†çš„åŸç†ï¼Œä¸¤è€…çš„åŒºåˆ«å¯ä»¥ä½¿ç”¨ npmè¿è¡Œè‡ªå®šä¹‰è„šæœ¬ç†è§£ Babelã€ ESLintã€ webpackç­‰å·¥å…·åœ¨é¡¹ç›®ä¸­æ‰¿æ‹…çš„ä½œç”¨ESLintè§„åˆ™æ£€æµ‹åŸç†ï¼Œå¸¸ç”¨çš„ ESLinté…ç½®Babelçš„æ ¸å¿ƒåŸç†ï¼Œå¯ä»¥è‡ªå·±ç¼–å†™ä¸€ä¸ª Babelæ’ä»¶å¯ä»¥é…ç½®ä¸€ç§å‰ç«¯ä»£ç å…¼å®¹æ–¹æ¡ˆï¼Œå¦‚ PolyfillWebpackçš„ç¼–è¯‘åŸç†ã€æ„å»ºæµç¨‹ã€çƒ­æ›´æ–°åŸç†ï¼Œ chunkã€ bundleå’Œ moduleçš„åŒºåˆ«å’Œåº”ç”¨å¯ç†Ÿç»ƒé…ç½®å·²æœ‰çš„ loaderså’Œ pluginsè§£å†³é—®é¢˜ï¼Œå¯ä»¥è‡ªå·±ç¼–å†™ loaderså’Œ pluginsnginxæ­£å‘ä»£ç†ä¸åå‘ä»£ç†çš„ç‰¹ç‚¹å’Œå®ä¾‹å¯æ‰‹åŠ¨æ­å»ºä¸€ä¸ªç®€å•çš„ nginxæœåŠ¡å™¨ã€ç†Ÿç»ƒåº”ç”¨å¸¸ç”¨çš„ nginxå†…ç½®å˜é‡ï¼ŒæŒæ¡å¸¸ç”¨çš„åŒ¹é…è§„åˆ™å†™æ³•å¯ä»¥ç”¨ nginxå®ç°è¯·æ±‚è¿‡æ»¤ã€é…ç½® gzipã€è´Ÿè½½å‡è¡¡ç­‰ï¼Œå¹¶èƒ½è§£é‡Šå…¶å†…éƒ¨åŸç†å¼€å‘æé€Ÿç†Ÿç»ƒæŒæ¡ä¸€ç§æ¥å£ç®¡ç†ã€æ¥å£ mockå·¥å…·çš„ä½¿ç”¨ï¼Œå¦‚ yapiæŒæ¡ä¸€ç§é«˜æ•ˆçš„æ—¥å¿—åŸ‹ç‚¹æ–¹æ¡ˆï¼Œå¯å¿«é€Ÿä½¿ç”¨æ—¥å¿—æŸ¥è¯¢å·¥å…·å®šä½çº¿ä¸Šé—®é¢˜ç†è§£ TDDä¸ BDDæ¨¡å¼ï¼Œè‡³å°‘ä¼šä½¿ç”¨ä¸€ç§å‰ç«¯å•å…ƒæµ‹è¯•æ¡†æ¶ç‰ˆæœ¬æ§åˆ¶ç†è§£ Gitçš„æ ¸å¿ƒåŸç†ã€å·¥ä½œæµç¨‹ã€å’Œ SVNçš„åŒºåˆ«ç†Ÿç»ƒä½¿ç”¨å¸¸è§„çš„ Gitå‘½ä»¤ã€ git rebaseã€ git stashç­‰è¿›é˜¶å‘½ä»¤å¯ä»¥å¿«é€Ÿè§£å†³ çº¿ä¸Šåˆ†æ”¯å›æ»šã€çº¿ä¸Šåˆ†æ”¯é”™è¯¯åˆå¹¶ç­‰å¤æ‚é—®é¢˜æŒç»­é›†æˆç†è§£ CI/CDæŠ€æœ¯çš„æ„ä¹‰ï¼Œè‡³å°‘ç†Ÿç»ƒæŒæ¡ä¸€ç§ CI/CDå·¥å…·çš„ä½¿ç”¨ï¼Œå¦‚ Jenkinså¯ä»¥ç‹¬è‡ªå®Œæˆæ¶æ„è®¾è®¡ã€æŠ€æœ¯é€‰å‹ã€ç¯å¢ƒæ­å»ºã€å…¨æµç¨‹å¼€å‘ã€éƒ¨ç½²ä¸Šçº¿ç­‰ä¸€å¥—å®Œæ•´çš„å¼€å‘æµç¨‹ï¼ˆåŒ…æ‹¬ Webåº”ç”¨ã€ç§»åŠ¨å®¢æˆ·ç«¯åº”ç”¨ã€ PCå®¢æˆ·ç«¯åº”ç”¨ã€å°ç¨‹åºã€ H5ç­‰ç­‰ï¼‰é¡¹ç›®å’Œä¸šåŠ¡åç«¯æŠ€èƒ½äº†è§£åç«¯çš„å¼€å‘æ–¹å¼ï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­çš„ä½œç”¨ï¼Œè‡³å°‘ä¼šä½¿ç”¨ä¸€ç§åç«¯è¯­è¨€æŒæ¡æ•°æ®æœ€ç»ˆåœ¨æ•°æ®åº“ä¸­æ˜¯å¦‚ä½•è½åœ°å­˜å‚¨çš„ï¼Œèƒ½çœ‹æ‡‚è¡¨ç»“æ„è®¾è®¡ã€è¡¨ä¹‹é—´çš„å…³è”ï¼Œè‡³å°‘ä¼šä½¿ç”¨ä¸€ç§æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–äº†è§£å‰ç«¯æ€§èƒ½è¡¡é‡æŒ‡æ ‡ã€æ€§èƒ½ç›‘æ§è¦ç‚¹ï¼ŒæŒæ¡ä¸€ç§å‰ç«¯æ€§èƒ½ç›‘æ§æ–¹æ¡ˆäº†è§£å¸¸è§çš„ Webã€ Appæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆSEOæ’åè§„åˆ™ã€ SEOä¼˜åŒ–æ–¹æ¡ˆã€å‰åç«¯åˆ†ç¦»çš„ SEOSSRå®ç°æ–¹æ¡ˆã€ä¼˜ç¼ºç‚¹ã€åŠå…¶æ€§èƒ½ä¼˜åŒ–Webpackçš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆCanvasæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆReactã€ Vueç­‰æ¡†æ¶ä½¿ç”¨æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆå‰ç«¯å®‰å…¨XSSæ”»å‡»çš„åŸç†ã€åˆ†ç±»ã€å…·ä½“æ¡ˆä¾‹ï¼Œå‰ç«¯å¦‚ä½•é˜²å¾¡CSRFæ”»å‡»çš„åŸç†ã€å…·ä½“æ¡ˆä¾‹ï¼Œå‰ç«¯å¦‚ä½•é˜²å¾¡HTTPåŠ«æŒã€é¡µé¢åŠ«æŒçš„åŸç†ã€é˜²å¾¡æªæ–½]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯é¢è¯•æ±‡æ€»(åŸºç¡€æ¦‚å¿µç¯‡)]]></title>
    <url>%2F2019%2F04%2F23%2F%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E6%B1%87%E6%80%BB-%E5%9F%BA%E7%A1%80%E7%AF%87%2F</url>
    <content type="text"><![CDATA[Doctypeä½œç”¨ï¼Ÿæ ‡å‡†æ¨¡å¼ä¸å…¼å®¹æ¨¡å¼å„æœ‰ä»€ä¹ˆåŒºåˆ«?&lt;!DOCTYPE&gt;å£°æ˜ä½äºä½äºHTMLæ–‡æ¡£ä¸­çš„ç¬¬ä¸€è¡Œï¼Œå¤„äºhtmlæ ‡ç­¾ä¹‹å‰ã€‚å‘ŠçŸ¥æµè§ˆå™¨çš„è§£æå™¨ç”¨ä»€ä¹ˆæ–‡æ¡£æ ‡å‡†è§£æè¿™ä¸ªæ–‡æ¡£ã€‚DOCTYPEä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®ä¼šå¯¼è‡´æ–‡æ¡£ä»¥å…¼å®¹æ¨¡å¼å‘ˆç°ã€‚ æ ‡å‡†æ¨¡å¼çš„æ’ç‰ˆå’ŒJSè¿ä½œæ¨¡å¼éƒ½æ˜¯ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚åœ¨å…¼å®¹æ¨¡å¼ä¸­ï¼Œé¡µé¢ä»¥å®½æ¾çš„å‘åå…¼å®¹çš„æ–¹å¼æ˜¾ç¤º,æ¨¡æ‹Ÿè€å¼æµè§ˆå™¨çš„è¡Œä¸ºä»¥é˜²æ­¢ç«™ç‚¹æ— æ³•å·¥ä½œã€‚ HTML5ä¸ºä»€ä¹ˆåªéœ€è¦å†™!DOCTYPE HTMLï¼ŸHTMl5ä¸åŸºäºSGML,å› æ­¤ä¸éœ€è¦å¯¹DTDè¿›è¡Œå¼•ç”¨ï¼Œä½†æ˜¯éœ€è¦doctypeæ¥è§„èŒƒæµè§ˆå™¨çš„è¡Œä¸º(è®©æµè§ˆå™¨æŒ‰ç…§å®ƒä»¬åº”è¯¥çš„æ–¹å¼æ¥è¿è¡Œ)ï¼›è€ŒHTMl4.01åŸºäºSGMAï¼Œæ‰€ä»¥éœ€è¦å¯¹DTDè¿›è¡Œå¼•ç”¨ï¼Œæ‰èƒ½å‘ŠçŸ¥æµè§ˆå™¨æ–‡æ¡£æ‰€ä½¿ç”¨çš„æ–‡æ¡£ç±»å‹ã€‚ XHTMLå’ŒHTMLæœ‰ä»€ä¹ˆåŒºåˆ«1.HTMLæ˜¯ä¸€ç§åŸºæœ¬çš„WEBç½‘é¡µè®¾è®¡è¯­è¨€ï¼ŒXHTMLæ˜¯ä¸€ä¸ªåŸºäºXMlçš„ç½®æ ‡è¯­è¨€2.æœ€ä¸»è¦çš„ä¸åŒ3.XHTMLå…ƒç´ å¿…é¡»è¢«æ­£ç¡®åœ°åµŒå¥—ã€‚4.XHTMLå…ƒç´ å¿…é¡»è¢«å…³é—­5.æ ‡ç­¾åå¿…é¡»ç”¨å°å†™å­—æ¯6.XHTMlæ–‡æ¡£å¿…é¡»æ‹¥æœ‰æ ¹å…ƒç´  ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–çš„HTMLï¼Ÿ1.ç”¨æ­£ç¡®çš„æ ‡ç­¾åšæ­£ç¡®çš„äº‹æƒ…ã€‚2.htmlè¯­ä¹‰åŒ–è®©é¡µé¢çš„å†…å®¹ç»“æ„åŒ–ï¼Œç»“æ„æ›´æ¸…æ™°ï¼Œä¾¿äºå¯¹æµè§ˆå™¨ï¼Œæœç´¢å¼•æ“è§£æï¼›3.å³ä½¿åœ¨æ²¡æœ‰æ ·å¼CSSæƒ…å†µä¸‹ä¹Ÿä»¥ä¸€ç§æ–‡æ¡£æ ¼å¼æ˜¾ç¤ºï¼Œå¹¶ä¸”æ˜¯å®¹æ˜“é˜…è¯»çš„ï¼›4.æœç´¢å¼•æ“çš„çˆ¬è™«ä¹Ÿä¾èµ–äºHTMLæ ‡è®°ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ï¼Œåˆ©ç”¨SEO;5.ä½¿é˜…è¯»æºä»£ç çš„äººå¯¹ç½‘ç«™æ›´å®¹æ˜“å°†ç½‘ç«™åˆ†å—ï¼Œä¾¿äºé˜…è¯»ç»´æŠ¤ç†è§£ã€‚ HTML documentæ˜¯å¹²å˜›çš„ï¼Ÿ1.HTMLå³ï¼šè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€çš„ä¸€ä¸ªåº”ç”¨ï¼Œâ€œè¶…æ–‡æœ¬â€å°±æ˜¯æŒ‡é¡µé¢å†…å¯ä»¥åŒ…å«å›¾ç‰‡ã€é“¾æ¥ã€ç”šè‡³éŸ³ä¹ã€ç¨‹åºç­‰éæ–‡å­—å…ƒç´ ã€‚2.HTML Documentå³ï¼šHTML Documentå¯¹è±¡ï¼Œæ¯ä¸ªè½½å…¥æµè§ˆå™¨çš„HTMLæ–‡æ¡£éƒ½ä¼šæˆä¸ºDocumentå¯¹è±¡3.ç”±äºDocumentå¯¹è±¡æ˜¯windowå¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å¯é€šè¿‡window.documentå±æ€§å¯¹å…¶è¿›è¡Œè®¿é—®ã€‚ HTML5æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Œç§»é™¤äº†å“ªäº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç†HTML5æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ†HTMLå’ŒHTML5?1.HTML5ç°åœ¨å·²ç»ä¸æ˜¯SGMLçš„å­é›†ï¼Œä¸»è¦æ˜¯å…³äºå›¾åƒï¼Œä½ç½®ï¼Œå­˜å‚¨ï¼Œå¤šä»»åŠ¡ç­‰åŠŸèƒ½çš„å¢åŠ ã€‚2.ç»˜ç”»canvas3.ç”¨äºåª’ä»‹å›æ”¾çš„videoå’Œaudioå…ƒç´ 4.æœ¬åœ°ç¦»çº¿å­˜å‚¨localStorageé•¿æœŸå­˜å‚¨æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±ï¼›5.sessionStorageçš„æ•°æ®åœ¨æµè§ˆå™¨å…³é—­åè‡ªåŠ¨åˆ é™¤6.è¯­æ„åŒ–æ›´å¥½çš„å†…å®¹å…ƒç´ ï¼Œæ¯”å¦‚article,footer,header,nav,section7.è¡¨å•æ§ä»¶ï¼šcalendar,date,time,email,url,search8.æ–°çš„æŠ€æœ¯webworker,websocktGeolocation9.ç§»é™¤çš„å…ƒç´ 10.çº¯è¡¨ç°çš„å…ƒç´ ï¼šbasefont,big,center,font,s,strike,tt,u;11.å¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼šframe,frameset,noframes;12.æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼š13.IE8/IE7/IE6æ”¯æŒé€šè¿‡document,createElementæ–¹æ³•äº§ç”Ÿçš„æ ‡ç­¾ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§è®©è¿™äº›æµè§ˆå™¨æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼Œæµè§ˆå™¨æ”¯æŒæ–°æ ‡ç­¾åï¼Œè¿˜éœ€è¦æ·»åŠ æ ‡ç­¾é»˜è®¤çš„æ ·å¼ã€‚ HTML5å“ªäº›æ“ä½œå¯ä»¥SEOä¼˜åŒ–1.titleæ ‡ç­¾ï¼›headeræ ‡ç­¾ï¼›footeræ ‡ç­¾2.å…ƒæ ‡ç­¾ï¼ˆmetaæ ‡ç­¾ï¼‰ï¼›å¯¼èˆªæ ‡ç­¾ï¼ˆnavæ ‡ç­¾ï¼‰ï¼›æ–‡ç« æ ‡ç­¾ï¼ˆarticleæ ‡ç­¾ï¼‰ï¼›å·¦æˆ–å³ä¾§æ ‡ç­¾ï¼ˆasideæ ‡ç­¾ï¼‰ è¯·æè¿°ä¸€ä¸‹cookiesï¼ŒsessionStorageå’ŒlocalStorage çš„åŒºåˆ«ï¼Ÿcookieæ˜¯ç½‘ç«™ä¸ºäº†æ ‡ç¤ºç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ï¼ˆClient Sideï¼‰ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰ã€‚cookieæ•°æ®å§‹ç»ˆåœ¨åŒæºçš„httpè¯·æ±‚ä¸­æºå¸¦ï¼ˆå³ä½¿ä¸éœ€è¦ï¼‰ï¼Œè®°ä¼šåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›ä¼ é€’ã€‚sessionStorageå’ŒlocalStorageä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜ã€‚ å­˜å‚¨å¤§å°cookieæ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡4kã€‚sessionStorageå’ŒlocalStorage è™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯”cookieå¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5Mæˆ–æ›´å¤§ã€‚ æœ‰æ•ˆæ—¶é—´localStorage å­˜å‚¨æŒä¹…æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼›sessionStorage æ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åè‡ªåŠ¨åˆ é™¤ã€‚cookie è®¾ç½®çš„cookieè¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­ iframeæœ‰é‚£äº›ç¼ºç‚¹ï¼Ÿ1.iframeä¼šé˜»å¡ä¸»é¡µé¢çš„Onloadäº‹ä»¶ï¼›2.æœç´¢å¼•æ“çš„æ£€ç´¢ç¨‹åºæ— æ³•è§£è¯»è¿™ç§é¡µé¢ï¼Œä¸åˆ©äºSEO;3.iframeå’Œä¸»é¡µé¢å…±äº«è¿æ¥æ± ï¼Œè€Œæµè§ˆå™¨å¯¹ç›¸åŒåŸŸçš„è¿æ¥æœ‰é™åˆ¶ï¼Œæ‰€ä»¥ä¼šå½±å“é¡µé¢çš„å¹¶è¡ŒåŠ è½½ã€‚4.éœ€è¦ä½¿ç”¨iframeï¼Œæœ€å¥½æ˜¯é€šè¿‡javascriptåŠ¨æ€ç»™iframeæ·»åŠ srcå±æ€§å€¼ã€‚ å¦‚ä½•å®ç°æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡?WebSocketã€SharedWorkerï¼›ä¹Ÿå¯ä»¥è°ƒç”¨localstorgeã€cookiesç­‰æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼›localstorgeå¦ä¸€ä¸ªæµè§ˆä¸Šä¸‹æ–‡é‡Œè¢«æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤æ—¶ï¼Œå®ƒéƒ½ä¼šè§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡ç›‘å¬äº‹ä»¶ï¼Œæ§åˆ¶å®ƒçš„å€¼æ¥è¿›è¡Œé¡µé¢ä¿¡æ¯é€šä¿¡ï¼› é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨linkå’Œ@importæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ1.linkå±äºXHTMLæ ‡ç­¾ï¼Œé™¤äº†åŠ è½½CSSå¤–ï¼Œè¿˜èƒ½ç”¨äºå®šä¹‰RSS,å®šä¹‰relè¿æ¥å±æ€§ç­‰ä½œç”¨ï¼›è€Œ@importæ˜¯CSSæä¾›çš„ï¼Œåªèƒ½ç”¨äºåŠ è½½CSS;2.é¡µé¢è¢«åŠ è½½çš„æ—¶ï¼Œlinkä¼šåŒæ—¶è¢«åŠ è½½ï¼Œè€Œ@importå¼•ç”¨çš„CSSä¼šç­‰åˆ°é¡µé¢è¢«åŠ è½½å®Œå†åŠ è½½;3.importæ˜¯CSS2.1 æå‡ºçš„ï¼Œåªåœ¨IE5ä»¥ä¸Šæ‰èƒ½è¢«è¯†åˆ«ï¼Œè€Œlinkæ˜¯XHTMLæ ‡ç­¾ï¼Œæ— å…¼å®¹é—®é¢˜; CSSç›’å­æ¨¡å‹æœ‰å“ªäº›ä»¥åŠå®ƒä»¬åˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸIEç›’å­æ¨¡å‹box-sizing:border-box;ï¼ˆæ€ªå¼‚æ¨¡å¼ï¼‰widthå’Œheightå±æ€§åŒ…æ‹¬paddingå’Œborderï¼Œä½†ä¸æ˜¯marginã€‚è¿™æ˜¯ç›’æ¨¡å‹çš„æ–‡æ¡£æ—¶ï¼ŒInternet Explorerä½¿ç”¨Quirksæ¨¡å¼ã€‚W3Cæ ‡å‡†ç›’å­æ¨¡å‹ box-sizing:content-box;ï¼ˆæ ‡å‡†æ¨¡å¼ï¼‰é»˜è®¤æ¨¡å¼ è¿™æ˜¯é»˜è®¤æ ·å¼æŒ‡å®šCSSæ ‡å‡†ã€‚æµ‹é‡widthå’Œheightå±æ€§åªåŒ…æ‹¬çš„å†…å®¹ï¼Œä¸åŒ…æ‹¬border, margin, æˆ–è€… paddingã€‚box-sizing: padding-box; widthå’Œheightå±æ€§åŒ…æ‹¬paddingçš„å¤§å°ï¼Œä¸åŒ…æ‹¬borderå’Œmargin åˆç†çš„é¡µé¢å¸ƒå±€ä¸­å¸¸å¬è¿‡ç»“æ„ä¸è¡¨ç°åˆ†ç¦»ï¼Œé‚£ä¹ˆç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿè¡¨ç°æ˜¯ä»€ä¹ˆï¼Ÿç»“æ„æ˜¯html,è¡¨ç°æ˜¯css display:none;ä¸visibility:hiddençš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ1.display:none;ä½¿ç”¨è¯¥å±æ€§åï¼ŒHTMLå…ƒç´ ï¼ˆå¯¹è±¡ï¼‰çš„å®½é«˜ï¼Œé«˜åº¦ç­‰å„ç§å±æ€§å€¼éƒ½å°†â€œä¸¢å¤±â€ï¼›2.visibility:hidden;ä½¿ç”¨è¯¥å±æ€§åï¼ŒHTMLå…ƒç´ ï¼ˆå¯¹è±¡ï¼‰ä»…ä»…æ˜¯åœ¨è§†è§‰ä¸Šçœ‹ä¸è§ï¼ˆå®Œå…¨é€æ˜ï¼‰ï¼Œè€Œå®ƒæ‰€å æ®çš„ç©ºé—´ä½ç½®ä»ç„¶å­˜åœ¨ï¼Œä¹Ÿå³æ˜¯è¯´å®ƒä»ç„¶å…·æœ‰é«˜åº¦ï¼Œå®½åº¦ç­‰å±æ€§å€¼ã€‚ CSS3æ–°ç‰¹æ€§æœ‰å“ªäº›ï¼Ÿ1.é¢œè‰²ï¼šæ–°å¢RGBAã€HSLAæ¨¡å¼2.æ–‡å­—é˜´å½±(text-shadow)3.è¾¹æ¡†ï¼šåœ†è§’ï¼ˆborder-radiusï¼‰è¾¹æ¡†é˜´å½±ï¼šbox-shadow4.ç›’å­æ¨¡å‹ï¼šbox-sizing5.èƒŒæ™¯ï¼šbackground-sizeè®¾ç½®èƒŒæ™¯å›¾ç‰‡çš„å°ºå¯¸ï¼Œbackground-originè®¾ç½®èƒŒæ™¯å›¾ç‰‡çš„åŸç‚¹ï¼Œbackground-clipè®¾ç½®èƒŒæ™¯å›¾ç‰‡çš„è£å‰ªåŒºåŸŸï¼Œä»¥â€œï¼Œâ€åˆ†éš”å¯ä»¥è®¾ç½®å¤šèƒŒæ™¯ï¼Œç”¨äºè‡ªé€‚åº”å¸ƒå±€6.æ¸å˜ï¼šlinear-gradientã€radial-gradient7.è¿‡æ¸¡ï¼štransitionå¯å®ç°åŠ¨ç”»8.è‡ªå®šä¹‰åŠ¨ç”»9.åœ¨CSS3ä¸­å”¯ä¸€å¼•å…¥çš„ä¼ªå…ƒç´ æ˜¯::selection10.å¤šåª’ä½“æŸ¥è¯¢ã€å¤šæ å¸ƒå±€11.border-image12.2Dè½¬æ¢ï¼štransform:translate(x,y)rotate(x,y)skew(x,y)scale(x,y)13.3Dè½¬æ¢]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gité«˜çº§ç”¨æ³•â€”â€”git cherry-pick]]></title>
    <url>%2F2019%2F04%2F20%2Fgit%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95%E2%80%94%E2%80%94git-cherry-pick%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ€è¿‘æ­£å·§çœ‹äº†ä¸€äº›é¢è¯•é¢˜ï¼Œå…¶ä¸­æœ‰ä¸€é“ä»¤æˆ‘æ¯”è¾ƒå¥½å¥‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è¯´åˆ°çš„git cherry-pick;æˆ‘ä»¬åœ¨ç®€å†å½“ä¸­éƒ½ä¼šå†™ä¸Šç²¾é€šæˆ–è€…ç†Ÿç»ƒæŒæ¡gitå·¥ä½œæŠ€å·§ã€‚ä½†ç»å¤§å¤šæ•°äººä¹Ÿè®¸åªæŒæ¡ä¸€äº›ç®€å•çš„ç±»ä¼¼git status | pull | push | logç­‰æ“ä½œ,åˆæˆ–æ˜¯ä½¿ç”¨sourcetreeç­‰ä¸€äº›è¾…åŠ©å·¥å…·æ¥æ”¯æŒæˆ‘ä»¬æ—¥å¸¸çš„å·¥ä½œéœ€æ±‚ï¼Œè¿™ç¯‡åšå®¢ä¸»è¦è®°å½•å’Œgit cherry-pickä¸ä¹‹ç›¸å…³çš„gitæ“ä½œã€‚ ä½¿ç”¨åœºæ™¯åŠå…¶ä½œç”¨git cherry-pickå¯ä»¥é€‰æ‹©æŸä¸€ä¸ªåˆ†æ”¯çš„ä¸€ä¸ªæˆ–å‡ ä¸ªcommit(s)æ¥è¿›è¡Œæ“ä½œï¼ˆæ“ä½œçš„å¯¹è±¡å°±æ˜¯commitï¼‰ã€‚å‡è®¾è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œäº§å“æå‡ºæŸä¸ªåŠŸèƒ½éœ€æ±‚ï¼Œä½ å¼€å‘å®Œæ¯•ï¼Œç„¶åcommitäº†ï¼›ç¬¬äºŒå¤©ï¼Œäº§å“é€šçŸ¥ä½ é‚£ä¸ªåŠŸèƒ½å¯èƒ½ä¸è¦äº†ï¼Œäºæ˜¯ä½ æŠŠä»£ç resetå›å»ï¼›åˆè¿‡äº†å‡ å¤©ï¼Œäº§å“å‘Šè¯‰ä½ è¯´ï¼Œä¹‹å‰resetçš„åŠŸèƒ½æˆ‘ä»¬è¦é‡æ–°åŠ å›æ¥ï¼›è¿™æ—¶å€™åº”è¯¥æ€ä¹ˆåŠï¼Ÿä»£ç åœ¨resetä¹‹ååˆè¿›è¡Œå¼€å‘äº†å…¶ä»–çš„åŠŸèƒ½ï¼Œå·²ç»ä¿®æ”¹è¿‡å¹¶ä¸”æœ‰äº†æ–°çš„commitï¼Œä½ æ˜¯åº”è¯¥é‡æ–°å¼€å‘è¿˜æ˜¯å›é€€å‘¢ï¼Ÿ è¿™ç§æ—¶å€™å°±æ˜¯git cherry-pickå‘æŒ¥æ•ˆæœçš„æ—¶å€™äº†ã€‚ git logæŸ¥è¯¢commit id çš„æŸ¥è¯¢å¯ä»¥ä½¿ç”¨git logæŸ¥è¯¢ï¼ˆæŸ¥è¯¢ç‰ˆæœ¬çš„å†å²ï¼‰ï¼Œæœ€ç®€å•çš„è¯­æ³•å°±æ˜¯1git log è¯¦ç»†çš„git logè¯­æ³•å¦‚ä¸‹:1234567891011git log [&lt;options&gt;] [&lt;since&gt;..&lt;until&gt;] [[--] &lt;path&gt;...] ä¸»è¦å‚æ•°é€‰é¡¹å¦‚ä¸‹ï¼š -pï¼šæŒ‰è¡¥ä¸æ˜¾ç¤ºæ¯ä¸ªæ›´æ–°é—´çš„å·®å¼‚ --statï¼šæ˜¾ç¤ºæ¯æ¬¡æ›´æ–°çš„ä¿®æ”¹æ–‡ä»¶çš„ç»Ÿè®¡ä¿¡æ¯ --shortstatï¼šåªæ˜¾ç¤º--statä¸­æœ€åçš„è¡Œæ•°æ·»åŠ ä¿®æ”¹åˆ é™¤ç»Ÿè®¡ --name-onlyï¼šå°½åœ¨å·²ä¿®æ”¹çš„æäº¤ä¿¡æ¯åæ˜¾ç¤ºæ–‡ä»¶æ¸…å• --name-statusï¼šæ˜¾ç¤ºæ–°å¢ã€ä¿®æ”¹å’Œåˆ é™¤çš„æ–‡ä»¶æ¸…å• --abbrev-commitï¼šä»…æ˜¾ç¤ºSHA-1çš„å‰å‡ ä¸ªå­—ç¬¦ï¼Œè€Œéæ‰€æœ‰çš„40ä¸ªå­—ç¬¦ --relative-dateï¼šä½¿ç”¨è¾ƒçŸ­çš„ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºï¼ˆä¾‹å¦‚ï¼š&quot;two weeks ago&quot;ï¼‰ --graphï¼šæ˜¾ç¤ºASCIIå›¾å½¢è¡¨ç¤ºçš„åˆ†æ”¯åˆå¹¶å†å² --prettyï¼šä½¿ç”¨å…¶ä»–æ ¼å¼æ˜¾ç¤ºå†å²æäº¤ä¿¡æ¯ git refloggit reflog å¯ä»¥æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰æ“ä½œè®°å½•ï¼ˆåŒ…æ‹¬å·²ç»è¢«åˆ é™¤çš„ commit è®°å½•å’Œ reset çš„æ“ä½œï¼‰ åœºæ™¯ä¸€é¦–å…ˆæˆ‘ä»¬é€šè¿‡git logæŸ¥çœ‹æ‰€æœ‰çš„commitä¿¡æ¯ã€‚ commitçš„ä¿¡æ¯å¾ˆç®€å•ï¼Œå°±æ˜¯åšäº†3ä¸ªåŠŸèƒ½å¼€å‘ï¼Œæ¯ä¸ªåŠŸèƒ½å¯¹åº”ä¸€ä¸ªcommitçš„æäº¤ï¼Œåˆ†åˆ«æ˜¯feature-1 =&gt; feature-4ã€‚å‡è®¾è¿™æ—¶å€™å¯èƒ½äº§å“è¯´åŠŸèƒ½2ã€3ã€4ä¸éœ€è¦ä¸Šçº¿äº†ã€‚æˆ‘ä»¬éœ€è¦å°†ä»£ç å›æ»šåˆ°1ä¸Šé¢ã€‚ 1git reset --hard dbe570bf1bf9c5f5777b39b242f90e3eb16a1aec ç°åœ¨æˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬çš„commitä¿¡æ¯åªå‰©ä¸‹äº†æœ€å¼€å§‹çš„feature-1åŠŸèƒ½è¿˜ä¿ç•™åœ¨ä¸Šé¢äº†ï¼›æ­¤æ—¶äº§å“éœ€è¦æˆ‘ä»¬ä¸Šçº¿ä¸€ä¸ªç§°ä¹‹ä¸ºåŠŸèƒ½5çš„commit,ä¸€ä¸ªæ˜ŸæœŸåäº§å“éœ€è¦æˆ‘ä»¬æŠŠä¹‹å‰çš„2ã€3ã€4é‡æ–°åˆå¹¶åˆ°ä»£ç é‡Œå¤´ä¸Šçº¿ï¼›è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦æ€ä¹ˆåšå‘¢ï¼Ÿ é¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç°åœ¨çš„git logæ‰“å°å‡ºæ¥çš„ä¿¡æ¯æ˜¯åªæœ‰feature-1å’Œfeature-5æäº¤çš„ä»£ç  è¿™æ—¶å€™æˆ‘ä»¬é¦–å…ˆé€šè¿‡git reflogå‘½ä»¤æŸ¥çœ‹åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æ“ä½œè®°å½• è¿™æ—¶å€™è¦è®°å¥½ä¸¤ä¸ªå€¼ï¼šc8f4403å’Œ45ec9b1ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯feature-5å’Œfeature-4çš„hashç ã€‚ç„¶åæ‰§è¡Œå›æ»šï¼Œå›åˆ°feature-4ä¸Šã€‚ 1git reset --hard 45ec9b1 ç°åœ¨æˆ‘ä»¬å›åˆ°äº†feature-4ä¸Šï¼Œå¦‚ä¸‹å›¾ ä½†æ˜¯æˆ‘ä»¬ç°åœ¨feature-5çš„ä»£ç ä¸¢å¤±äº†ï¼Œå¦‚ä½•å°†å®ƒæ‰¾å›æ¥å‘¢ï¼Ÿè¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬çš„git cherry-pickã€‚åˆšåˆšæˆ‘ä»¬çŸ¥é“git cherry-pickçš„hashç ä¸ºc8f4403 1git cherry-pick c8f4403 è¾“å…¥å¥½äº†ä¹‹åfeature-5çš„ä»£ç å°±æ‰¾å›æ¥äº†ã€‚ æœŸé—´å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›ä»£ç çš„å†²çªï¼Œåªéœ€è¦æŒ‰æ­£åœ¨çš„æ­¥éª¤è§£å†³å°±å¥½äº†ã€‚ æœ€åçš„ç»“æœå¦‚ä¸‹å›¾ åˆ°è¿™é‡Œfeature-1åˆ°feature-5çš„ä»£ç å°±æ‰¾å›æ¥äº†ã€‚è¿™å°±æ˜¯git cherry-pickçš„ç”¨æ³•ã€‚ åœºæ™¯äºŒåœ¨ä¸€ä¸ªåˆ†æ”¯branch1å¼€å‘ï¼Œè¿›è¡Œå¤šæ¬¡æäº¤ï¼Œè¿™æ—¶æˆ‘ä»¬åˆ‡æ¢åˆ°branch2ï¼Œæƒ³æŠŠä¹‹å‰çš„branch1åˆ†æ”¯ä¸Šçš„commitå¤åˆ¶è¿‡æ¥ã€‚ é¦–å…ˆæˆ‘ä»¬åˆ‡æ¢åˆ°branch1åˆ†æ”¯ï¼Œç„¶åæŸ¥çœ‹æäº¤å†å²è®°å½•ï¼Œå¯ä»¥ç”¨sourceTreeæŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤Git log ä¾‹å¦‚çš„æˆ‘branch1 git logå¦‚ä¸‹å›¾ è¿™æ—¶å€™æˆ‘åªæƒ³æŠŠbranch-1-feature-1çš„æäº¤å¤åˆ¶åˆ°branch2é‡Œé¢ï¼Œåªéœ€è¦åˆ‡æ¢åˆ°branch2åˆ†æ”¯ï¼Œç„¶åæ‰§è¡Œ1git cherry-pick e8ae0307b4d2775922c0a2cbd3930ef4c4dca353 branch2 git logå¦‚ä¸‹å›¾ git cherry-pick ä¹Ÿå¯ä»¥åŒæ—¶åˆå¹¶å¤šä¸ªbranchï¼› å‡è®¾branch2éœ€è¦åˆå¹¶branch1çš„branch-1-feature-1ï¼Œbranch-1-feature-2ï¼›å°±å¯ä»¥ä½¿ç”¨ 1git cherry-pick e8ae0307b4d2775922c0a2cbd3930ef4c4dca353,cc6b772ea79ecf54f9df18dd8f0ebf868dfe9170 å‚è€ƒé“¾æ¥ å¥³ç¥çš„ä¾§é¢œâ€”gitæ—¶å…‰ç©¿æ¢­æœº]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>å®æˆ˜ç»éªŒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Git Commit è§„èŒƒä»¥åŠ emoji åˆ—è¡¨]]></title>
    <url>%2F2019%2F04%2F10%2FGit%20commit%20%E8%A7%84%E8%8C%83%E4%BB%A5%E5%8F%8A%20emoji%20%E5%88%97%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[åˆ†æ”¯ masteråˆ†æ”¯ä¸ºä¸»åˆ†æ”¯ï¼ˆä¿æŠ¤åˆ†æ”¯ï¼‰ï¼Œä¸èƒ½ç›´æ¥åœ¨masterä¸Šè¿›è¡Œä¿®æ”¹ä»£ç æˆ–æäº¤,é€šè¿‡MR(merge Request)æˆ–è€…PR(pull Request)çš„æ–¹å¼è¿›è¡Œæäº¤ã€‚ previewåˆ†æ”¯ä¸ºé¢„å‘åˆ†æ”¯ï¼Œ æ‰€æœ‰æµ‹è¯•å®Œæˆéœ€è¦ä¸Šçº¿çš„åŠŸèƒ½åˆå¹¶åˆ°è¯¥åˆ†æ”¯ developã€ teståˆ†æ”¯ä¸ºæµ‹è¯•åˆ†æ”¯ï¼Œæ‰€æœ‰å¼€å‘å®Œæˆéœ€è¦æäº¤æµ‹è¯•çš„åŠŸèƒ½åˆå¹¶åˆ°è¯¥åˆ†æ”¯ feature/xxxåˆ†æ”¯ä¸ºåŠŸèƒ½å¼€å‘åˆ†æ”¯ï¼Œæ ¹æ®ä¸åŒéœ€æ±‚åˆ›å»ºç‹¬ç«‹çš„åŠŸèƒ½åˆ†æ”¯ï¼Œå¼€å‘å®Œæˆååˆå¹¶åˆ°developæˆ–teståˆ†æ”¯ hotfixåˆ†æ”¯ä¸ºbugä¿®å¤åˆ†æ”¯ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µå¯¹å·²å‘å¸ƒçš„ç‰ˆæœ¬è¿›è¡Œæ¼æ´ä¿®å¤ Tagé‡‡ç”¨ä¸‰æ®µå¼ï¼Œvç‰ˆæœ¬.é‡Œç¨‹ç¢‘.åºå·ï¼Œä¾‹å¦‚v1.0.0 æ¶æ„å‡çº§æˆ–æ¶æ„é‡å¤§è°ƒæ•´ï¼Œä¿®æ”¹ç¬¬1ä½ æ–°åŠŸèƒ½ä¸Šçº¿æˆ–è€…æ¨¡å—å¤§çš„è°ƒæ•´ï¼Œä¿®æ”¹ç¬¬2ä½ bugä¿®å¤ä¸Šçº¿ï¼Œä¿®æ”¹ç¬¬3ä½ Commit messageçš„æ ¼å¼æ¯æ¬¡æäº¤ï¼ŒCommit message éƒ½åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šheaderï¼Œbody å’Œ footerã€‚ 12345&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;// ç©ºä¸€è¡Œ&lt;body&gt;// ç©ºä¸€è¡Œ&lt;footer&gt; å…¶ä¸­ï¼ŒHeader æ˜¯å¿…éœ€çš„ï¼ŒBody å’Œ Footer å¯ä»¥çœç•¥ã€‚ä¸ç®¡æ˜¯å“ªä¸€ä¸ªéƒ¨åˆ†ï¼Œä»»ä½•ä¸€è¡Œéƒ½ä¸å¾—è¶…è¿‡72ä¸ªå­—ç¬¦ï¼ˆæˆ–100ä¸ªå­—ç¬¦ï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é¿å…è‡ªåŠ¨æ¢è¡Œå½±å“ç¾è§‚ã€‚ HeaderHeaderéƒ¨åˆ†åªæœ‰ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼štypeï¼ˆå¿…éœ€ï¼‰ã€scopeï¼ˆå¯é€‰ï¼‰å’Œsubjectï¼ˆå¿…éœ€ï¼‰ã€‚ typetypeç”¨äºè¯´æ˜ commit çš„ç±»åˆ«ï¼Œåªå…è®¸ä½¿ç”¨ä¸‹é¢7ä¸ªæ ‡è¯†ã€‚ featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰ fixï¼šä¿®è¡¥bug docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰ styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰ refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰ testï¼šå¢åŠ æµ‹è¯• choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨å¦‚æœtypeä¸ºfeatå’Œfixï¼Œåˆ™è¯¥ commit å°†è‚¯å®šå‡ºç°åœ¨ Change log ä¹‹ä¸­ã€‚å…¶ä»–æƒ…å†µï¼ˆdocsã€choreã€styleã€refactorã€testï¼‰ç”±ä½ å†³å®šï¼Œè¦ä¸è¦æ”¾å…¥ Change logï¼Œå»ºè®®æ˜¯ä¸è¦ã€‚ scopescopeç”¨äºè¯´æ˜ commit å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚æ•°æ®å±‚ã€æ§åˆ¶å±‚ã€è§†å›¾å±‚ç­‰ç­‰ï¼Œè§†é¡¹ç›®ä¸åŒè€Œä¸åŒã€‚ subjectsubjectæ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡50ä¸ªå­—ç¬¦ã€‚ ä»¥åŠ¨è¯å¼€å¤´ï¼Œä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶ï¼Œæ¯”å¦‚changeï¼Œè€Œä¸æ˜¯changedæˆ–changes ç¬¬ä¸€ä¸ªå­—æ¯å°å†™ ç»“å°¾ä¸åŠ å¥å·ï¼ˆ.ï¼‰ BodyBody éƒ¨åˆ†æ˜¯å¯¹æœ¬æ¬¡ commit çš„è¯¦ç»†æè¿°ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªèŒƒä¾‹ã€‚1234567More detailed explanatory text, if necessary. Wrap it to about 72 characters or so. Further paragraphs come after blank lines.- Bullet points are okay, too- Use a hanging indent æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‚ï¼ˆ1ï¼‰ä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶ï¼Œæ¯”å¦‚ä½¿ç”¨changeè€Œä¸æ˜¯changedæˆ–changesã€‚ï¼ˆ2ï¼‰åº”è¯¥è¯´æ˜ä»£ç å˜åŠ¨çš„åŠ¨æœºï¼Œä»¥åŠä¸ä»¥å‰è¡Œä¸ºçš„å¯¹æ¯”ã€‚ FooterFooter éƒ¨åˆ†åªç”¨äºä¸¤ç§æƒ…å†µã€‚ ä¸å…¼å®¹å˜åŠ¨å¦‚æœå½“å‰ä»£ç ä¸ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸å…¼å®¹ï¼Œåˆ™ Footer éƒ¨åˆ†ä»¥BREAKING CHANGEå¼€å¤´ï¼Œåé¢æ˜¯å¯¹å˜åŠ¨çš„æè¿°ã€ä»¥åŠå˜åŠ¨ç†ç”±å’Œè¿ç§»æ–¹æ³•ã€‚ 12345678910111213141516BREAKING CHANGE: isolate scope bindings definition has changed. To migrate the code follow the example below: Before: scope: &#123; myAttr: &apos;attribute&apos;, &#125; After: scope: &#123; myAttr: &apos;@&apos;, &#125; The removed `inject` wasn&apos;t generaly useful for directives so there should be no code using it å…³é—­ Issueå¦‚æœå½“å‰ commit é’ˆå¯¹æŸä¸ªissueï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ Footer éƒ¨åˆ†å…³é—­è¿™ä¸ª issue ã€‚ 1Closes #234 Revertè¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¦‚æœå½“å‰ commit ç”¨äºæ’¤é”€ä»¥å‰çš„ commitï¼Œåˆ™å¿…é¡»ä»¥revert:å¼€å¤´ï¼Œåé¢è·Ÿç€è¢«æ’¤é”€ Commit çš„ Headerã€‚123revert: feat(pencil): add &apos;graphiteWidth&apos; optionThis reverts commit 667ecc1654a317a13331b17617d973392f415f02. Bodyéƒ¨åˆ†çš„æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œå¿…é¡»å†™æˆThis reverts commit &lt;hash&gt;.ï¼Œå…¶ä¸­çš„hashæ˜¯è¢«æ’¤é”€ commit çš„ SHA æ ‡è¯†ç¬¦ã€‚ å¦‚æœå½“å‰ commit ä¸è¢«æ’¤é”€çš„ commitï¼Œåœ¨åŒä¸€ä¸ªå‘å¸ƒï¼ˆreleaseï¼‰é‡Œé¢ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½ä¸ä¼šå‡ºç°åœ¨ Change log é‡Œé¢ã€‚å¦‚æœä¸¤è€…åœ¨ä¸åŒçš„å‘å¸ƒï¼Œé‚£ä¹ˆå½“å‰ commitï¼Œä¼šå‡ºç°åœ¨ Change log çš„Revertså°æ ‡é¢˜ä¸‹é¢ã€‚ CommitizenCommitizenæ˜¯ä¸€ä¸ªæ’°å†™åˆæ ¼ Commit message çš„å·¥å…·ã€‚ å®‰è£…å‘½ä»¤å¦‚ä¸‹ã€‚ 1$ npm install -g commitizen ç„¶åï¼Œåœ¨é¡¹ç›®ç›®å½•é‡Œï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½¿å…¶æ”¯æŒ Angular çš„ Commit message æ ¼å¼ã€‚ 1$ commitizen init cz-conventional-changelog --save --save-exact ä»¥åï¼Œå‡¡æ˜¯ç”¨åˆ°git commitå‘½ä»¤ï¼Œä¸€å¾‹æ”¹ä¸ºä½¿ç”¨git czã€‚è¿™æ—¶ï¼Œå°±ä¼šå‡ºç°é€‰é¡¹ï¼Œç”¨æ¥ç”Ÿæˆç¬¦åˆæ ¼å¼çš„ Commit messageã€‚ validate-commit-msgvalidate-commit-msg ç”¨äºæ£€æŸ¥ Node é¡¹ç›®çš„ Commit message æ˜¯å¦ç¬¦åˆæ ¼å¼ã€‚ å®ƒçš„å®‰è£…æ˜¯æ‰‹åŠ¨çš„ã€‚é¦–å…ˆï¼Œæ‹·è´ä¸‹é¢è¿™ä¸ªJSæ–‡ä»¶ï¼Œæ”¾å…¥ä½ çš„ä»£ç åº“ã€‚æ–‡ä»¶åå¯ä»¥å–ä¸ºvalidate-commit-msg.jsã€‚ æ¥ç€ï¼ŒæŠŠè¿™ä¸ªè„šæœ¬åŠ å…¥ Git çš„ hookã€‚ä¸‹é¢æ˜¯åœ¨package.jsoné‡Œé¢ä½¿ç”¨ ghooksï¼ŒæŠŠè¿™ä¸ªè„šæœ¬åŠ ä¸ºcommit-msgæ—¶è¿è¡Œã€‚ 12345&quot;config&quot;: &#123; &quot;ghooks&quot;: &#123; &quot;commit-msg&quot;: &quot;./validate-commit-msg.js&quot; &#125;&#125; ç„¶åï¼Œæ¯æ¬¡git commitçš„æ—¶å€™ï¼Œè¿™ä¸ªè„šæœ¬å°±ä¼šè‡ªåŠ¨æ£€æŸ¥ Commit message æ˜¯å¦åˆæ ¼ã€‚å¦‚æœä¸åˆæ ¼ï¼Œå°±ä¼šæŠ¥é”™ã€‚ 123$ git add -A $ git commit -m &quot;edit markdown&quot; INVALID COMMIT MSG: does not match &quot;&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;&quot; ! was: edit markdown ç”Ÿæˆ Change logå¦‚æœä½ çš„æ‰€æœ‰ Commit éƒ½ç¬¦åˆ Angular æ ¼å¼ï¼Œé‚£ä¹ˆå‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œ Change log å°±å¯ä»¥ç”¨è„šæœ¬è‡ªåŠ¨ç”Ÿæˆ ç”Ÿæˆçš„æ–‡æ¡£åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ã€‚ New features Bug fixes Breaking changes. æ¯ä¸ªéƒ¨åˆ†éƒ½ä¼šç½—åˆ—ç›¸å…³çš„ commit ï¼Œå¹¶ä¸”æœ‰æŒ‡å‘è¿™äº› commit çš„é“¾æ¥ã€‚å½“ç„¶ï¼Œç”Ÿæˆçš„æ–‡æ¡£å…è®¸æ‰‹åŠ¨ä¿®æ”¹ï¼Œæ‰€ä»¥å‘å¸ƒå‰ï¼Œä½ è¿˜å¯ä»¥æ·»åŠ å…¶ä»–å†…å®¹ã€‚ conventional-changelog å°±æ˜¯ç”Ÿæˆ Change log çš„å·¥å…·ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ã€‚ 123$ npm install -g conventional-changelog$ cd my-project$ conventional-changelog -p angular -i CHANGELOG.md -w ä¸Šé¢å‘½ä»¤ä¸ä¼šè¦†ç›–ä»¥å‰çš„ Change logï¼Œåªä¼šåœ¨CHANGELOG.mdçš„å¤´éƒ¨åŠ ä¸Šè‡ªä»ä¸Šæ¬¡å‘å¸ƒä»¥æ¥çš„å˜åŠ¨ã€‚ å¦‚æœä½ æƒ³ç”Ÿæˆæ‰€æœ‰å‘å¸ƒçš„ Change logï¼Œè¦æ”¹ä¸ºè¿è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚ 1$ conventional-changelog -p angular -i CHANGELOG.md -w -r 0 ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå¯ä»¥å°†å…¶å†™å…¥package.jsonçš„scriptså­—æ®µã€‚ 12345&#123; &quot;scripts&quot;: &#123; &quot;changelog&quot;: &quot;conventional-changelog -p angular -i CHANGELOG.md -w -r 0&quot; &#125;&#125; ä»¥åï¼Œç›´æ¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ã€‚1$ npm run changelog git commitä¸­ä½¿ç”¨emojiemojiè§„èŒƒæ ¼å¼git commit æ—¶ï¼Œæäº¤ä¿¡æ¯éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š12345:emoji1: :emoji2: ä¸»é¢˜æäº¤ä¿¡æ¯ä¸»ä½“Ref &lt;###&gt; åˆæ¬¡æäº¤ç¤ºä¾‹ï¼š1git commit -m &quot;:tada: Initialize Repo&quot; emojiæŒ‡å— emoji emojiä»£ç  Commitè¯´æ˜ ğŸ¨ (è°ƒè‰²æ¿) :art: æ”¹è¿›ä»£ç ç»“æ„/ä»£ç æ ¼å¼ âš¡ï¸ (é—ªç”µ) :zap: æå‡æ€§èƒ½ ğŸ (èµ›é©¬) :racehorse: æå‡æ€§èƒ½ ğŸ”¥ (ç«ç„°) :fire: ç§»é™¤ä»£ç æˆ–æ–‡ä»¶ ğŸ› (bug) :bug: ä¿®å¤ bug ğŸš‘ (æ€¥æ•‘è½¦) :ambulance: é‡è¦è¡¥ä¸ âœ¨ (ç«èŠ±) :sparkles: å¼•å…¥æ–°åŠŸèƒ½ ğŸ“ (é“…ç¬”) :pencil: æ’°å†™æ–‡æ¡£ ğŸš€ (ç«ç®­) :rocket: éƒ¨ç½²åŠŸèƒ½ ğŸ’„ (å£çº¢) :lipstick: æ›´æ–° UI å’Œæ ·å¼æ–‡ä»¶ ğŸ‰ (åº†ç¥) :tada: åˆæ¬¡æäº¤ âœ… (ç™½è‰²å¤é€‰æ¡†) :white_check_mark: å¢åŠ æµ‹è¯• ğŸ”’ (é”) :lock: ä¿®å¤å®‰å…¨é—®é¢˜ ğŸ (è‹¹æœ) :apple: ä¿®å¤ macOS ä¸‹çš„é—®é¢˜ ğŸ§ (ä¼é¹…) :penguin: ä¿®å¤ Linux ä¸‹çš„é—®é¢˜ ğŸ (æ——å¸œ) :checked_flag: ä¿®å¤ Windows ä¸‹çš„é—®é¢˜ ğŸ”– (ä¹¦ç­¾) :bookmark: å‘è¡Œ/ç‰ˆæœ¬æ ‡ç­¾ ğŸš¨ (è­¦è½¦ç¯) :rotating_light: ç§»é™¤ linterè­¦å‘Š ğŸš§ (æ–½å·¥) :construction: å·¥ä½œè¿›è¡Œä¸­ ğŸ’š (ç»¿å¿ƒ) :green_heart: ä¿®å¤ CI æ„å»ºé—®é¢˜ â¬‡ï¸ (ä¸‹é™ç®­å¤´) :arrow_down: é™çº§ä¾èµ– â¬†ï¸ (ä¸Šå‡ç®­å¤´) :arrow_up: å‡çº§ä¾èµ– ğŸ‘· (å·¥äºº) :construction_worker: æ·»åŠ  CI æ„å»ºç³»ç»Ÿ ğŸ“ˆ (ä¸Šå‡è¶‹åŠ¿å›¾) :chart_with_upwards_trend: æ·»åŠ åˆ†ææˆ–è·Ÿè¸ªä»£ç  ğŸ”¨ (é”¤å­) :hammer: é‡å¤§é‡æ„ â– (å‡å·) :heavy_minus_sign: å‡å°‘ä¸€ä¸ªä¾èµ– ğŸ³ (é²¸é±¼) :whale: Docker ç›¸å…³å·¥ä½œ â• (åŠ å·) :heavy_plus_sign: å¢åŠ ä¸€ä¸ªä¾èµ– ğŸ”§ (æ‰³æ‰‹) :wrench: ä¿®æ”¹é…ç½®æ–‡ä»¶ ğŸŒ (åœ°çƒ) :globe_with_meridians: å›½é™…åŒ–ä¸æœ¬åœ°åŒ– âœï¸ (é“…ç¬”) :pencil2: ä¿®å¤ typo å‚è€ƒæ–‡çŒ® Commit message å’Œ Change log ç¼–å†™æŒ‡å—]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>å®æˆ˜ç»éªŒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Weexå¸¸è§é—®é¢˜è§£æ]]></title>
    <url>%2F2019%2F03%2F29%2Fweex%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯ Weexï¼Ÿ Weex æ˜¯ä½¿ç”¨æµè¡Œçš„ Web å¼€å‘ä½“éªŒæ¥å¼€å‘é«˜æ€§èƒ½åŸç”Ÿåº”ç”¨çš„æ¡†æ¶ã€‚ Weex è‡´åŠ›äºä½¿å¼€å‘è€…èƒ½åŸºäºé€šç”¨è·¨å¹³å°çš„ Web å¼€å‘è¯­è¨€å’Œå¼€å‘ç»éªŒï¼Œæ¥æ„å»º Androidã€ios å’Œ Web åº”ç”¨ã€‚ç®€å•æ¥è¯´ï¼Œåœ¨é›†æˆäº† WeexSDK ä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨ JavaScript è¯­è¨€å’Œå‰ç«¯å¼€å‘ç»éªŒæ¥å¼€å‘ç§»åŠ¨åº”ç”¨ã€‚ Weex æ¸²æŸ“å¼•æ“ä¸ DSL è¯­æ³•å±‚æ˜¯åˆ†å¼€çš„ï¼ŒWeex å¹¶ä¸å¼ºä¾èµ–ä»»ä½•ç‰¹å®šçš„å‰ç«¯æ¡†æ¶ã€‚ç›®å‰ Vue.js å’Œ Rax è¿™ä¸¤ä¸ªå‰ç«¯æ¡†æ¶è¢«å¹¿æ³›åº”ç”¨äº Weex é¡µé¢å¼€å‘ï¼ŒåŒæ—¶ Weex ä¹Ÿå¯¹è¿™ä¸¤ä¸ªå‰ç«¯æ¡†æ¶æä¾›äº†æœ€å®Œå–„çš„æ”¯æŒã€‚Weex çš„å¦ä¸€ä¸ªä¸»è¦ç›®æ ‡æ˜¯è·Ÿè¿›æµè¡Œçš„ Web å¼€å‘æŠ€æœ¯å¹¶å°†å…¶å’ŒåŸç”Ÿå¼€å‘çš„æŠ€æœ¯ç»“åˆï¼Œå®ç°å¼€å‘æ•ˆç‡å’Œè¿è¡Œæ€§èƒ½çš„é«˜åº¦ç»Ÿä¸€ã€‚åœ¨å¼€å‘é˜¶æ®µï¼Œä¸€ä¸ª Weex é¡µé¢å°±åƒå¼€å‘æ™®é€šç½‘é¡µä¸€æ ·ï¼›åœ¨è¿è¡Œæ—¶ï¼ŒWeex é¡µé¢åˆå……åˆ†åˆ©ç”¨äº†å„ç§æ“ä½œç³»ç»Ÿçš„åŸç”Ÿç»„ä»¶å’Œèƒ½åŠ›ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹© Weexï¼ŸWeexå¸¦ç»™æˆ‘ä»¬çš„æ”¶ç›Š è¿­ä»£é€Ÿåº¦å¿«ï¼Œå¿«é€Ÿä¸Šçº¿ Weexç¯å¢ƒä¸‹å®Œå…¨Nativeä½“éªŒ Bundleèµ„æºå¤§å°å¯¹æ¯”H5å°å¾ˆå¤š å¯Œäº¤äº’ä½“éªŒï¼Œé•¿åˆ—è¡¨æ€§èƒ½å¥½ ä¸Šæ‰‹å¿«ä¸”ç®€å•ã€ä¸€æ¬¡ç¼–å†™ä¸‰æ®µå…¼å®¹ H5 WEEX Native å¼€å‘æˆæœ¬ ä½ ä¸­ é«˜ ç»´æŠ¤æ›´æ–° ç®€å• ç®€å• å¤æ‚ ç”¨æˆ·ä½“éªŒ å·® ä¼˜ ä¼˜ å‘ç‰ˆå®¡æ ¸ ä¸éœ€è¦ ä¸éœ€è¦ éœ€è¦ è·¨å¹³å°æ€§ ä¼˜ ä¼˜ å·® Weexå¼€å‘è¸©å‘é€šç”¨æ ·å¼1ã€å›¾ç‰‡1ã€Weexæä¾›äº†imageç»„ä»¶,ä½†åªæ”¯æŒè¿œç¨‹å›¾ç‰‡é“¾æ¥(åœ¨æ–°weex sdk å·²ç»è§£å†³)ã€‚å›¾ç‰‡å¿…é¡»æ·»åŠ å®½ã€é«˜å±æ€§å¦åˆ™ä¼šä¸æ˜¾ç¤ºå‡ºæ¥ã€‚2ã€é¿å…åœ¨imageæ ‡ç­¾ä¸Šä½¿ç”¨v-forï¼Œå¦åˆ™ä¼šå¯¼è‡´å®‰å“ä¸Šå›¾ç‰‡æ¸²æŸ“å¼‚å¸¸ï¼ˆå¦‚sliderä¸­çš„å›¾ç‰‡ï¼‰12345678&lt;slider class=&quot;activity&quot; :autoPlay=&quot;true&quot; interval=&quot;4000&quot; @change=&quot;sliderChange&quot;&gt; &lt;div class=&quot;activity-cell&quot; v-for=&quot;(item, index) in bannerList&quot; :key=&quot;index&quot; @click=&quot;clickInBanner(item)&quot;&gt; &lt;image class=&quot;activity-wrap-bg&quot; resize=&quot;cover&quot; :src=&quot;imageRes.bannerBgImg&quot;&gt;&lt;/image&gt; &lt;image class=&quot;activity-wrap-image&quot; :src=&quot;item.pictureUrl&quot;&gt;&lt;/image&gt; &lt;/div&gt;&lt;/slider&gt; 2ã€borderWeexä¸æ”¯æŒä½¿ç”¨borderåˆ›å»ºä¸‰è§’å½¢ï¼Œwebå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œè€Œioså’Œandroidä¸Šæ˜¾ç¤ºçš„æ˜¯çŸ©å½¢ï¼Œå»ºè®®ä½¿ç”¨å›¾ç‰‡ä»£æ›¿ webiosã€android 3ã€scaleè®¾ç½®ä¸º0é—®é¢˜transform: scale(0)ä¼šå¯¼è‡´æ–‡æ¡£æµå†…æ‰€æœ‰äº‹ä»¶æ‰©æ•£åˆ°æ•´ä¸ªhtmlç»“æ„ï¼Œå¯¼è‡´æ–‡æ¡£æµäº‹ä»¶å…¨éƒ¨æ— æ•ˆã€‚åªæœ‰è„±ç¦»æ–‡æ¡£æµçš„å…ƒç´ ï¼ˆabsoluteç­‰ï¼‰å¯ä»¥ç‚¹å‡»ï¼›å¸¸ç”¨å¯ä»¥è®¾ç½®transform: scale(0,1)ï¼Œå¹¶ä½¿å…ƒç´ éšè—èµ·æ¥ã€‚ 4ã€inputæ ‡ç­¾é«˜åº¦é—®é¢˜å®‰å“ç¯å¢ƒä¸­ï¼Œå½“inputé«˜åº¦è®¾ç½®å°äº60pxæ—¶ï¼Œä¼šå¯¼è‡´è¾“å…¥æ¡†å…‰æ ‡ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚ï¼ˆiosã€webæ­£å¸¸ï¼‰ 5ã€v-ifé—®é¢˜åœ¨åšä¸€äº›æ“ä½œåˆ‡æ¢çŠ¶æ€æ—¶ï¼ˆå¦‚æŒ‰é’®ç‚¹å‡»ç½®ç°ï¼‰ï¼Œåº”å°½é‡é¿å…ä½¿ç”¨v-ifï¼Œä½¿ç”¨v-ifä¼šé—ªï¼Œä¸”éƒ¨åˆ†å®‰å“æœºå­ä¼šå‘ç”Ÿä¸å¯æè¿°çš„äº‹æƒ…ï¼ˆå¦‚éƒ¨åˆ†ä¸‰æ˜Ÿæœºå‹ä¼šå‡ºç°æŒ‰é’®æ–‡å­—å±…é¡¶ï¼‰ï¼Œå¯é‡‡ç”¨æ·»åŠ classçš„æ–¹å¼ 6ã€é€æ˜åº¦ç›®å‰ä»…iosæ”¯æŒbox-shadowå±æ€§ï¼Œandroidæš‚ä¸æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨å›¾ç‰‡ä»£æ›¿ã€‚æ¯ä¸ªå…ƒç´ åªæ”¯æŒè®¾ç½®ä¸€ä¸ªé˜´å½±æ•ˆæœï¼Œä¸æ”¯æŒå¤šä¸ªé˜´å½±åŒæ—¶ä½œç”¨äºä¸€ä¸ªå…ƒç´ ã€‚andåœ¨æ—¥å¸¸å¼€å‘ä¸­é˜´å½±æœ€å¥½ä½¿ç”¨å›¾ç‰‡æ¥ä»£æ›¿ï¼Œé¿å…å‡ºç°æœªçŸ¥çš„é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯æ¶‰åŠåˆ°é¢œè‰²çš„ç›¸å…³å±æ€§å¯¹é€æ˜åº¦çš„æ”¯æŒåº¦åˆ—è¡¨ å±æ€§ IOS Android H5 color æ”¯æŒ æ”¯æŒ æ”¯æŒ opacity æ”¯æŒ æ”¯æŒ æ”¯æŒ border-color æ”¯æŒ æ”¯æŒ æ”¯æŒ box-shadow æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ background-color æ”¯æŒ æ”¯æŒ æ”¯æŒ background-image ä¸æ”¯æŒ æ”¯æŒ æ”¯æŒ 7ã€Weexä¸æ”¯æŒæ ·å¼ç®€å†™123456789.border &#123; margin: 0 10px; // é”™è¯¯ margin-right: 10px; margin-left: 10px; // æ­£ç¡® border: 1px solid #000; // é”™è¯¯ border-width: 1px; border-style: solid; border-color: #000; // æ­£ç¡®&#125; 8ã€ ç‚¹å‡»æ€é¡¹ç›®æ¯”è¾ƒå¸¸è§çš„ç‚¹å‡»æ€å¤šåŠæ˜¯é€æ˜åº¦çš„å˜åŒ–ï¼Œå¦‚æŒ‰é’®ã€åˆ—è¡¨ã€é“¾æ¥ç­‰ï¼Œcssçš„åšæ³•æ˜¯æ·»åŠ ä¼ªç±» (:active)ï¼ŒWeexä¸­ä¹ŸåŒæ ·æ”¯æŒï¼Œä½†æ˜¯Weexéœ€è¦åœ¨åŸæ ·å¼ä¸­æ·»åŠ  opacity:1,å¦åˆ™ç‚¹å‡»åå›ä¸åˆ°åˆå§‹çŠ¶æ€ï¼›æ­¤å¤–ï¼Œ:activeä½¿ç”¨æ—¶,background-imageåœ¨iosä¸‹ä¼šå¤±æ•ˆã€‚12345678910111213&lt;template&gt; &lt;div class=&quot;btn&quot;&gt; &lt;text&gt;ä¸‹è½½&lt;/text&gt; &lt;/div&gt;&lt;/template&gt;&lt;style scoped&gt; .btn &#123; opacity: 1; // å¿…é¡»æ·»åŠ  &#125; .btn:active &#123; opacity: 0.5; &#125;&lt;/style&gt; 9ã€ æ–‡æœ¬æˆªæ–­æ–‡æœ¬ä»é™åˆ¶ä¸€è¡Œåˆ°ä¸é™åˆ¶å¯ä»¥ä½¿ç”¨lines:0æ¥æ§åˆ¶;123456789101112131415161718192021222324252627&lt;template&gt; &lt;text class=&quot;text&quot; @click=&quot;onClickText&quot; :style=&quot;textStyle&quot;&gt; è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œè¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œ &lt;/text&gt;&lt;/template&gt;&lt;style scoped&gt;.text &#123; text-overflow: ellipsis; lines: 1;&#125;&lt;/style&gt;&lt;script&gt; export default &#123; data () &#123; return &#123; textStyle: &#123;&#125;, &#125;; &#125;, methods: &#123; onClickText() &#123; this.textStyle = &#123; lines: 0, &#125;; &#125;, &#125;, &#125;&lt;/script&gt; 10ã€htmlé¡ºåºåœ¨ä¸åŒè®¾å¤‡ä¸Šçš„æ˜¾ç¤ºä¾‹å¦‚æœ‰aã€bã€cã€d å››å±‚ç»“æ„ï¼Œå…¶ä¸­aã€bã€cå‡ä¸ºabsoluteå®šä½,z-indexç”±å¤§åˆ°å°ï¼Œdä¸ºæ™®é€šç»“æ„ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨cssä¸­aå±‚åº”è¯¥æ˜¯å¤„äºæœ€ä¸Šæ–¹ï¼Œdåœ¨æœ€ä¸‹æ–¹ï¼Œé‚£ä¹ˆåœ¨weexä¸­è¡¨ç°å¦‚ä½•å‘¢ï¼Ÿ12345678&lt;template&gt; &lt;div&gt; &lt;div&gt;A(ç»¿)&lt;/div&gt; &lt;div&gt;B(è“)&lt;/div&gt; &lt;div&gt;C(ç´«)&lt;/div&gt; &lt;div&gt;D(çº¢)&lt;/div&gt; &lt;/div&gt;&lt;/template&gt; webiosã€android å¯ä»¥çœ‹åˆ°webå’Œiosã€androidçš„è¡¨ç°ä¸ä¸€è‡´ï¼Œiosã€androidä¸­æ˜¯ä»¥ä»£ç ä¸­domé¡ºåºæ¥ä¾æ¬¡æ·»åŠ çš„ï¼Œå’Œz-indexæ— å…³ï¼Œåé¢åŠ è½½çš„è§†å›¾ä¼šè¦†ç›–å‰é¢çš„è§†å›¾ã€‚æ‰€ä»¥è¦ä¿è¯webã€iosã€androidä¸‰ç«¯è¡¨ç°ä¸€è‡´ï¼Œæ”¹å˜domä¹¦å†™é¡ºåºå³å¯ã€‚ 12345678&lt;template&gt; &lt;div&gt; &lt;div&gt;D(çº¢)&lt;/div&gt; &lt;div&gt;C(ç´«)&lt;/div&gt; &lt;div&gt;B(è“)&lt;/div&gt; &lt;div&gt;A(ç»¿)&lt;/div&gt; &lt;/div&gt;&lt;/template&gt; 11ã€å®‰å“ä¸‹é®æŒ¡é—®é¢˜å®‰å“ä¸‹å®¹å™¨å¦‚æœè®¾ç½®äº†å®½é«˜ï¼Œé‚£ä¹ˆå­å…ƒç´ ä¸èƒ½è¶…å‡ºå®¹å™¨èŒƒå›´ 12ã€å¾®ä¿¡ç¯å¢ƒè¾“å…¥æ¡†å¤±ç„¦æ—¶ï¼Œå½“å‰é¡µé¢çš„è§†å›¾åç§»é‡æœªå›å¤åˆ°åˆå§‹ä½ç½®ã€‚å¾®ä¿¡ç¯å¢ƒè¾“å…¥æ¡†æ”¶èµ·ä¼šæ”¹å˜é¡µé¢domç»“æ„å¸ƒå±€ï¼Œå¯ä»¥é‡‡å–æ•è·å¤±å»ç„¦ç‚¹äº‹ä»¶ï¼Œ æ‰§è¡Œwindow.scrollTo(0, 0); 13ã€å¾®ä¿¡ç¯å¢ƒä¸‹è¶…è¿‡ä¸€å±çš„é•¿å›¾åœ¨åŠ è½½æ—¶æ¸²æŸ“ä¸å‡ºæ¥å¯ä»¥å¯¹å›¾ç‰‡çš„çˆ¶å®¹å™¨ï¼ˆscrollerã€ listï¼‰è®¾ç½®ä¸€ä¸ªèƒŒæ™¯é¢œè‰²ï¼Œå³å¯æˆåŠŸåŠ è½½ã€‚ 14ã€æ¸å˜weexä¸æ”¯æŒå¾„å‘æ¸å˜radial-gradient,åªæ”¯æŒåˆ›å»ºçº¿æ€§æ¸å˜ã€‚å¹¶ä¸”åªæ”¯æŒä¸¤ç§é¢œè‰²çš„æ¸å˜ï¼Œæ¸å˜æ–¹å‘å¦‚ä¸‹ï¼š to right: ä»å·¦å‘å³æ¸å˜ to left: ä»å³å‘å·¦æ¸å˜ to bottom: ä»ä¸Šå‘ä¸‹æ¸å˜ to top: ä»ä¸‹å‘ä¸Šæ¸å˜ to bottom right: ä»å·¦ä¸Šè§’å‘å³ä¸‹è§’æ¸å˜ to top left: ä»å³ä¸‹è§’å‘å·¦ä¸Šè§’æ¸å˜ æ³¨æ„ background-imageä¼˜å…ˆçº§é«˜äºbackground-colorï¼Œè¿™æ„å‘³ç€åŒæ—¶è®¾ç½®background-imageå’Œbackground-color,åè€…ä¼šè¢«è¦†ç›–ã€‚ backgroundä¸æ”¯æŒç®€å†™ã€‚ 15ã€å¯Œæ–‡æœ¬weexåœ¨0.20ç‰ˆæœ¬æ·»åŠ ä¸€ä¸ªæ–°çš„æ ‡ç­¾richtextå³å¯Œæ–‡æœ¬æ ‡ç­¾ã€‚ä½†åœ¨ä¹‹å‰çš„ç‰ˆæœ¬å†…weexæ˜¯ä¸æ”¯æŒå¯Œæ–‡æœ¬åŠŸèƒ½çš„ï¼ŒåŸºæœ¬å¯Œæ–‡æœ¬åŠŸèƒ½éƒ½æ˜¯ä½¿ç”¨å›¾ç‰‡æ¥ä»£è¡¨ï¼Œå› ä¸ºweexçš„å­—ä½“æ ‡ç­¾åªæœ‰textï¼Œå¹¶ä¸”éƒ½æ˜¯weexæ‰€æœ‰çš„æ ‡ç­¾ç»“æ„éƒ½æ˜¯å¼¹æ€§å¸ƒå±€ï¼›ä½†æ˜¯weexä¹Ÿæä¾›äº†ä¸€ä¸ªæ–¹æ¡ˆï¼Œå³åœ¨weexä¸­ç©ºæ ¼ä¹Ÿæ˜¯å æ®ä¸€å®šç©ºé—´çš„ï¼Œæ‰€ä»¥å¯ä»¥æ”¯æŒä¸€äº›ç‰¹å®šçš„å¯Œæ–‡æœ¬åŠŸèƒ½ã€‚ å¯Œæ–‡æœ¬ 1234567891011121314151617181920212223&lt;template&gt; &lt;div&gt; &lt;image class=&quot;tag-image&quot; :src=&quot;data.userType | typeImg&quot; :style=&quot;&#123; top: `$&#123;getEnvValue(17,18,13)&#125;px`&#125;&quot;&gt;&lt;/image&gt; &lt;text class=&quot;item-title&quot;&gt;&#123;&#123;&apos; &apos; + getEnvValue(&apos; &apos;,&apos;&apos;,&apos; &apos;)+ data.title&#125;&#125;&lt;/text&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; methods: &#123; // æ ¹æ®ç¯å¢ƒä¸åŒè¿”å›ä¸åŒçš„ä¸‰ä¸ªå€¼ getEnvValue(webValue, iOSValue, androidValue) &#123; if (this.isWeb) &#123; return webValue; &#125; else if (this.isIos) &#123; return iOSValue; &#125; else if (this.isAndroid) &#123; return androidValue; &#125; return iOSValue; &#125;, &#125;&#125;&lt;/script&gt; è¾“å…¥äº‹ä»¶1ã€è¾“å…¥æ¡†ä¸èƒ½æ¸…ç©ºå†…å®¹éœ€è¦æ¸…ç©ºè¾“å…¥æ¡†å†…å·²ç»è¾“å…¥çš„å†…å®¹æ—¶ï¼Œä¸èƒ½ç›´æ¥å°†ç»‘å®šçš„å€¼ç½®ä¸ºç©ºï¼Œè€Œæ˜¯åº”è¯¥å…ˆéšè—è¾“å…¥æ¡†å†…æ˜¾ç¤ºçš„å€¼ï¼Œåœ¨ä¸€æ¬¡æ¸²æŸ“ä¹‹åå°†åœ¨å°†å€¼ç½®ä¸ºç©ºã€‚12345678910111213141516171819202122232425262728293031323334353637&lt;template&gt; &lt;div class=&quot;input-wrap&quot;&gt; &lt;wxs-icon name=&quot;search&quot; size=&apos;40px&apos; color=&apos;#b2b2b2&apos;&gt;&lt;/wxs-icon&gt; &lt;input :value=&quot;searchKeyWord&quot; returnKeyType=&quot;search&quot; @focus=&quot;onInputFocus&quot; @blur=&quot;onInputBlur&quot; @input=&quot;onInputInput&quot; @return=&quot;onInputReturn&quot; class=&quot;input-hint&quot; ref=&quot;input&quot; placeholder-color=&quot;#cccccc&quot; :singleline=&quot;true&quot; :lines=&quot;1&quot; /&gt; &lt;div class=&quot;erase&quot; @click=&quot;onClickErase&quot;&gt; &lt;wxs-icon v-if=&quot;isInputFocus || isWeb&quot; name=&quot;erase&quot; size=&apos;36px&apos; color=&apos;#b2b2b2&apos; &gt;&lt;/wxs-icon&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; searchKeyWord: &apos;&apos;, &#125;; &#125;, methods: &#123; onClickErase() &#123; this.searchKeyWord = &apos; &apos;; this.$nextTick(() =&gt; &#123; this.searchKeyWord = &apos;&apos;; &#125;); &#125;, &#125;&#125;&lt;/script&gt; 2ã€Weex inputè¾“å…¥æ¡†ç»„ä»¶ åœ¨å®‰å“ä¸‹inputäº‹ä»¶BUGå½“ä½¿ç”¨v-modelç»‘å®šå€¼æ—¶ï¼Œè¿˜åŸåˆ°ç»‘å®šå€¼åŸå§‹çŠ¶æ€æ—¶ï¼Œæ— æ³•è§¦å‘inputäº‹ä»¶ï¼Œæ­¤æ—¶è¿˜å½±å“åˆ°v-modelçš„ç»‘å®šã€‚åœ¨androidä¸Šçš„è¡¨ç°ä¸ºå¯¹è¾“å…¥æ¡†çš„inputäº‹ä»¶è¿›è¡Œç›‘å¬ï¼›æ‰“å¼€é¡µé¢é€‰ä¸­è¾“å…¥æ¡†ï¼Œå¯¹è¾“å…¥æ¡†è¾“å…¥ä¸€ä¸²æ–‡å­—ï¼Œæ­¤æ—¶æˆåŠŸçš„è§¦å‘äº†inputäº‹ä»¶ã€‚æŒ‰é”®ç›˜ä¸Šçš„åˆ é™¤ï¼Œæœ€åˆä¹Ÿæ˜¯æˆåŠŸçš„è§¦å‘inputäº‹ä»¶ï¼Œå½“æœ€åä¸€ä¸ªå­—ç¬¦è¢«åˆ é™¤æ—¶ï¼Œinputäº‹ä»¶å¹¶ä¸ä¼šè§¦å‘ã€‚å¦‚æœä¸ä½¿ç”¨valueæ¥è®¾ç½®å€¼ï¼Œæ”¹ä½¿ç”¨v-modelï¼Œä¹Ÿä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µã€‚é€šè¿‡æŸ¥é˜…èµ„æ–™ï¼Œå‘ç°è¿™ä¸ªæ˜¯weex android sdkå­˜åœ¨çš„ä¸€ä¸ªå‘ç‚¹ï¼ˆä½œè€…æ²¡å¤ªæ¥è§¦è¿‡å®‰å“å¼€å‘ï¼‰https://segmentfault.com/q/1010000010238162/a-1020000010276364é‡Œé¢ç»™å‡ºäº†ä¸€å¼ ä¿®æ”¹æºç çš„æ–¹å¼æ¥è§£å†³è¯¥BUGã€‚ä¸»è¦é—®é¢˜æ˜¯åœ¨WXInputçš„çˆ¶ç±»AbstractEditComponentç±»ä¸­, mIgnoreNextOnInputEvent è¿™ä¸ªå˜é‡åœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™è¢«è®¾ç½®ä¸ºäº†TRUEï¼Œå¯¼è‡´äº†ç¬¬ä¸€æ¬¡è¾“å…¥inputå†…å®¹æ˜¾ç¤ºä¸å‡ºæ¥ã€‚ä½¿ç”¨ä¸Šä¸€ä¸ªé—®é¢˜çš„æ–¹æ³•ä¹Ÿå¯ä»¥æˆåŠŸçš„è§£å†³è¯¥é—®é¢˜ï¼Œä¹Ÿå¯ä»¥å°†searchKeyWordçš„åˆå§‹å€¼ç½®ä¸ºundefinedä¹Ÿå¯ä»¥å¾ˆå¥½çš„è§„é¿è¯¥é—®é¢˜ã€‚ ç»„ä»¶å‘½ä»¤ç»„ä»¶å‘½ååº”é¿å…ä½¿ç”¨JSå…³é”®å­—å’Œä¿ç•™å­—ï¼Œä»¥åŠweexæä¾›çš„ç»„ä»¶åç§°ï¼Œå¦‚ç”¨loadingä½œä¸ºç»„ä»¶åç§°ï¼Œåœ¨iosä¸androidä¸­å°†å‘ˆç°ç©ºç™½ã€‚ 12345&lt;template&gt; &lt;div&gt; &lt;Loading&gt;&lt;/Loading&gt; /* æ”¹ç”¨å…¶ä»–åç§° */ &lt;/div&gt;&lt;/template&gt; è‡ªå®šä¹‰sliderç»„ä»¶weexæœ¬èº«æä¾›äº†sliderç»„ä»¶ï¼Œä½†è½®æ’­å›¾æŒ‡ç¤ºå™¨ï¼ˆindicatorï¼‰åªèƒ½ä¿®æ”¹é¢œè‰²ä¸ä½ç½®ï¼Œå¤§å°å´æ— æ³•æ›´æ”¹ï¼Œæ‰€ä»¥éœ€è¦è‡ªå®šä¹‰sliderç»„ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;template&gt; &lt;!-- é¦–é¡µbanneråŒºå— --&gt; &lt;div class=&quot;activity-wrap&quot; :style=&quot;&#123; top: (topSafeAreaHeight + 123) + &apos;px&apos; &#125;&quot;&gt; &lt;slider class=&quot;activity&quot; :autoPlay=&quot;true&quot; interval=&quot;4000&quot; @change=&quot;sliderChange&quot;&gt; &lt;div class=&quot;activity-cell&quot; v-for=&quot;(item, index) in bannerList&quot; :key=&quot;index&quot; @click=&quot;clickInBanner(item)&quot;&gt; &lt;image class=&quot;activity-wrap-bg&quot; resize=&quot;cover&quot; :src=&quot;imageRes.bannerBgImg&quot;&gt;&lt;/image&gt; &lt;image class=&quot;activity-wrap-image&quot; :src=&quot;item.pictureUrl&quot;&gt;&lt;/image&gt; &lt;/div&gt; &lt;/slider&gt; &lt;div class=&quot;slider-indicator-wrap&quot; v-if=&quot;bannerList &amp;&amp; bannerList.length &gt; 1&quot;&gt; &lt;div v-for=&quot;(icon, index) in bannerList&quot; :key=&quot;index&quot; ref=&quot;activeSliderKey&quot; class=&quot;slider-indicator&quot; :class=&quot;[index === 0 ? &apos;slider-indicator-left&apos; : &apos;&apos;]&quot; &gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; ..., methods: &#123; // é¦–é¡µbanneråˆ‡æ¢å›è°ƒ sliderChange(&#123; index &#125;) &#123; const self = this; if (self.bannerList.length &gt; 0) &#123; for (let i = 0; i &lt; self.bannerList.length; i += 1) &#123; animation.transition(self.$refs.activeSliderKey[i], &#123; styles: &#123; backgroundColor: &apos;rgba(255, 255, 255, 0.3)&apos;, &#125;, delay: 0, &#125;); &#125; animation.transition(self.$refs.activeSliderKey[index], &#123; styles: &#123; backgroundColor: &apos;rgba(255, 255, 255)&apos;, &#125;, delay: 0, &#125;); &#125; &#125;, &#125;,&#125;&lt;/script&gt; åŠ¨ç”»weexä¸æ”¯æŒå¸§åŠ¨ç”»ï¼Œä½†æœ¬èº«è‡ªå¸¦çš„transitionå¯ä»¥ä¼ å…¥å¯¹åº”çš„styleï¼Œå¹¶é€šè¿‡setIntervalæ¥æ§åˆ¶åŠ¨ç”»å¾ªç¯æ’­æ”¾ animation.js123456789101112131415161718192021222324252627282930313233343536const animation = weex.requireModule(&apos;animation&apos;);export function transition(el, opts, dd) &#123; const duration = dd || 400; if (!el) &#123; return Promise.resolve(); &#125; return new Promise((resolve) =&gt; &#123; animation.transition(el, &#123; duration, timingFunction: &apos;linear&apos;, delay: 0, ...opts, &#125;, resolve); &#125;);&#125;export function run(el) &#123; transition(el, &#123; styles: &#123; transform: &apos;scale(1.02)&apos;, &#125;, &#125;, 100).then(() =&gt; &#123; transition(el, &#123; styles: &#123; transform: &apos;scale(1.08)&apos;, &#125;, &#125;, 200); &#125;).then(() =&gt; &#123; transition(el, &#123; styles: &#123; transition: &apos;scale(1)&apos;, &#125;, &#125;, 300); &#125;);&#125; page.vue123456789101112131415&lt;template&gt; &lt;div ref=&quot;btn&quot;&gt;&lt;/btn&gt;&lt;/template&gt;&lt;script&gt;export default &#123; ... mounted() &#123; setTimeout(() =&gt; &#123; setInterval(() =&gt; &#123; animation.run(this.$refs.btn); &#125;, 600); &#125;, 300); &#125;,&#125;&lt;/script&gt; å‚è€ƒé“¾æ¥ ä¼é¹…ç”µç«weexå®è·µâ€”â€”UIå¼€å‘ç¯‡ weex ä¸­Androidçš„v-modelåŒå‘ç»‘å®š è¾“å…¥ç¬¬ä¸€ä¸ªå­—ç¬¦æ—¶æ— å“åº”]]></content>
      <categories>
        <category>Weex</category>
      </categories>
      <tags>
        <tag>Weex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[[è½¬]ä½ ä¸çŸ¥é“çš„JavaScriptä¸Šå·è¯»ä¹¦ç¬”è®°]]></title>
    <url>%2F2018%2F11%2F29%2F%E8%BD%AC-%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JavaScript%E4%B8%8A%E5%8D%B7%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[é“¾æ¥ï¼šhttps://juejin.im/post/5bfaa2e26fb9a04a0440b0e4æ¥æºï¼šæ˜é‡‘ ç¬¬ä¸€éƒ¨åˆ† ä½œç”¨åŸŸå’Œé—­åŒ…ç¬¬ä¸€ç«  ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ 1.1 ç¼–è¯‘åŸç†ä¼ ç»Ÿç¼–è¯‘çš„ä¸‰ä¸ªæ­¥éª¤ 1,åˆ†è¯/è¯æ³•åˆ†æ(Tokenizing/Lexing) : è¿™ä¸ªè¿‡ç¨‹ä¼šå°†ç”±å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²åˆ†è§£æˆ(å¯¹ç¼–ç¨‹è¯­è¨€æ¥è¯´)æœ‰æ„ä¹‰çš„ä»£ç å—ï¼Œè¿™äº›ä»£ç å—è¢«ç§°ä¸ºè¯æ³•å•å…ƒ(token)ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ç¨‹åºvar a = 2;ã€‚è¿™æ®µç¨‹åºé€šå¸¸ä¼šè¢«åˆ†è§£æˆ ä¸ºä¸‹é¢è¿™äº›è¯æ³•å•å…ƒ:varã€aã€=ã€2ã€;ã€‚ç©ºæ ¼æ˜¯å¦ä¼šè¢«å½“ä½œè¯æ³•å•å…ƒï¼Œå–å†³äºç©ºæ ¼åœ¨ è¿™é—¨è¯­è¨€ä¸­æ˜¯å¦å…·æœ‰æ„ä¹‰ã€‚ 2,è§£æ/è¯­æ³•åˆ†æ(Parsing): è¿™ä¸ªè¿‡ç¨‹æ˜¯å°†è¯æ³•å•å…ƒæµ(æ•°ç»„)è½¬æ¢æˆä¸€ä¸ªç”±å…ƒç´ é€çº§åµŒå¥—æ‰€ç»„æˆçš„ä»£è¡¨äº†ç¨‹åºè¯­æ³•ç»“æ„çš„æ ‘ã€‚è¿™ä¸ªæ ‘è¢«ç§°ä¸ºâ€œæŠ½è±¡è¯­æ³•æ ‘â€(Abstract Syntax Treeï¼ŒAST)ã€‚var a = 2; çš„æŠ½è±¡è¯­æ³•æ ‘ä¸­å¯èƒ½ä¼šæœ‰ä¸€ä¸ªå«ä½œ VariableDeclaration çš„é¡¶çº§èŠ‚ç‚¹ï¼Œæ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªå«ä½œIdentifier(å®ƒçš„å€¼æ˜¯a)çš„å­èŠ‚ç‚¹ï¼Œä»¥åŠä¸€ä¸ªå«ä½œ AssignmentExpression çš„å­èŠ‚ç‚¹ã€‚AssignmentExpression èŠ‚ç‚¹æœ‰ä¸€ä¸ªå«ä½œ NumericLiteral(å®ƒçš„å€¼æ˜¯ 2)çš„å­èŠ‚ç‚¹ã€‚ 3,ä»£ç ç”Ÿæˆ: å°† AST è½¬æ¢ä¸ºå¯æ‰§è¡Œä»£ç çš„è¿‡ç¨‹ç§°è¢«ç§°ä¸ºä»£ç ç”Ÿæˆã€‚è¿™ä¸ªè¿‡ç¨‹ä¸è¯­è¨€ã€ç›®æ ‡å¹³å°ç­‰æ¯æ¯ç›¸å…³ã€‚æŠ›å¼€å…·ä½“ç»†èŠ‚ï¼Œç®€å•æ¥è¯´å°±æ˜¯æœ‰æŸç§æ–¹æ³•å¯ä»¥å°† var a = 2; çš„ AST è½¬åŒ–ä¸ºä¸€ç»„æœºå™¨æŒ‡ä»¤ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªå«ä½œ a çš„å˜é‡(åŒ…æ‹¬åˆ†é…å†…å­˜ç­‰)ï¼Œå¹¶å°†ä¸€ä¸ªå€¼å‚¨å­˜åœ¨ a ä¸­ã€‚ è¯´æ˜: æ­¤å¤„åªéœ€è®°ä½ç¬¬ä¸€æ­¥:åˆ†è¯/è¯æ³•åˆ†æ.ç¬¬äºŒæ­¥:è§£æ/è¯­æ³•åˆ†æ,å¾—åˆ°æŠ½è±¡è¯­æ³•æ ‘(AST).ç¬¬ä¸‰æ­¥:ä»£ç ç”Ÿæˆ,å°†æŠ½è±¡è¯­æ³•æ ‘è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤. JavaScriptä¸ä¼ ç»Ÿç¼–è¯‘çš„ä¸åŒç‚¹: 1,JavaScript å¼•æ“ä¸ä¼šæœ‰å¤§é‡çš„(åƒå…¶ä»–è¯­è¨€ç¼–è¯‘å™¨é‚£ä¹ˆå¤šçš„)æ—¶é—´ç”¨æ¥è¿›è¡Œä¼˜åŒ–. 2,JavaScriptä¸ä¼ ç»Ÿçš„ç¼–è¯‘è¯­è¨€ä¸åŒï¼Œå®ƒä¸æ˜¯åœ¨æ„å»ºä¹‹å‰æå‰ç¼–è¯‘çš„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹,å®ƒæ˜¯åœ¨ä»£ç æ‰§è¡Œå‰çš„å‡ å¾®ç§’(ç”šè‡³æ›´çŸ­)è¿›è¡Œç¼–è¯‘. 3,JavaScript å¼•æ“ç”¨å°½äº†å„ç§åŠæ³•(æ¯”å¦‚ JITï¼Œå¯ä»¥å»¶ è¿Ÿç¼–è¯‘ç”šè‡³å®æ–½é‡ç¼–è¯‘)æ¥ä¿è¯æ€§èƒ½æœ€ä½³ã€‚ 4,JavaScriptçš„ç¼–è¯‘ç»“æœä¸èƒ½åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿›è¡Œç§»æ¤ã€‚ 1.2 ç†è§£ä½œç”¨åŸŸ1.2.1 æ¼”å‘˜è¡¨(ä»£ç ç¼–è¯‘åˆ°æ‰§è¡Œçš„å‚ä¸è€…)é¦–å…ˆä»‹ç»å°†è¦å‚ä¸åˆ°å¯¹ç¨‹åº var a = 2; è¿›è¡Œå¤„ç†çš„è¿‡ç¨‹ä¸­çš„æ¼”å‘˜ä»¬ï¼Œè¿™æ ·æ‰èƒ½ç†è§£æ¥ä¸‹æ¥å°†è¦å¬åˆ°çš„å¯¹è¯ã€‚ å¼•æ“ä»å¤´åˆ°å°¾è´Ÿè´£æ•´ä¸ª JavaScript ç¨‹åºçš„ç¼–è¯‘åŠæ‰§è¡Œè¿‡ç¨‹ã€‚ ç¼–è¯‘å™¨å¼•æ“çš„å¥½æœ‹å‹ä¹‹ä¸€ï¼Œè´Ÿè´£è¯­æ³•åˆ†æåŠä»£ç ç”Ÿæˆç­‰è„æ´»ç´¯æ´»(è¯¦è§å‰ä¸€èŠ‚çš„å†…å®¹)ã€‚ ä½œç”¨åŸŸå¼•æ“çš„å¦ä¸€ä½å¥½æœ‹å‹ï¼Œè´Ÿè´£æ”¶é›†å¹¶ç»´æŠ¤ç”±æ‰€æœ‰å£°æ˜çš„æ ‡è¯†ç¬¦(å˜é‡)ç»„æˆçš„ä¸€ç³»åˆ—æŸ¥è¯¢ï¼Œå¹¶å®æ–½ä¸€å¥—éå¸¸ä¸¥æ ¼çš„è§„åˆ™ï¼Œç¡®å®šå½“å‰æ‰§è¡Œçš„ä»£ç å¯¹è¿™äº›æ ‡è¯†ç¬¦çš„è®¿é—®æƒé™ã€‚1.2.2 å¯¹è¯(ä»£ç ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹) 1.2.3 ä½œç”¨åŸŸçš„LHSæŸ¥è¯¢å’ŒRHSæŸ¥è¯¢ç”±ä¸Šå›¾å¯çŸ¥,å¼•æ“åœ¨è·å¾—ç¼–è¯‘å™¨ç»™çš„ä»£ç å,è¿˜ä¼šå¯¹ä½œç”¨åŸŸè¿›è¡Œè¯¢é—®å˜é‡. ç°åœ¨å°†ä¾‹å­æ”¹ä¸ºvar a = b;æ­¤æ—¶å¼•æ“ä¼šå¯¹å˜é‡aå’Œå˜é‡béƒ½å‘ä½œç”¨åŸŸè¿›è¡ŒæŸ¥è¯¢.æŸ¥è¯¢åˆ†ä¸ºä¸¤ç§:LHSå’ŒRHS.å…¶ä¸­Lä»£è¡¨å·¦.Rä»£è¡¨å³.å³å¯¹å˜é‡aè¿›è¡ŒLHSæŸ¥è¯¢.å¯¹å˜é‡bè¿›è¡ŒRHSæŸ¥è¯¢. å•å•ä»è¡¨è±¡ä¸Šçœ‹.LHSå°±æ˜¯ä½œç”¨åŸŸå¯¹=å·¦è¾¹å˜é‡çš„æŸ¥è¯¢.RHSå°±æ˜¯ä½œç”¨åŸŸå¯¹=å³è¾¹å˜é‡çš„æŸ¥è¯¢.ä½†å®é™…ä¸Šå¹¶ä¸æ˜¯è¿™ä¹ˆç®€å•,é¦–å…ˆLHSå’ŒRHSéƒ½æ˜¯å¯¹å˜é‡è¿›è¡ŒæŸ¥è¯¢,è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºä»€ä¹ˆè¦å°†ä¾‹å­ä»var a=2;æ”¹ä¸ºvar a=b;ä¸¤è€…çš„åŒºåˆ«æ˜¯ä¸¤è€…æœ€ç»ˆè¦æŸ¥è¯¢åˆ°çš„ä¸œè¥¿å¹¶ä¸ä¸€è‡´.LHSæ˜¯è¦æŸ¥è¯¢åˆ°å˜é‡çš„å£°æ˜(è€Œä¸æ˜¯å˜é‡çš„å€¼),ä»è€Œåé¢å¯ä»¥ä¸ºå…¶èµ‹å€¼.RHSæ˜¯è¦æŸ¥è¯¢åˆ°å˜é‡æœ€ç»ˆçš„å€¼.è¿˜æœ‰ä¸€ç‚¹,LHS å’Œ RHS çš„å«ä¹‰æ˜¯â€œèµ‹å€¼æ“ä½œçš„å·¦ä¾§æˆ–å³ä¾§â€å¹¶ä¸ä¸€å®šæ„å‘³ç€å°±æ˜¯â€œ= èµ‹å€¼æ“ä½œç¬¦çš„å·¦ä¾§æˆ–å³ä¾§â€ã€‚èµ‹å€¼æ“ä½œè¿˜æœ‰å…¶ä»–å‡ ç§å½¢å¼ï¼Œå› æ­¤åœ¨æ¦‚å¿µä¸Šæœ€ å¥½å°†å…¶ç†è§£ä¸ºâ€œèµ‹å€¼æ“ä½œçš„ç›®æ ‡æ˜¯è°(LHS)â€ä»¥åŠâ€œè°æ˜¯èµ‹å€¼æ“ä½œçš„æºå¤´(RHS)â€.æˆ–è€…è¿™æ ·ç†è§£å¦‚æœè¿™æ®µä»£ç éœ€è¦å¾—åˆ°è¯¥å˜é‡çš„â€™æºå€¼â€™,åˆ™ä¼šè¿›è¡ŒRHSæŸ¥è¯¢. 1.2.4 å¼•æ“å’Œä½œç”¨åŸŸçš„å¯¹è¯è¿™éƒ¨åˆ†æ¯”è¾ƒç®€å•å°±æ˜¯é€šè¿‡æ‹Ÿäººæ–¹å¼æ¯”å–»å¼•æ“å’Œä½œç”¨åŸŸçš„åˆä½œè¿‡ç¨‹.ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯,å¼•æ“è¿›è¡ŒLHSå’ŒRHSæŸ¥è¯¢æ—¶éƒ½ä¼šæ‰¾ä½œç”¨åŸŸè¦.1234function foo(a) &#123; console.log( a ); // 2&#125;foo( 2 ); è®©æˆ‘ä»¬æŠŠä¸Šé¢è¿™æ®µä»£ç çš„å¤„ç†è¿‡ç¨‹æƒ³è±¡æˆä¸€æ®µå¯¹è¯ï¼Œè¿™æ®µå¯¹è¯å¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„ã€‚ å¼•æ“:æˆ‘è¯´ä½œç”¨åŸŸï¼Œæˆ‘éœ€è¦ä¸º foo è¿›è¡Œ RHS å¼•ç”¨ã€‚ä½ è§è¿‡å®ƒå—?ä½œç”¨åŸŸ:åˆ«è¯´ï¼Œæˆ‘è¿˜çœŸè§è¿‡ï¼Œç¼–è¯‘å™¨é‚£å°å­åˆšåˆšå£°æ˜äº†å®ƒã€‚å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç»™ä½ ã€‚å¼•æ“:å“¥ä»¬å¤ªå¤Ÿæ„æ€äº†!å¥½å§ï¼Œæˆ‘æ¥æ‰§è¡Œä¸€ä¸‹ fooã€‚å¼•æ“:ä½œç”¨åŸŸï¼Œè¿˜æœ‰ä¸ªäº‹å„¿ã€‚æˆ‘éœ€è¦ä¸º a è¿›è¡Œ LHS å¼•ç”¨ï¼Œè¿™ä¸ªä½ è§è¿‡å—?ä½œç”¨åŸŸ:è¿™ä¸ªä¹Ÿè§è¿‡ï¼Œç¼–è¯‘å™¨æœ€è¿‘æŠŠå®ƒå£°åä¸º foo çš„ä¸€ä¸ªå½¢å¼å‚æ•°äº†ï¼Œæ‹¿å»å§ã€‚å¼•æ“:å¤§æ©ä¸è¨€è°¢ï¼Œä½ æ€»æ˜¯è¿™ä¹ˆæ£’ã€‚ç°åœ¨æˆ‘è¦æŠŠ 2 èµ‹å€¼ç»™ aã€‚å¼•æ“:å“¥ä»¬ï¼Œä¸å¥½æ„æ€åˆæ¥æ‰“æ‰°ä½ ã€‚æˆ‘è¦ä¸º console è¿›è¡Œ RHS å¼•ç”¨ï¼Œä½ è§è¿‡å®ƒå—?ä½œç”¨åŸŸ:å’±ä¿©è°è·Ÿè°å•Šï¼Œå†è¯´æˆ‘å°±æ˜¯å¹²è¿™ä¸ªã€‚è¿™ä¸ªæˆ‘ä¹Ÿæœ‰ï¼Œconsole æ˜¯ä¸ªå†…ç½®å¯¹è±¡ã€‚ ç»™ä½ ã€‚å¼•æ“:ä¹ˆä¹ˆå“’ã€‚æˆ‘å¾—çœ‹çœ‹è¿™é‡Œé¢æ˜¯ä¸æ˜¯æœ‰ log(..)ã€‚å¤ªå¥½äº†ï¼Œæ‰¾åˆ°äº†ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å¼•æ“:å“¥ä»¬ï¼Œèƒ½å¸®æˆ‘å†æ‰¾ä¸€ä¸‹å¯¹ a çš„ RHS å¼•ç”¨å—?è™½ç„¶æˆ‘è®°å¾—å®ƒï¼Œä½†æƒ³å†ç¡®è®¤ä¸€æ¬¡ã€‚ä½œç”¨åŸŸ:æ”¾å¿ƒå§ï¼Œè¿™ä¸ªå˜é‡æ²¡æœ‰å˜åŠ¨è¿‡ï¼Œæ‹¿èµ°ï¼Œä¸è°¢ã€‚å¼•æ“:çœŸæ£’ã€‚æˆ‘æ¥æŠŠ a çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ 2ï¼Œä¼ é€’è¿› log(..)ã€‚ 1.3ä½œç”¨åŸŸåµŒå¥—å½“ä¸€ä¸ªå—æˆ–å‡½æ•°åµŒå¥—åœ¨å¦ä¸€ä¸ªå—æˆ–å‡½æ•°ä¸­æ—¶ï¼Œå°±å‘ç”Ÿäº†ä½œç”¨åŸŸçš„åµŒå¥—ã€‚è¿›è€Œå½¢æˆäº†ä¸€æ¡ä½œç”¨åŸŸé“¾.å› æ­¤ï¼Œåœ¨å½“å‰ä½œç”¨ åŸŸä¸­æ— æ³•æ‰¾åˆ°æŸä¸ªå˜é‡æ—¶ï¼Œå¼•æ“å°±ä¼šåœ¨å¤–å±‚åµŒå¥—çš„ä½œç”¨åŸŸä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡ï¼Œ æˆ–æŠµè¾¾æœ€å¤–å±‚çš„ä½œç”¨åŸŸ(ä¹Ÿå°±æ˜¯å…¨å±€ä½œç”¨åŸŸ)ä¸ºæ­¢ã€‚ å½“å¼•æ“éœ€è¦å¯¹ä½œç”¨åŸŸè¿›è¡ŒæŸ¥è¯¢æ—¶.å¼•æ“ä¼šä»å½“å‰çš„æ‰§è¡Œä½œç”¨åŸŸå¼€å§‹æŸ¥æ‰¾å˜é‡ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œ å°±å‘ä¸Šä¸€çº§ç»§ç»­æŸ¥æ‰¾ã€‚å½“æŠµè¾¾æœ€å¤–å±‚çš„å…¨å±€ä½œç”¨åŸŸæ—¶ï¼Œæ— è®ºæ‰¾åˆ°è¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹éƒ½ ä¼šåœæ­¢ã€‚ 1.4 å¼‚å¸¸ä¾‹å­:12345function foo(a) &#123; console.log( a + b ); b = a;&#125;foo( 2 ); å¦‚æœ RHS æŸ¥è¯¢åœ¨æ‰€æœ‰åµŒå¥—çš„ä½œç”¨åŸŸä¸­éå¯»ä¸åˆ°æ‰€éœ€çš„å˜é‡ï¼Œå¼•æ“å°±ä¼šæŠ›å‡º ReferenceError å¼‚å¸¸ã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­console.log(a+b)ç”±äºRHSæ­¤æ—¶æ˜¯æ‰¾ä¸åˆ°bçš„å€¼.æ•…ä¼šæŠ›å‡ºReferenceError. å¦‚æœ RHS æŸ¥è¯¢æ‰¾åˆ°äº†ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯ä½ å°è¯•å¯¹è¿™ä¸ªå˜é‡çš„å€¼è¿›è¡Œä¸åˆç†çš„æ“ä½œï¼Œ æ¯”å¦‚è¯•å›¾å¯¹ä¸€ä¸ªéå‡½æ•°ç±»å‹çš„å€¼è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œæˆ–ç€å¼•ç”¨ null æˆ– undefined ç±»å‹çš„å€¼ä¸­çš„ å±æ€§ï¼Œé‚£ä¹ˆå¼•æ“ä¼šæŠ›å‡ºå¦å¤–ä¸€ç§ç±»å‹çš„å¼‚å¸¸ï¼Œå«ä½œ TypeErrorã€‚ å½“å¼•æ“æ‰§è¡Œ LHS æŸ¥è¯¢æ—¶ï¼Œå¦‚æœåœ¨é¡¶å±‚(å…¨å±€ä½œç”¨åŸŸ)ä¸­ä¹Ÿæ— æ³•æ‰¾åˆ°ç›®æ ‡å˜é‡ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­å°±ä¼šåˆ›å»ºä¸€ä¸ªå…·æœ‰è¯¥åç§°çš„å˜é‡ï¼Œå¹¶å°†å…¶è¿”è¿˜ç»™å¼•æ“ï¼Œå‰ææ˜¯ç¨‹åºè¿è¡Œåœ¨é â€œä¸¥æ ¼æ¨¡å¼â€ä¸‹ã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„b=a;. åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ LHS æŸ¥è¯¢å¤±è´¥æ—¶ï¼Œå¹¶ä¸ä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¼•æ“ä¼šæŠ›å‡ºåŒ RHS æŸ¥è¯¢ å¤±è´¥æ—¶ç±»ä¼¼çš„ ReferenceError å¼‚å¸¸ã€‚ 1.5 LHSä¸RHSå°ç»“ LHSå’ŒRHSæŸ¥è¯¢éƒ½æ˜¯å¼•æ“å¯¹ä½œç”¨åŸŸçš„æŸ¥è¯¢ LHSå’ŒRHSæŸ¥è¯¢éƒ½æ˜¯åªå¯¹å˜é‡è¿›è¡ŒæŸ¥è¯¢ LHSå’ŒRHSéƒ½ä¼šæ²¿ç€ä½œç”¨åŸŸé“¾è¿›è¡ŒæŸ¥è¯¢,ç›´åˆ°æœ€ä¸Šå±‚çš„å…¨å±€ä½œç”¨åŸŸ.å¦‚æœæ²¡æ‰¾åˆ°çš„è¯,åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹,LHSåˆ™ä¼šåœ¨å…¨å±€åˆ›å»ºä¸€ä¸ªç›¸åŒåç§°çš„å˜é‡.RHSåˆ™ä¼šæŠ›å‡ºReferenceErrorçš„å¼‚å¸¸. å¦‚æœæŸ¥æ‰¾çš„ç›®çš„æ˜¯å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨ LHS æŸ¥è¯¢;å¦‚æœç›®çš„æ˜¯è·å–å˜é‡çš„å€¼ï¼Œå°±ä¼šä½¿ç”¨ RHS æŸ¥è¯¢ã€‚ LHSåªæ˜¯æ‰¾åˆ°å˜é‡çš„å®¹å™¨è€Œå·²,æ–¹ä¾¿è¿›è¡Œèµ‹å€¼ =æ“ä½œç¬¦æˆ–è°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥å‚æ•°çš„æ“ä½œéƒ½ä¼šå¯¼è‡´å…³è”ä½œç”¨åŸŸçš„èµ‹å€¼æ“ä½œã€‚æ­¤æ—¶éƒ½ä¼šè¿›è¡ŒLHSæŸ¥è¯¢ RHSæŸ¥è¯¢åˆ™éœ€è¦æ‰¾åˆ°å˜é‡çš„å€¼. ç¬¬äºŒç«  è¯æ³•ä½œç”¨åŸŸä½œç”¨åŸŸåˆ†ä¸ºä¸¤ç§å·¥ä½œæ¨¡å¼: 1,è¯æ³•ä½œç”¨åŸŸ.æ˜¯ç›®å‰æœ€ä¸ºæ™®éçš„ï¼Œè¢«å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€æ‰€é‡‡ç”¨çš„æ¨¡å¼.å½“ç„¶JavaScriptä¹Ÿæ˜¯ä½¿ç”¨çš„è¯æ³•ä½œç”¨åŸŸ. 2,åŠ¨æ€ä½œç”¨åŸŸ.ä½¿ç”¨è¾ƒå°‘,æ¯”å¦‚ Bash è„šæœ¬ã€Perl ä¸­çš„ä¸€äº›æ¨¡å¼ç­‰. 2.1 è¯æ³•é˜¶æ®µè¯æ³•é˜¶æ®µ: å¤§éƒ¨åˆ†æ ‡å‡†è¯­è¨€ç¼–è¯‘å™¨çš„ç¬¬ä¸€ä¸ªå·¥ä½œé˜¶æ®µå«ä½œè¯æ³•åŒ–(ä¹Ÿå«å•è¯åŒ–)ã€‚è¯æ³•åŒ–çš„è¿‡ç¨‹ä¼šå¯¹æºä»£ç ä¸­çš„å­—ç¬¦è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœæ˜¯æœ‰çŠ¶æ€çš„è§£æè¿‡ç¨‹ï¼Œè¿˜ä¼šèµ‹äºˆå•è¯è¯­ä¹‰ã€‚ è¯æ³•ä½œç”¨åŸŸ: è¯æ³•ä½œç”¨åŸŸå°±æ˜¯å®šä¹‰åœ¨è¯æ³•é˜¶æ®µçš„ä½œç”¨åŸŸä¹Ÿè¢«ç§°ä¸ºé™æ€ä½œç”¨åŸŸã€‚å³åœ¨JavaScripté‡Œä½œç”¨åŸŸçš„äº§ç”Ÿæ˜¯åœ¨ç¼–è¯‘å™¨å‡ºæ¥çš„ç¬¬ä¸€é˜¶æ®µè¯æ³•é˜¶æ®µäº§ç”Ÿçš„,å¹¶ä¸”æ˜¯ä½ åœ¨ä¹¦å†™å®Œä»£ç æ—¶å°±å·²ç»ç¡®å®šäº†çš„. è¯æ³•ä½œç”¨åŸŸä½ç½®: è¯æ³•ä½œç”¨åŸŸä½ç½®èŒƒå›´å®Œå…¨ç”±å†™ä»£ç æœŸé—´å‡½æ•°æ‰€å£°æ˜çš„ä½ç½®æ¥å†³å®š. ç†è§£è¯æ³•ä½œç”¨åŸŸåŠåµŒå¥—:çœ‹ä¸‹ä¾‹å­:12345678910function foo(a) &#123; var b = a * 2; function bar(c) &#123; console.log( a, b, c ); &#125; bar( b * 3 ); &#125;foo( 2 ); // 2, 4, 12 åœ¨è¿™ä¸ªä¾‹å­ä¸­æœ‰ä¸‰ä¸ªé€çº§åµŒå¥—çš„ä½œç”¨åŸŸã€‚ä¸ºäº†å¸®åŠ©ç†è§£ï¼Œå¯ä»¥å°†å®ƒä»¬åˆ†æˆ3ä¸ªé€çº§åŒ…å«çš„â€æ°”æ³¡ä½œç”¨åŸŸâ€ã€‚ 1:åŒ…å«ç€æ•´ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦:fooã€‚ 2:åŒ…å«ç€ foo æ‰€åˆ›å»ºçš„ä½œç”¨åŸŸï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªæ ‡è¯†ç¬¦:aã€bar å’Œ bã€‚ 3:åŒ…å«ç€ bar æ‰€åˆ›å»ºçš„ä½œç”¨åŸŸï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦:cã€‚ æ³¨æ„: æ²¡æœ‰ä»»ä½•å‡½æ•°çš„æ°”æ³¡å¯ä»¥(éƒ¨åˆ†åœ°)åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªå¤–éƒ¨ä½œç”¨åŸŸçš„æ°”æ³¡ä¸­ï¼Œå°±å¦‚åŒæ²¡æœ‰ä»»ä½•å‡½æ•°å¯ä»¥éƒ¨åˆ†åœ°åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªçˆ¶çº§å‡½æ•°ä¸­ä¸€æ ·ã€‚ å¼•æ“å¯¹ä½œç”¨åŸŸçš„æŸ¥æ‰¾:è¿™ä¸€éƒ¨åˆ†åœ¨ä¸Šä¸€èŠ‚ä¸­å·²ç»è¯´è¿‡,å°±æ˜¯ä»å½“å‰ä½œç”¨åŸŸé€çº§å‘ä¸Š,ç›´åˆ°æœ€ä¸Šå±‚çš„å…¨å±€ä½œç”¨åŸŸ.è¿™é‡Œå†è¿›ä¸€æ­¥è¿›è¡Œè®²è§£.ä½œç”¨åŸŸæŸ¥æ‰¾ä¼šåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦æ—¶åœæ­¢ã€‚åœ¨å¤šå±‚çš„åµŒå¥—ä½œç”¨åŸŸä¸­å¯ä»¥å®šä¹‰åŒåçš„æ ‡è¯†ç¬¦ï¼Œè¿™å«ä½œâ€œé®è”½æ•ˆåº”â€(å†…éƒ¨çš„æ ‡è¯†ç¬¦â€œé®è”½â€äº†å¤–éƒ¨çš„æ ‡è¯†ç¬¦)ã€‚æŠ›å¼€é®è”½æ•ˆåº”ï¼Œ ä½œç”¨åŸŸæŸ¥æ‰¾å§‹ç»ˆä»è¿è¡Œæ—¶æ‰€å¤„çš„æœ€å†…éƒ¨ä½œç”¨åŸŸå¼€å§‹ï¼Œé€çº§å‘å¤–æˆ–è€…è¯´å‘ä¸Šè¿›è¡Œï¼Œç›´åˆ°é‡è§ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦ä¸ºæ­¢ã€‚ æ³¨æ„: å…¨å±€å˜é‡ä¼šè‡ªåŠ¨æˆä¸ºå…¨å±€å¯¹è±¡(æ¯”å¦‚æµè§ˆå™¨ä¸­çš„ windowå¯¹è±¡)çš„å±æ€§ï¼Œå› æ­¤å¯ä»¥ä¸ç›´æ¥é€šè¿‡å…¨å±€å¯¹è±¡çš„è¯æ³•åç§°ï¼Œè€Œæ˜¯é—´æ¥åœ°é€šè¿‡å¯¹å…¨å±€å¯¹è±¡å±æ€§çš„å¼• ç”¨æ¥å¯¹å…¶è¿›è¡Œè®¿é—®ã€‚ä¾‹å¦‚:window.a é€šè¿‡è¿™ç§æŠ€æœ¯å¯ä»¥è®¿é—®é‚£äº›è¢«åŒåå˜é‡æ‰€é®è”½çš„å…¨å±€å˜é‡ã€‚ä½†éå…¨å±€çš„å˜é‡å¦‚æœè¢«é®è”½äº†ï¼Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•è¢«è®¿é—®åˆ°ã€‚ è¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾åªä¼šæŸ¥æ‰¾ä¸€çº§æ ‡è¯†ç¬¦ï¼Œæ¯”å¦‚ aã€b å’Œ cã€‚å¦‚æœä»£ç ä¸­å¼•ç”¨äº† foo.bar.bazï¼Œè¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾åªä¼šè¯•å›¾æŸ¥æ‰¾ foo æ ‡è¯†ç¬¦ï¼Œæ‰¾åˆ°è¿™ä¸ªå˜é‡åï¼Œå¯¹è±¡å±æ€§è®¿é—®è§„åˆ™ä¼šåˆ†åˆ«æ¥ç®¡å¯¹ bar å’Œ baz å±æ€§çš„è®¿é—®ã€‚ 2.2 æ¬ºéª—è¯æ³•æ¬ºéª—è¯æ³•: å¼•æ“åœ¨è¿è¡Œæ—¶æ¥â€œä¿®æ”¹â€(ä¹Ÿå¯ä»¥è¯´æ¬ºéª—)è¯æ³•ä½œç”¨åŸŸ.æˆ–è€…è¯´å°±æ˜¯åœ¨å¼•æ“è¿è¡Œæ—¶åŠ¨æ€åœ°ä¿®æ”¹è¯æ³•ä½œç”¨åŸŸ(æœ¬æ¥åœ¨ç¼–è¯‘è¯æ³•åŒ–å°±å·²ç»ç¡®å®šçš„). æ¬ºéª—è¯æ³•çš„ä¸¤ç§æœºåˆ¶:(ä¸‹é¢è¿™ä¸¤ç§æœºåˆ¶ç†è§£äº†è§£å³å¯,ä¸æ¨èå®é™…å¼€å‘ä½¿ç”¨) 2.2.1 evalJavaScript ä¸­çš„ eval(..) å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶ä¸­çš„å†…å®¹è§†ä¸ºå¥½åƒåœ¨ä¹¦å†™æ—¶å°±å­˜åœ¨äºç¨‹åºä¸­è¿™ä¸ªä½ç½®çš„ä»£ç ã€‚å³å°†evalæ”¾åœ¨è¯¥è¯æ³•ä½œç”¨åŸŸ,ç„¶åevalæºå¸¦çš„ä»£ç å°±ä¼šåŠ¨æ€åŠ å…¥åˆ°è¯¥è¯æ³•ä½œç”¨åŸŸ. é€šè¿‡ä¸‹é¢çš„ä¾‹å­åŠ æ·±ç†è§£:123456function foo(str, a) &#123; eval( str ); // æ¬ºéª—! console.log( a, b );&#125;var b = 2;foo( "var b = 3;", 1 ); // 1, 3 eval(..) è°ƒç”¨ä¸­çš„ â€œvar b = 3;â€ è¿™æ®µä»£ç ä¼šè¢«å½“ä½œæœ¬æ¥å°±åœ¨é‚£é‡Œä¸€æ ·æ¥å¤„ç†ã€‚ç”±äºé‚£æ®µä»£ç å£°æ˜äº†ä¸€ä¸ªæ–°çš„å˜é‡ bï¼Œå› æ­¤å®ƒå¯¹å·²ç»å­˜åœ¨çš„ foo(..) çš„è¯æ³•ä½œç”¨åŸŸè¿›è¡Œäº†ä¿®æ”¹ã€‚å½“ console.log(..) è¢«æ‰§è¡Œæ—¶ï¼Œä¼šåœ¨ foo(..) çš„å†…éƒ¨åŒæ—¶æ‰¾åˆ° a å’Œ bï¼Œä½†æ˜¯æ°¸è¿œä¹Ÿæ— æ³•æ‰¾åˆ°å¤–éƒ¨çš„ bã€‚å› æ­¤ä¼šè¾“å‡ºâ€œ1, 3â€è€Œä¸æ˜¯æ­£å¸¸æƒ…å†µä¸‹ä¼šè¾“å‡ºçš„â€œ1, 2â€ã€‚ æ³¨æ„: eval(..) é€šå¸¸è¢«ç”¨æ¥æ‰§è¡ŒåŠ¨æ€åˆ›å»ºçš„ä»£ç .å¯ä»¥æ®ç¨‹åºé€»è¾‘åŠ¨æ€åœ°å°†å˜é‡å’Œå‡½æ•°ä»¥å­—ç¬¦å½¢å¼æ‹¼æ¥åœ¨ä¸€èµ·ä¹‹åä¼ é€’è¿›å»ã€‚ åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹,eval(â€¦)æ— æ³•ä¿®æ”¹æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚ ä¸eval(â€¦)ç±»ä¼¼,setTimeout(..)å’Œ setInterval(..) çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„å†…å®¹å¯ä»¥è¢«è§£é‡Šä¸ºä¸€æ®µåŠ¨æ€ç”Ÿæˆçš„å‡½æ•°ä»£ç ã€‚ new Function(..) å‡½æ•°çš„è¡Œä¸ºä¹Ÿå¾ˆç±»ä¼¼ï¼Œæœ€åä¸€ä¸ªå‚æ•°å¯ä»¥æ¥å—ä»£ç å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºåŠ¨æ€ç”Ÿæˆçš„å‡½æ•°(å‰é¢çš„å‚æ•°æ˜¯è¿™ä¸ªæ–°ç”Ÿæˆçš„å‡½æ•°çš„å½¢å‚)ã€‚è¿™ç§æ„å»ºå‡½æ•°çš„è¯­æ³•æ¯” eval(..) ç•¥å¾®å®‰å…¨ä¸€äº›ï¼Œä½†ä¹Ÿè¦å°½é‡é¿å…ä½¿ç”¨ã€‚12var sum = new Function("a", "b", "return a + b;");console.log(sum(1, 1111)); //1112 2.2.2 with(ä¸æ¨èå®é™…ä½¿ç”¨)ä¾‹å­:12345678910111213141516171819function foo(obj) &#123; with (obj) &#123; a = 2; &#125;&#125;var o1 = &#123; a: 3&#125;;var o2 = &#123; b: 3&#125;;foo( o1 );console.log( o1.a ); // 2foo( o2 );console.log( o2.a ); // undefinedconsole.log( a ); // 2â€”â€”ä¸å¥½ï¼Œa è¢«æ³„æ¼åˆ°å…¨å±€ä½œç”¨åŸŸä¸Šäº†! èµ·åˆä½ ä¼šè§‰å¾—o1çš„aå±æ€§è¢«withé‡Œçš„aè¿›è¡Œäº†è¯æ³•å¼•ç”¨è¢«é®è”½äº†æˆä¸ºäº†2.è€Œo2æ²¡æœ‰aå±æ€§,æ­¤æ—¶withä¸èƒ½è¿›è¡Œè¯æ³•å¼•ç”¨,æ‰€ä»¥æ­¤æ—¶o2.aå°±ä¼šå˜æˆundefined.ä½†æ˜¯,ä¸ºä»€ä¹ˆæœ€åconsole.log(a)ä¼šä¸º2?å› ä¸ºåœ¨æ‰§è¡Œfoo(o2)æ—¶,withä¼šå¯¹å…¶ä¸­çš„a=2è¿›è¡ŒLHSæŸ¥è¯¢,ä½†å®ƒåœ¨o2ä½œç”¨åŸŸ,foo()ä½œç”¨åŸŸ,å…¨å±€ä½œç”¨åŸŸéƒ½æ²¡æ‰¾åˆ°,å› æ­¤å°±åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡aå¹¶éšåèµ‹å€¼2. æ€»çš„æ¥è¯´,withå°±æ˜¯å°†ä¸€ä¸ªæ²¡æœ‰æˆ–æœ‰å¤šä¸ªå±æ€§çš„å¯¹è±¡å¤„ç†ä¸ºä¸€ä¸ªå®Œå…¨éš”ç¦»çš„è¯æ³•ä½œç”¨åŸŸï¼Œå› æ­¤è¿™ä¸ªå¯¹è±¡çš„å±æ€§ä¹Ÿä¼šè¢«å¤„ç†ä¸ºå®šä¹‰åœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­çš„è¯æ³•æ ‡è¯†ç¬¦ã€‚ æ³¨æ„: ä½¿ç”¨ eval(..) å’Œ with çš„åŸå› æ˜¯ä¼šè¢«ä¸¥æ ¼æ¨¡å¼æ‰€å½±å“(é™åˆ¶)ã€‚with è¢«å®Œå…¨ç¦æ­¢ï¼Œè€Œåœ¨ä¿ç•™æ ¸å¿ƒåŠŸèƒ½çš„å‰æä¸‹ï¼Œé—´æ¥æˆ–éå®‰å…¨åœ°ä½¿ç”¨ eval(..) ä¹Ÿè¢«ç¦æ­¢äº†ã€‚ 2.2.3 æ€§èƒ½JavaScript å¼•æ“ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œæ•°é¡¹çš„æ€§èƒ½ä¼˜åŒ–ã€‚å…¶ä¸­æœ‰äº›ä¼˜åŒ–ä¾èµ–äºèƒ½å¤Ÿæ ¹æ®ä»£ç çš„è¯æ³•è¿›è¡Œé™æ€åˆ†æï¼Œå¹¶é¢„å…ˆç¡®å®šæ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„å®šä¹‰ä½ç½®ï¼Œæ‰èƒ½åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¿«é€Ÿæ‰¾åˆ°æ ‡è¯†ç¬¦ã€‚ä½†æ˜¯eval(..) å’Œ withä¼šåœ¨è¿è¡Œæ—¶ä¿®æ”¹æˆ–åˆ›å»ºæ–°çš„ä½œç”¨åŸŸï¼Œä»¥æ­¤æ¥æ¬ºéª—å…¶ä»–åœ¨ä¹¦å†™æ—¶å®šä¹‰çš„è¯æ³•ä½œç”¨åŸŸã€‚è¿™ä¹ˆåšå°±ä¼šå¯¼è‡´å¼•æ“æ— æ³•çŸ¥é“evalå’Œwithå®ƒä»¬å¯¹è¯æ³•ä½œç”¨åŸŸè¿›è¡Œä»€ä¹ˆæ ·çš„æ”¹åŠ¨.åªèƒ½å¯¹éƒ¨åˆ†ä¸è¿›è¡Œå¤„ç†å’Œä¼˜åŒ–!å› æ­¤å¦‚æœä»£ç ä¸­å¤§é‡ä½¿ç”¨ eval(..) æˆ– withï¼Œé‚£ä¹ˆè¿è¡Œèµ·æ¥ä¸€å®šä¼šå˜å¾—éå¸¸æ…¢!ã€‚ 2.3 å°ç»“ è¯æ³•ä½œç”¨åŸŸæ˜¯åœ¨ä½ ä¹¦å†™ä»£ç æ—¶å°±å·²ç»å†³å®šäº†çš„.åœ¨ç¼–è¯‘çš„ç¬¬ä¸€é˜¶æ®µè¯æ³•åˆ†æé˜¶æ®µäº§ç”Ÿè¯æ³•ä½œç”¨åŸŸ.æ­¤æ—¶è¯æ³•ä½œç”¨åŸŸåŸºæœ¬èƒ½å¤ŸçŸ¥é“å…¨éƒ¨æ ‡è¯†ç¬¦åœ¨å“ªé‡Œä»¥åŠæ˜¯å¦‚ä½•å£°æ˜çš„ï¼Œä»è€Œèƒ½å¤Ÿé¢„æµ‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚ä½•å¯¹å®ƒ ä»¬è¿›è¡ŒæŸ¥æ‰¾ã€‚ eval(..) å’Œ withã€‚å‰è€…å¯ä»¥å¯¹ä¸€æ®µåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå£°æ˜çš„â€œä»£ç â€å­—ç¬¦ä¸²è¿›è¡Œæ¼”ç®—ï¼Œå¹¶å€Ÿæ­¤æ¥ä¿®æ”¹å·²ç»å­˜åœ¨çš„è¯æ³•ä½œç”¨åŸŸ(åœ¨è¿è¡Œæ—¶)ã€‚åè€…æœ¬è´¨ä¸Šæ˜¯é€šè¿‡å°†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨å½“ä½œä½œç”¨åŸŸæ¥å¤„ç†ï¼Œå°†å¯¹è±¡çš„å±æ€§å½“ä½œä½œç”¨åŸŸä¸­çš„æ ‡è¯†ç¬¦æ¥å¤„ç†ï¼Œä»è€Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è¯æ³•ä½œç”¨åŸŸ(åŒæ ·æ˜¯åœ¨è¿è¡Œæ—¶)ã€‚ ä¸€èˆ¬ä¸è¦åœ¨å®é™…ä»£ç ä¸­ä½¿ç”¨eval(â€¦)å’Œwith,å› ä¸ºä¸ä»…å±é™©,è€Œä¸”ä¼šé€ æˆæ€§èƒ½é—®é¢˜! ç¬¬ä¸‰ç«  å‡½æ•°ä½œç”¨åŸŸå’Œå—ä½œç”¨åŸŸ3.1 å‡½æ•°ä¸­çš„ä½œç”¨åŸŸ JavaScript å…·æœ‰åŸºäºå‡½æ•°çš„ä½œç”¨åŸŸï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ¯å£°æ˜ ä¸€ä¸ªå‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸ. å‡½æ•°ä½œç”¨åŸŸçš„å«ä¹‰æ˜¯æŒ‡ï¼Œå±äºè¿™ä¸ªå‡½æ•°çš„å…¨éƒ¨å˜é‡éƒ½å¯ä»¥åœ¨æ•´ä¸ªå‡½æ•°çš„èŒƒå›´å†…ä½¿ç”¨åŠå¤ç”¨(äº‹å®ä¸Šåœ¨åµŒå¥—çš„ä½œç”¨åŸŸä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨)ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯JavaScript å˜é‡å¯ä»¥æ ¹æ®éœ€è¦æ”¹å˜å€¼ç±»å‹ã€‚ 3.2 éšè—å†…éƒ¨å®ç°å› ä¸º å­çº§å‡½æ•°ä½œç”¨åŸŸå¯ä»¥ç›´æ¥è®¿é—®çˆ¶çº§å‡½æ•°ä½œç”¨åŸŸé‡Œçš„æ ‡è¯†ç¬¦; çˆ¶çº§å‡½æ•°ä½œç”¨åŸŸä¸èƒ½ç›´æ¥è®¿é—®å­çº§å‡½æ•°ä½œç”¨åŸŸé‡Œçš„æ ‡è¯†ç¬¦. æ‰€ä»¥ç”¨å‡½æ•°å£°æ˜å¯¹ä»£ç è¿›è¡ŒåŒ…è£…ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠè¿™äº›ä»£ç â€œéšè—â€èµ·æ¥äº†ã€‚ ä¸ºä»€ä¹ˆè¦å°†ä»£ç è¿›è¡Œâ€éšè—â€?å› ä¸ºæœ€å°æˆæƒæˆ–æœ€å°æš´éœ²åŸåˆ™ã€‚è¿™ä¸ªåŸåˆ™æ˜¯æŒ‡åœ¨è½¯ä»¶è®¾è®¡ä¸­ï¼Œåº”è¯¥æœ€å°é™åº¦åœ°æš´éœ²å¿… è¦å†…å®¹ï¼Œè€Œå°†å…¶ä»–å†…å®¹éƒ½â€œéšè—â€èµ·æ¥ï¼Œæ¯”å¦‚æŸä¸ªæ¨¡å—æˆ–å¯¹è±¡çš„ API è®¾è®¡ã€‚éšè—çš„å¥½å¤„: å®ç°ä»£ç ç§æœ‰åŒ–,å‡å°‘å¤–éƒ¨å¯¹å†…éƒ¨ä»£ç çš„å¹²æ‰°,ä¿æŒå…¶ç¨³å®šæ€§. è§„é¿å†²çª: å¯ä»¥é¿å…åŒåæ ‡è¯†ç¬¦ä¹‹é—´çš„å†²çªï¼Œ ä¸¤ä¸ªæ ‡è¯†ç¬¦å¯èƒ½å…·æœ‰ç›¸åŒçš„åå­—ä½†ç”¨é€”å´ä¸ä¸€æ ·ï¼Œæ— æ„é—´å¯èƒ½é€ æˆå‘½åå†²çªã€‚å†²çªä¼šå¯¼è‡´ å˜é‡çš„å€¼è¢«æ„å¤–è¦†ç›–ã€‚é‚£ä¹ˆä¸€èˆ¬è§„é¿å†²çªçš„æ‰‹æ®µæœ‰å“ªäº›? å…¨å±€å‘½åç©ºé—´: å˜é‡å†²çªçš„ä¸€ä¸ªå…¸å‹ä¾‹å­å­˜åœ¨äºå…¨å±€ä½œç”¨åŸŸä¸­ã€‚å½“ç¨‹åºä¸­åŠ è½½äº†å¤šä¸ªç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰å¦¥å–„åœ°å°†å†…éƒ¨ç§æœ‰çš„å‡½æ•°æˆ–å˜é‡éšè—èµ·æ¥ï¼Œå°±ä¼šå¾ˆå®¹æ˜“å¼•å‘å†²çªã€‚è¿™äº›åº“é€šå¸¸ä¼šåœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜ä¸€ä¸ªåå­—è¶³å¤Ÿç‹¬ç‰¹çš„å˜é‡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡è¢«ç”¨ä½œåº“çš„å‘½åç©ºé—´ï¼Œæ‰€æœ‰éœ€è¦æš´éœ²ç»™å¤–ç•Œçš„åŠŸèƒ½éƒ½ä¼šæˆä¸ºè¿™ä¸ªå¯¹è±¡(å‘½åç©ºé—´)çš„å±æ€§ï¼Œè€Œä¸æ˜¯å°†è‡ªå·±çš„æ ‡è¯†ç¬¦æš´æ¼åœ¨é¡¶çº§çš„è¯æ³•ä½œç”¨åŸŸä¸­ã€‚ 2.æ¨¡å—ç®¡ç†: å¦å¤–ä¸€ç§é¿å…å†²çªçš„åŠæ³•å’Œç°ä»£çš„æ¨¡å—æœºåˆ¶å¾ˆæ¥è¿‘ï¼Œå°±æ˜¯ä»ä¼—å¤šæ¨¡å—ç®¡ç†å™¨ä¸­æŒ‘é€‰ä¸€ä¸ªæ¥ ä½¿ç”¨ã€‚å®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„amd,commonjs,importæ¨¡å—æœºåˆ¶. 3.3 å‡½æ•°ä½œç”¨åŸŸå‡½æ•°å£°æ˜ä¸å‡½æ•°è¡¨è¾¾å¼:123function foo() &#123; ...&#125; æˆ‘ä»¬çŸ¥é“å‡½æ•°fooå†…çš„å˜é‡å’Œå‡½æ•°è¢«éšè—èµ·æ¥äº†,æ˜¯ä¸ä¼šå¯¹å…¨å±€ä½œç”¨åŸŸé€ æˆæ±¡æŸ“.ä½†æ˜¯å˜é‡åfooä»ç„¶å­˜åœ¨äºå…¨å±€ä½œç”¨åŸŸä¸­,ä¼šé€ æˆæ±¡æŸ“.é‚£æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½é¿å…å‡½æ•°åçš„æ±¡æŸ“å‘¢?é‚£å°±æ˜¯ä½œä¸ºå‡½æ•°è¡¨è¾¾å¼,è€Œä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å‡½æ•°å£°æ˜.è¿™æ ·å‡½æ•°ååªå­˜åœ¨äºå®ƒè‡ªå·±çš„å‡½æ•°ä½œç”¨åŸŸå†…,è€Œä¸ä¼šå­˜åœ¨äºå…¶çˆ¶ä½œç”¨åŸŸ,è¿™æ ·å°±æ²¡æœ‰äº†æ±¡æŸ“.ä¸¾ä¸ªå‡½æ•°å£°æ˜çš„ä¾‹å­:123456var a = 2;(function foo()&#123; var a = 3; console.log( a ); // 3 &#125;)(); console.log( a ); // 2 å½“æˆ‘ä»¬ç”¨()åŒ…è£¹ä¸€ä¸ªå‡½æ•°,å¹¶ç«‹å³æ‰§è¡Œ.æ­¤æ—¶è¿™ä¸ªåŒ…è£…å‡½æ•°å£°æ˜æ˜¯ä»(functionå¼€å§‹çš„è€Œä¸æ˜¯ä»functionå…³é”®å­—å¼€å§‹.è¿™æ ·fooå°±ä¼šè¢«å½“åšä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼,è€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜(å³fooä¸ä¼šå­˜åœ¨äºçˆ¶çº§ä½œç”¨åŸŸä¸­).å›åˆ°ä¸Šé¢çš„ä¾‹å­ä¸­,å…¨å±€ä½œç”¨åŸŸæ˜¯è®¿é—®ä¸åˆ°fooçš„,fooåªå­˜åœ¨äºå®ƒè‡ªå·±çš„å‡½æ•°ä½œç”¨åŸŸä¸­. è¡¥å……: ä»€ä¹ˆæ˜¯å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼é¦–å…ˆæˆ‘ä»¬å¾—äº†è§£JSå£°æ˜å‡½æ•°çš„ä¸‰ç§æ–¹å¼: å‡½æ•°è¡¨è¾¾å¼(Function Expression): å°†å‡½æ•°å®šä¹‰ä¸ºè¡¨è¾¾å¼è¯­å¥ï¼ˆé€šå¸¸æ˜¯å˜é‡èµ‹å€¼,ä¹Ÿå¯ä»¥æ˜¯è‡ªè°ƒç”¨å½¢å¼ï¼‰çš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡å‡½æ•°è¡¨è¾¾å¼å®šä¹‰çš„å‡½æ•°å¯ä»¥æ˜¯å‘½åçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ¿åçš„ã€‚å› ä¸ºå®ƒå¯ä»¥æ²¡æœ‰å‡½æ•°å,å› æ­¤å¸¸è¢«ç”¨ä½œåŒ¿åå‡½æ•°.å¦‚æœæœ‰,å…¶å‡½æ•°åä¹Ÿåªå­˜åœ¨è‡ªèº«çš„å‡½æ•°ä½œç”¨åŸŸ.å¹¶ä¸”å‡½æ•°è¡¨è¾¾å¼ä¸èƒ½ä»¥â€œfunctionâ€å¼€å¤´.å‡½æ•°è¡¨è¾¾å¼å¯ä»¥å­˜å‚¨åœ¨å˜é‡æˆ–è€…å¯¹è±¡å±æ€§é‡Œ. (åœ¨å‡½æ•°å£°æ˜å‰åŠ ä¸Šè¿ç®—ç¬¦æ˜¯å¯ä»¥å°†å…¶è½¬åŒ–ä¸ºå‡½æ•°è¡¨è¾¾å¼çš„.ä¾‹å¦‚!,+,-,().ä¸¾ä¸ªä¾‹å­:!function(){console.log(1)}()çš„ç»“æœæ˜¯1,å¹¶ä¸ä¼šæŠ¥é”™) å‡½æ•°å£°æ˜(Function Declaration): å‡½æ•°å£°æ˜æ˜¯ä¸€ç§ç‹¬ç«‹çš„ç»“æ„,å®ƒä¼šå£°æ˜ä¸€ä¸ªå…·åå‡½æ•°,å¹¶å¿…é¡»ä»¥functionå¼€å¤´. ä¸”å‡½æ•°å£°æ˜ä¼šè¿›è¡Œå‡½æ•°æå‡.ä½¿å®ƒèƒ½åœ¨å…¶æ‰€åœ¨ä½œç”¨åŸŸçš„ä»»æ„ä½ç½®è¢«è°ƒç”¨,å³åé¢çš„ä»£ç ä¸­å¯ä»¥å°†æ­¤å‡½æ•°é€šè¿‡å‡½æ•°åèµ‹å€¼ç»™å˜é‡æˆ–è€…å¯¹è±¡å±æ€§. Function()æ„é€ å™¨: å³ä½¿ç”¨Functionæ„é€ å™¨åˆ›å»ºå‡½æ•°.ä¸æ¨èè¿™ç§ç”¨æ³•, å®¹æ˜“å‡ºé—®é¢˜123456789101112131415//Function()æ„é€ å™¨var f =new Function()// å‡½æ•°è¡¨è¾¾å¼var f = function() &#123; console.log(1); &#125;// å‡½æ•°å£°æ˜function f ()&#123; console.log(2);&#125;console.log(f())//æ€è€ƒä¸€ä¸‹,è¿™é‡Œä¼šæ‰“å°å‡ºä»€ä¹ˆ æ€ä¹ˆåŒºåˆ†å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼:çœ‹ function å…³é”®å­—å‡ºç°åœ¨å£°æ˜ä¸­çš„ä½ç½®(ä¸ä»…ä»…æ˜¯ä¸€è¡Œä»£ç ï¼Œè€Œæ˜¯æ•´ä¸ªå£°æ˜ä¸­çš„ä½ç½®)ã€‚å¦‚æœ function æ˜¯å£°æ˜ä¸­çš„ç¬¬ä¸€ä¸ªè¯ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ä¸Šä¾‹ä¸­,æ˜¯ä»(å¼€å§‹è€Œä¸æ˜¯function. è¡¥å……: ä¸Šé¢è¿™æ®µæ˜¯åŸä¹¦çš„è§£é‡Š,æˆ‘è§‰å¾—è¿™ä¸ªè§£é‡Šå¹¶ä¸å®Œå…¨,è¿™é‡Œç»™å‡ºæˆ‘è‡ªå·±çš„è§£é‡Š. è¡¨è±¡åŒºåˆ«:å’Œå®ƒè¯´çš„ä¸€æ ·,åªè¦æ˜¯ä»¥functionå¼€å¤´è¿›è¡Œå£°æ˜,å¹¶ä¸”å«æœ‰å‡½æ•°åçš„å°±ä¸€å®šæ˜¯å‡½æ•°å£°æ˜. å†…åœ¨åŒºåˆ«:å…¶å®æˆ‘åœ¨ä¸Šé¢è¡¥å……ä¸¤è€…çš„å®šä¹‰æ—¶å·²ç»è¯´å¾—å¾ˆæ¸…æ¥šäº†,æˆ‘å†å¯¹æ¯”æ€»ç»“ä¸‹. å‡½æ•°æå‡:å‡½æ•°å£°æ˜,ä¼šå°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæå‡.è€Œå‡½æ•°è¡¨è¾¾å¼åˆ™ä¸ä¼šæå‡,å®ƒæ˜¯åœ¨å¼•æ“è¿è¡Œæ—¶è¿›è¡Œèµ‹å€¼ï¼Œä¸”è¦ç­‰åˆ°è¡¨è¾¾å¼èµ‹å€¼å®Œæˆåæ‰èƒ½è°ƒç”¨ã€‚ å‡½æ•°è¡¨è¾¾å¼æ˜¯å¯ä»¥æ²¡æœ‰å‡½æ•°åçš„,å¦‚æœæœ‰,å®ƒçš„å‡½æ•°åä¹Ÿåªå­˜åœ¨äºè‡ªèº«çš„ä½œç”¨åŸŸ,var f = function fun(){console.log(fun)}å…¶ä»–åœ°æ–¹æ˜¯æ²¡æœ‰çš„.è¿™ä¹Ÿé¿å…äº†å…¨å±€æ±¡æŸ“,ä¹Ÿæ–¹ä¾¿é€’å½’. 3.3.1 åŒ¿åå’Œå…·åå‡½æ•°è¡¨è¾¾å¼å¯ä»¥æ˜¯åŒ¿åçš„ï¼Œè€Œå‡½æ•°å£°æ˜åˆ™ä¸å¯ä»¥çœç•¥å‡½æ•°å.æœ‰å‡½æ•°åçš„å°±æ˜¯å…·åå‡½æ•°,æ²¡æœ‰å‡½æ•°åçš„å°±æ˜¯åŒ¿åå‡½æ•°. åŒ¿åå‡½æ•°çš„ç¼ºç‚¹: åŒ¿åå‡½æ•°åœ¨æ ˆè¿½è¸ªä¸­ä¸ä¼šæ˜¾ç¤ºå‡ºæœ‰æ„ä¹‰çš„å‡½æ•°åï¼Œä½¿å¾—è°ƒè¯•å¾ˆå›°éš¾ã€‚ å¦‚æœæ²¡æœ‰å‡½æ•°åï¼Œå½“å‡½æ•°éœ€è¦å¼•ç”¨è‡ªèº«æ—¶åªèƒ½ä½¿ç”¨å·²ç»è¿‡æœŸçš„arguments.calleeå¼•ç”¨ï¼Œæ¯”å¦‚åœ¨é€’å½’ä¸­ã€‚å¦ä¸€ä¸ªå‡½æ•°éœ€è¦å¼•ç”¨è‡ªèº«çš„ä¾‹å­ï¼Œæ˜¯åœ¨äº‹ä»¶è§¦å‘åäº‹ä»¶ç›‘å¬å™¨éœ€è¦è§£ç»‘è‡ªèº«ã€‚ åŒ¿åå‡½æ•°çœç•¥äº†å¯¹äºä»£ç å¯è¯»æ€§/å¯ç†è§£æ€§å¾ˆé‡è¦çš„å‡½æ•°åã€‚ä¸€ä¸ªæè¿°æ€§çš„åç§°å¯ä»¥è®©ä»£ç ä¸è¨€è‡ªæ˜ã€‚ æ‰€ä»¥ç»™å‡½æ•°è¡¨è¾¾å¼æŒ‡å®šä¸€ä¸ªå‡½æ•°åå¯ä»¥æœ‰æ•ˆè§£å†³ä»¥ä¸Šé—®é¢˜ã€‚å§‹ç»ˆç»™å‡½æ•°è¡¨è¾¾å¼å‘½åæ˜¯ä¸€ä¸ªæœ€ä½³å®è·µ. PS: ä¸ªäººæ„è§æ˜¯å¦‚æœå‡½æ•°è¡¨è¾¾å¼æœ‰èµ‹å€¼ç»™å˜é‡æˆ–å±æ€§åæˆ–è€…å°±æ˜¯ä¸€æ¬¡æ€§è°ƒç”¨çš„.å…¶å®æ˜¯æ²¡å¿…è¦åŠ ä¸Šå‡½æ•°å.å› ä¸ºä»£ç é‡Œå–åæœ¬æ¥å°±å¾ˆéš¾,å–ä¸å¥½åè€Œä¼šé€ æˆè¯¯è§£. 3.3.2 ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼æ¯”å¦‚ (function foo(){ .. })()ã€‚ç¬¬ä¸€ä¸ª ( ) å°†å‡½æ•°å˜æˆè¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ª ( ) æ‰§è¡Œäº†è¿™ä¸ªå‡½æ•°ã€‚è¿™å°±æ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼,ä¹Ÿè¢«ç§°ä¸ºIIFEï¼Œä»£è¡¨ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ (Immediately Invoked Function Expression); IIFEå¯ä»¥å…·åä¹Ÿå¯ä»¥åŒ¿å.å¥½å¤„å’Œä¸Šé¢æåˆ°çš„ä¸€æ ·.IIFEè¿˜å¯ä»¥æ˜¯è¿™ç§å½¢å¼(function(){ .. }()).è¿™ä¸¤ç§å½¢å¼åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€è‡´çš„ã€‚ 3.4 å—ä½œç”¨åŸŸå‡½æ•°ä½œç”¨åŸŸæ˜¯JavaScriptæœ€å¸¸è§çš„ä½œç”¨åŸŸå•å…ƒ,æœ‰æ—¶æˆ‘ä»¬ä»…ä¼šå°†varèµ‹å€¼å˜é‡åœ¨ifæˆ–forçš„{â€¦}å†…ä½¿ç”¨,è€Œä¸ä¼šåœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨.ä½†å®ƒä»ç„¶ä¼šå¯¹å¤–å±‚çš„å‡½æ•°ä½œç”¨åŸŸé€ æˆæ±¡æŸ“.è¿™ä¸ªæ—¶å€™å°±ä¼šå¸Œæœ›èƒ½æœ‰ä¸€ä¸ªä½œç”¨åŸŸèƒ½å°†å…¶å¤–éƒ¨çš„å‡½æ•°ä½œç”¨åŸŸéš”å¼€,å£°æ˜çš„å˜é‡ä»…åœ¨æ­¤ä½œç”¨åŸŸæœ‰æ•ˆ.å—ä½œç”¨åŸŸ(é€šå¸¸å°±æ˜¯{â€¦}åŒ…è£¹çš„å†…éƒ¨)å°±å¯ä»¥å¸®æˆ‘ä»¬åšåˆ°è¿™ç‚¹. ä» ES3 å‘å¸ƒä»¥æ¥ï¼ŒJavaScript ä¸­å°±æœ‰äº†å—ä½œç”¨åŸŸï¼Œè€Œ with å’Œ catch åˆ†å¥å°±æ˜¯å—ä½œç”¨åŸŸçš„ä¸¤ä¸ªå°ä¾‹å­ã€‚ 3.4.1 withæˆ‘ä»¬åœ¨ç¬¬ 2 ç« è®¨è®ºè¿‡ with å…³é”®å­—ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªéš¾äºç†è§£çš„ç»“æ„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å—ä½œç”¨åŸŸçš„ä¸€ä¸ªä¾‹å­(å—ä½œç”¨åŸŸçš„ä¸€ç§å½¢å¼)ï¼Œç”¨ with ä»å¯¹è±¡ä¸­åˆ›å»ºå‡ºçš„ä½œç”¨åŸŸä»…åœ¨ with å£°æ˜ä¸­è€Œéå¤–éƒ¨ä½œç”¨åŸŸä¸­æœ‰æ•ˆã€‚ 3.4.2 try/catchtry/catch çš„ catch åˆ†å¥ä¼šåˆ›å»ºä¸€ä¸ªå—ä½œç”¨åŸŸï¼Œå…¶ä¸­å£°æ˜çš„å˜é‡ä»…åœ¨ catch å†…éƒ¨æœ‰æ•ˆã€‚1234567try &#123; undefined(); // æ‰§è¡Œä¸€ä¸ªéæ³•æ“ä½œæ¥å¼ºåˆ¶åˆ¶é€ ä¸€ä¸ªå¼‚å¸¸&#125;catch (err) &#123; console.log( err ); // èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œ! &#125;console.log( err ); // ReferenceError: err not found err ä»…å­˜åœ¨ catch åˆ†å¥å†…éƒ¨ï¼Œå½“è¯•å›¾ä»åˆ«å¤„å¼•ç”¨å®ƒæ—¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³ç”¨catchåˆ›å»ºä¸€ä¸ªä¸æ˜¯ä»…ä»…æ¥æ”¶errçš„å—ä½œç”¨åŸŸ,è¯¥æ€ä¹ˆåšå‘¢?1234try&#123;throw 2;&#125;catch(a)&#123; console.log( a ); // 2&#125;console.log( a ); // ReferenceError è¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªå—ä½œç”¨åŸŸ,ä¸”a=2,ä»…åœ¨catchåˆ†å¥ä¸­å­˜åœ¨.åœ¨ES6ä¹‹å‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥ä½¿ç”¨å—ä½œç”¨åŸŸ. 3.4.3 letES6 å¼•å…¥äº†æ–°çš„ let å…³é”®å­—ï¼Œæä¾›äº†é™¤ var ä»¥å¤–çš„å¦ä¸€ç§å˜é‡å£°æ˜æ–¹å¼ã€‚let å…³é”®å­—å¯ä»¥å°†å˜é‡ç»‘å®šåˆ°æ‰€åœ¨çš„ä»»æ„ä½œç”¨åŸŸä¸­(é€šå¸¸æ˜¯ { .. } å†…éƒ¨)ã€‚ ç”¨ let å°†å˜é‡é™„åŠ åœ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å—ä½œç”¨åŸŸä¸Šçš„è¡Œä¸ºæ˜¯éšå¼çš„ã€‚ä¾‹å¦‚åœ¨ifçš„{â€¦}å†…ç”¨letå£°æ˜ä¸€ä¸ªå˜é‡.é‚£ä»€ä¹ˆæ˜¯æ˜¾å¼åœ°åˆ›å»ºå—ä½œç”¨åŸŸå‘¢?å°±æ˜¯å•ç‹¬åˆ›å»º{}æ¥ä½œä¸ºletçš„å—ä½œç”¨åŸŸ.è€Œä¸æ˜¯å€Ÿç”¨ifæˆ–è€…foræä¾›çš„{}.ä¾‹å¦‚{let a=2;console.log(a)}æ³¨æ„: ä½¿ç”¨ let è¿›è¡Œçš„å£°æ˜ä¸ä¼šåœ¨å—ä½œç”¨åŸŸä¸­è¿›è¡Œæå‡.å—ä½œç”¨åŸŸçš„å¥½å¤„: 1,åƒåœ¾æ”¶é›†12345678910111213function process(data)&#123; // åœ¨è¿™é‡Œåšç‚¹æœ‰è¶£çš„äº‹æƒ… &#125; var someReallyBigData=function()&#123; //dosomeing &#125; process(someReallyBigData); var btn=document.getElementById("my_button"); btn.addEventListener("click",function click(evt)&#123; alert("button click"); //å‡å¦‚æˆ‘ä»¬åœ¨è¿™é‡Œç»§ç»­è°ƒç”¨someReallyBigDataå°±ä¼šå½¢æˆé—­åŒ…,å¯¼è‡´ä¸èƒ½åƒåœ¾å›æ”¶(è¿™æ®µæ˜¯ä¹¦é‡Œæ²¡æœ‰,æˆ‘åŠ ä¸Šæ–¹ä¾¿ç†è§£çš„) &#125;,false); click å‡½æ•°çš„ç‚¹å‡»å›è°ƒå¹¶ä¸éœ€è¦ someReallyBigData å˜é‡ã€‚ç†è®ºä¸Šè¿™æ„å‘³ç€å½“ process(..) æ‰§è¡Œåï¼Œåœ¨å†…å­˜ä¸­å ç”¨å¤§é‡ç©ºé—´çš„æ•°æ®ç»“æ„å°±å¯ä»¥è¢«åƒåœ¾å›æ”¶äº†ã€‚ä½†æ˜¯ï¼Œç”±äº click å‡½æ•°å½¢æˆäº†ä¸€ä¸ªè¦†ç›–æ•´ä¸ªä½œç”¨åŸŸçš„é—­åŒ…ï¼ŒJavaScript å¼•æ“ææœ‰å¯èƒ½ä¾ç„¶ä¿å­˜ç€è¿™ä¸ªç»“æ„(å–å†³äºå…·ä½“å®ç°)ã€‚ä½†æ˜¾å¼ä½¿ç”¨å—ä½œç”¨åŸŸå¯ä»¥è®©å¼•æ“æ¸…æ¥šåœ°çŸ¥é“æ²¡æœ‰å¿…è¦ç»§ç»­ä¿å­˜ someReallyBigData äº†: 123456789101112function process(data)&#123; // åœ¨è¿™é‡Œåšç‚¹æœ‰è¶£çš„äº‹æƒ… &#125; // åœ¨è¿™ä¸ªå—ä¸­å®šä¹‰çš„å†…å®¹å¯ä»¥é”€æ¯äº†! &#123; let someReallyBigData = &#123; .. &#125;; process( someReallyBigData ); &#125; var btn=document.getElementById("my_button"); btn.addEventListener("click",function click(evt)&#123; alert("button click"); &#125;,false); letå¾ªç¯1234for (let i=0; i&lt;10; i++) &#123; console.log( i ); &#125;console.log( i ); // ReferenceError for å¾ªç¯å¤´éƒ¨çš„ let ä¸ä»…å°† i ç»‘å®šåˆ°äº† for å¾ªç¯çš„å—ä¸­ï¼Œäº‹å®ä¸Šå®ƒå°†å…¶é‡æ–°ç»‘å®šåˆ°äº†å¾ªç¯çš„æ¯ä¸€ä¸ªè¿­ä»£ä¸­ï¼Œç¡®ä¿ä½¿ç”¨ä¸Šä¸€ä¸ªå¾ªç¯è¿­ä»£ç»“æŸæ—¶çš„å€¼é‡æ–°è¿›è¡Œèµ‹å€¼ã€‚è¿™æ ·å°±é¿å…äº†iå¯¹å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸçš„æ±¡æŸ“. 3.4.4 consté™¤äº† let ä»¥å¤–ï¼ŒES6 è¿˜å¼•å…¥äº† constï¼ŒåŒæ ·å¯ä»¥ç”¨æ¥åˆ›å»ºå—ä½œç”¨åŸŸå˜é‡ï¼Œä½†å…¶å€¼æ˜¯å›ºå®šçš„(å¸¸é‡)ã€‚ä¹‹åä»»ä½•è¯•å›¾ä¿®æ”¹å€¼çš„æ“ä½œéƒ½ä¼šå¼•èµ·é”™è¯¯ã€‚123456789var foo = true;if (foo) &#123; var a = 2; const b = 3; // åŒ…å«åœ¨ if ä¸­çš„å—ä½œç”¨åŸŸå¸¸é‡ a = 3; // æ­£å¸¸! b = 4; // é”™è¯¯! &#125;console.log( a ); // 3console.log( b ); // ReferenceError! 3.5 å°ç»“å‡½æ•°æ˜¯ JavaScript ä¸­æœ€å¸¸è§çš„ä½œç”¨åŸŸå•å…ƒã€‚æœ¬è´¨ä¸Šï¼Œå£°æ˜åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å˜é‡æˆ–å‡½æ•°ä¼šåœ¨æ‰€å¤„çš„ä½œç”¨åŸŸä¸­â€œéšè—â€èµ·æ¥ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ä¸å¤–éƒ¨ä½œç”¨åŸŸéš”å¼€. ä½†å‡½æ•°ä¸æ˜¯å”¯ä¸€çš„ä½œç”¨åŸŸå•å…ƒã€‚å—ä½œç”¨åŸŸæŒ‡çš„æ˜¯å˜é‡å’Œå‡½æ•°ä¸ä»…å¯ä»¥å±äºæ‰€å¤„çš„ä½œç”¨åŸŸï¼Œä¹Ÿå¯ä»¥å±äºæŸä¸ªä»£ç å—(é€šå¸¸æŒ‡ { .. } å†…éƒ¨)å³å—ä½œç”¨åŸŸã€‚ES6ä¸­å°±æä¾›äº†letå’Œconstæ¥å¸®åŠ©åˆ›å»ºå—ä½œç”¨åŸŸ. ç¬¬å››ç«  æå‡4.1 å…ˆæœ‰é¸¡(èµ‹å€¼)è¿˜æ˜¯å…ˆæœ‰è›‹(å£°æ˜)è€ƒè™‘ç¬¬ä¸€æ®µä»£ç 123a = 2;var a; console.log( a ); è¾“å‡ºç»“æœæ˜¯2,è€Œä¸æ˜¯undefined è€ƒè™‘ç¬¬äºŒæ®µä»£ç 12console.log( a ); var a = 2; è¾“å‡ºç»“æœæ˜¯undefined,è€Œä¸æ˜¯ReferenceErrorè€ƒè™‘å®Œä»¥ä¸Šä»£ç ,ä½ åº”è¯¥ä¼šè€ƒè™‘è¿™ä¸ªé—®é¢˜.åˆ°åº•æ˜¯å£°æ˜(è›‹)åœ¨å‰ï¼Œè¿˜æ˜¯èµ‹å€¼(é¸¡)åœ¨å‰? 4.2 ç¼–è¯‘å™¨å†åº¦æ¥è¢­ç¼–è¯‘å™¨çš„å†…å®¹,å›å¿†ä¸€ä¸‹ï¼Œå¼•æ“ä¼šåœ¨è§£é‡Š JavaScript ä»£ç ä¹‹å‰é¦–å…ˆå¯¹å…¶è¿›è¡Œç¼–è¯‘ã€‚ç¼–è¯‘é˜¶æ®µä¸­çš„ä¸€éƒ¨åˆ†å·¥ä½œå°±æ˜¯æ‰¾åˆ°æ‰€æœ‰çš„å£°æ˜ï¼Œå¹¶ç”¨åˆé€‚çš„ä½œç”¨åŸŸå°†å®ƒä»¬å…³è”èµ·æ¥ã€‚ ä¹‹åå¼•æ“ä¼šè¯¢é—®ä½œç”¨åŸŸ,å¯¹å£°æ˜è¿›è¡Œèµ‹å€¼æ“ä½œ. é‚£ä¹ˆ,åœ¨ç¼–è¯‘é˜¶æ®µæ‰¾åˆ°æ‰€æœ‰çš„å£°æ˜å,ç¼–è¯‘å™¨åˆåšäº†ä»€ä¹ˆ?ç­”æ¡ˆå°±æ˜¯æå‡ä»¥ä¸ŠèŠ‚çš„ç¬¬ä¸€æ®µä»£ç ä¸ºä¾‹,å½“ä½ çœ‹åˆ° var a = 2; æ—¶ï¼Œå¯èƒ½ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå£°æ˜ã€‚ä½† JavaScript å®é™…ä¸Šä¼šå°†å…¶çœ‹æˆä¸¤ä¸ªå£°æ˜:var a;å’Œa = 2;ã€‚ ç¬¬ä¸€ä¸ªå®šä¹‰å£°æ˜æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œçš„ã€‚ç¬¬äºŒä¸ªèµ‹å€¼å£°æ˜ä¼šè¢«ç•™åœ¨åŸåœ°ç­‰å¾…æ‰§è¡Œé˜¶æ®µã€‚åœ¨ç¬¬ä¸€ä¸ªå£°æ˜åœ¨ç¼–è¯‘é˜¶æ®µæ—¶,ç¼–è¯‘å™¨ä¼šå¯¹var a;å£°æ˜è¿›è¡Œæå‡(å³æŠŠvar a;ç½®äºæ‰€åœ¨ä½œç”¨åŸŸçš„æœ€ä¸Šé¢).è€Œa = 2;åˆ™ä¼šä¿æŒæ‰€åœ¨ä½ç½®ä¸åŠ¨.æ­¤æ—¶ä»£ç ä¼šå˜æˆ123var a; a = 2;console.log( a ); ç”±æ­¤å¯çŸ¥,åœ¨ç¼–è¯‘é˜¶æ®µ,ç¼–è¯‘å™¨ä¼šå¯¹å£°æ˜è¿›è¡Œæå‡.å³å…ˆæœ‰è›‹(å£°æ˜)åæœ‰é¸¡(èµ‹å€¼)ã€‚å“ªäº›å£°æ˜ä¼šè¢«è¿›è¡Œæå‡? å˜é‡å£°æ˜:ä¾‹å¦‚ä¸Šä¾‹ä¸­çš„var a;.ä¸åŒ…æ‹¬åé¢çš„a = 2;å³ä¸åŒ…å«æœ‰èµ‹å€¼æ“ä½œçš„å£°æ˜. å‡½æ•°å£°æ˜:æ³¨æ„æ˜¯å‡½æ•°å£°æ˜,è€Œä¸æ˜¯å‡½æ•°è¡¨è¾¾å¼!(ä¸æ¸…æ¥šå¯ä»¥çœ‹å‰é¢çš„3.3èŠ‚,æˆ‘æœ‰è¯¦ç»†è¯´æ˜).å‡½æ•°å£°æ˜æå‡,æ˜¯å°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæå‡,è€Œä¸æ˜¯ä»…ä»…å‡½æ•°åçš„æå‡. 4.3 å‡½æ•°ä¼˜å…ˆå‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜éƒ½ä¼šè¢«æå‡ã€‚ä½†æ˜¯ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç»†èŠ‚(è¿™ä¸ªç»†èŠ‚å¯ä»¥å‡ºç°åœ¨æœ‰å¤šä¸ªâ€œé‡å¤â€å£°æ˜çš„ä»£ç ä¸­)æ˜¯å‡½æ•°ä¼šé¦–å…ˆè¢«æå‡ï¼Œç„¶åæ‰æ˜¯å˜é‡ã€‚è€ƒè™‘ä»¥ä¸‹ä»£ç :12345678foo(); // 1var foo;function foo() &#123; console.log( 1 );&#125;foo = function() &#123; console.log( 2 );&#125;; ä¼šè¾“å‡º 1 è€Œä¸æ˜¯ 2 !è¿™ä¸ªä»£ç ç‰‡æ®µä¼šè¢«å¼•æ“ç†è§£ä¸ºå¦‚ä¸‹å½¢å¼:1234567function foo() &#123; console.log( 1 );&#125;foo(); // 1foo = function() &#123; console.log( 2 );&#125;; æ³¨æ„ï¼Œvar foo å°½ç®¡å‡ºç°åœ¨ function foo()â€¦ çš„å£°æ˜ä¹‹å‰ï¼Œä½†å®ƒæ˜¯é‡å¤çš„å£°æ˜(å› æ­¤è¢«å¿½ç•¥äº†)ï¼Œå› ä¸ºå‡½æ•°å£°æ˜ä¼šè¢«æå‡åˆ°æ™®é€šå˜é‡ä¹‹å‰ã€‚æ³¨æ„: jsä¼šå¿½ç•¥å‰é¢å·²ç»å£°æ˜çš„å£°æ˜(ä¸ç®¡æ˜¯å˜é‡å£°æ˜è¿˜æ˜¯å‡½æ•°å£°æ˜,åªè¦å…¶åç§°ç›¸åŒ,åˆ™åç»­ä¸ä¼šå†è¿›è¡Œé‡å¤å£°æ˜).ä½†æ˜¯å¯¹è¯¥å˜é‡æ–°çš„èµ‹å€¼,ä¼šè¦†ç›–ä¹‹å‰çš„å€¼.ä¸€å¥è¯æ¦‚æ‹¬:å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜äºå˜é‡å£°æ˜,ä¼šæ’åœ¨å®ƒå‰é¢. 4.4 å°ç»“ å¯¹äºvar a = 2 JavaScriptå¼•æ“ä¼šå°†var aå’Œ a = 2å½“ä½œä¸¤ä¸ªå•ç‹¬çš„å£°æ˜ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç¼–è¯‘é˜¶æ®µçš„ä»»åŠ¡ï¼Œè€Œç¬¬äºŒä¸ªåˆ™æ˜¯æ‰§è¡Œé˜¶æ®µçš„ä»»åŠ¡ã€‚ è®ºä½œç”¨åŸŸä¸­çš„å£°æ˜å‡ºç°åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œéƒ½å°†åœ¨ä»£ç æœ¬èº«è¢«æ‰§è¡Œå‰é¦–å…ˆè¿›è¡Œå¤„ç†ã€‚ å¯ä»¥å°†è¿™ä¸ªè¿‡ç¨‹å½¢è±¡åœ°æƒ³è±¡æˆæ‰€æœ‰çš„å£°æ˜(å˜é‡å’Œå‡½æ•°)éƒ½ä¼šè¢«â€œç§»åŠ¨â€åˆ°å„è‡ªä½œç”¨åŸŸçš„æœ€é¡¶ç«¯ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºæå‡ã€‚ å£°æ˜æœ¬èº«ä¼šè¢«æå‡ï¼Œè€ŒåŒ…æ‹¬å‡½æ•°è¡¨è¾¾å¼çš„èµ‹å€¼åœ¨å†…çš„èµ‹å€¼æ“ä½œå¹¶ä¸ä¼šæå‡(å³èµ‹å€¼æ“ä½œéƒ½ä¸ä¼šæå‡)ã€‚ æ³¨æ„:ï¼Œå½“æ™®é€šçš„ var å£°æ˜å’Œå‡½æ•°å£°æ˜æ··åˆåœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œå¹¶ä¸”å£°æ˜ç›¸åŒæ—¶(varçš„å˜é‡åå’Œå‡½æ•°åç›¸åŒæ—¶,ä¼šå¼•å‘jså¯¹é‡å¤å£°æ˜çš„å¿½ç•¥)!ä¸€å®šè¦æ³¨æ„é¿å…é‡å¤å£°æ˜! ç¬¬äº”ç«  ä½œç”¨åŸŸé—­åŒ…5.1 å¯ç¤º JavaScriptä¸­é—­åŒ…æ— å¤„ä¸åœ¨ï¼Œä½ åªéœ€è¦èƒ½å¤Ÿè¯†åˆ«å¹¶æ‹¥æŠ±å®ƒã€‚ é—­åŒ…æ˜¯åŸºäºè¯æ³•ä½œç”¨åŸŸä¹¦å†™ä»£ç æ—¶æ‰€äº§ç”Ÿçš„è‡ªç„¶ç»“æœï¼Œä½ ç”šè‡³ä¸éœ€è¦ä¸ºäº†åˆ©ç”¨å®ƒä»¬è€Œæœ‰æ„è¯†åœ°åˆ›å»ºé—­åŒ…ã€‚ 5.2 å®è´¨é—®é¢˜ &amp;&amp; 5.3 ç°åœ¨æˆ‘æ‡‚äº†å› ä¸ºè¿™ä¸¤å°èŠ‚ç†è§£é€äº†å…¶å®å‘ç°ä¹¦é‡Œä¹Ÿæ²¡è®²ä»€ä¹ˆ,è¿™é‡Œå°±è¿›è¡Œåˆå¹¶,å¹¶è¡¥å……æ‹“å±•æˆ‘è‡ªå·±çš„ç†è§£å’Œæ€»ç»“.ä»€ä¹ˆæ˜¯é—­åŒ…?(å¹¿ä¹‰ç‰ˆ)ä¹¦ä¸­è§£é‡Š: å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œã€‚MDNçš„è§£é‡Š: é—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆã€‚æˆ‘çš„è§£é‡Š(è¯¦ç»†ç‰ˆ): å¿…é¡»åŒ…å«ä¸¤ç‚¹: 1,æœ‰å‡½æ•°.ç”±äºå‡½æ•°è‡ªèº«çš„ç‰¹æ€§,å®ƒèƒ½è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸ.å¹¶èƒ½ä¿å­˜å¤–éƒ¨è¯æ³•ä½œç”¨åŸŸçš„å˜é‡å’Œå‡½æ•°åˆ°è‡ªå·±çš„å‡½æ•°ä½œç”¨åŸŸ. 2,æœ‰è¯¥å‡½æ•°æ‰€åœ¨çš„è¯æ³•ç¯å¢ƒ.å…¶å®åœ¨JavaScriptä¸­ä»»ä½•å‡½æ•°éƒ½ä¼šå¤„åœ¨ä¸€ä¸ªè¯æ³•ç¯å¢ƒä¸­.ä¸ç®¡æ˜¯å…¨å±€ä½œç”¨åŸŸè¿˜æ˜¯å‡½æ•°ä½œç”¨åŸŸ. ç»¼ä¸Šç®€å•ç‰ˆå°±æ˜¯:MDNçš„è§£é‡Šé—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆã€‚è¿˜å¯ä»¥ç»§ç»­å»¶ä¼¸æˆæç®€ç‰ˆ:JavaScriptä¸­çš„å‡½æ•°å°±ä¼šå½¢æˆé—­åŒ…ã€‚Tips: æ³¨æ„åˆ°ä¸Šé¢å¯¹è¯æ³•ä½œç”¨åŸŸå’Œè¯æ³•ç¯å¢ƒä¸¤è¯çš„åˆ†å¼€ä½¿ç”¨äº†å—?1,é‡Œæ­¤æ—¶å‡½æ•°è¿˜æ²¡è¢«æ‰§è¡Œ,æ‰€ä»¥ä½¿ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸå³é™æ€ä½œç”¨åŸŸ.2,é‡Œ,æ­¤æ—¶å‡½æ•°è¢«æ‰§è¡Œ,æ­¤æ—¶è¯æ³•ä½œç”¨åŸŸå°±ä¼šå˜æˆè¯æ³•ç¯å¢ƒ(åŒ…å«é™æ€ä½œç”¨åŸŸä¸åŠ¨æ€ä½œç”¨åŸŸ).æ‰€ä»¥å…¶å®MDNçš„è§£é‡Šå…¶å®æ›´å‡†ç¡®ä¸€ç‚¹, æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨æ—¶æ‰€è¯´çš„é—­åŒ…(ç‹­ä¹‰ç‰ˆ,ä¸¥æ ¼æ„ä¹‰ä¸Šçš„):ä¸ºäº†ä¾¿äºå¯¹é—­åŒ…ä½œç”¨åŸŸçš„è§‚å¯Ÿå’Œä½¿ç”¨.æˆ‘ä»¬å®é™…ä½¿ç”¨æ—¶ä¼šå°†é—­åŒ…çš„å‡½æ•°ä½œç”¨åŸŸæš´éœ²ç»™å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–.ä¹Ÿå°±æ˜¯æœ¬ä¹¦ä¸€ç›´å¼ºè°ƒçš„é—­åŒ…å‡½æ•°éœ€è¦åœ¨å®ƒæœ¬èº«çš„è¯æ³•ä½œç”¨åŸŸä»¥å¤–æ‰§è¡Œ.ä½œè€…è®¤ä¸ºç¬¦åˆè¿™ä¸ªæ¡ä»¶æ‰ç§°å¾—ä¸Šæ˜¯çœŸæ­£çš„é—­åŒ…(ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨å¸¸è¯´çš„â€™ä½¿ç”¨é—­åŒ…â€™,å¹¶ä¸”ä½¿ç”¨ä»»ä½•å›è°ƒå‡½æ•°å…¶å®ä¹Ÿæ˜¯é—­åŒ…).æ‰€ä»¥ç‹­ä¹‰ç‰ˆå°±æ˜¯:é—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆ,å¹¶ä¸”å°†é—­åŒ…çš„å‡½æ•°ä½œç”¨åŸŸæš´éœ²ç»™å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–. é—­åŒ…æš´éœ²å‡½æ•°ä½œç”¨åŸŸçš„ä¸‰ç§æ–¹å¼:ä¸‹é¢éƒ¨åˆ†æ˜¯ä¹¦ä¸­æ²¡æœ‰çš„,æ˜¯è‡ªå·±å®é™…ä½¿ç”¨æ—¶çš„æ€»ç»“,å¹¶ä¸”ç¬¦åˆè¿™ä¸‰ç§å½¢å¼ä¹‹ä¸€çš„å°±æ˜¯æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨æ—¶æ‰€è¯´çš„é—­åŒ…(ç‹­ä¹‰ç‰ˆ) 1,é€šè¿‡å¤–éƒ¨å‡½æ•°çš„å‚æ•°è¿›è¡Œæš´éœ². 1234567891011function foo() &#123; var a = 2; function bar() &#123; baz(a) //é€šè¿‡å¤–éƒ¨å‡½æ•°çš„å‚æ•°è¿›è¡Œæš´éœ² &#125; bar(); &#125;;function baz(val) &#123; console.log( val ); // 2 &#125;foo(); 2,é€šè¿‡å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡è¿›è¡Œæš´éœ² 12345678910var val;function foo() &#123; var a = 2; function bar() &#123; val=a //é€šè¿‡å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡è¿›è¡Œæš´éœ² &#125; bar(); &#125;;foo();console.log(val) //2 3,é€šè¿‡returnç›´æ¥å°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæš´éœ² 123456789function foo() &#123; var a = 2; function bar() &#123; console.log(a) &#125; return bar //é€šè¿‡returnç›´æ¥å°†æ•´ä¸ªå‡½æ•°è¿›è¡Œæš´éœ²&#125;;var val=foo();val() //2 å…³äºé—­åŒ…çš„å†…å­˜æ³„éœ²é—®é¢˜:é¦–å…ˆå¿…é¡»å£°æ˜ä¸€ç‚¹:ä½¿ç”¨é—­åŒ…å¹¶ä¸ä¸€å®šä¼šé€ æˆå†…å­˜æ³„éœ²,åªæœ‰ä½¿ç”¨é—­åŒ…ä¸å½“æ‰å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„éœ².(åæ§½:é¢è¯•å¾ˆå¤šæ–°äººæ—¶,å¼ å£å°±è¯´é—­åŒ…ä¼šé€ æˆå†…å­˜æ³„éœ²)ä¸ºä»€ä¹ˆé—­åŒ…å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„éœ²å‘¢?åŸå› å°±æ˜¯ä¸Šé¢æåˆ°çš„,å› ä¸ºå®ƒä¸€èˆ¬ä¼šæš´éœ²è‡ªèº«çš„ä½œç”¨åŸŸç»™å¤–éƒ¨ä½¿ç”¨.å¦‚æœä½¿ç”¨ä¸å½“,å°±å¯èƒ½å¯¼è‡´è¯¥å†…å­˜ä¸€ç›´è¢«å ç”¨,æ— æ³•è¢«JSçš„åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶.å°±é€ æˆäº†å†…å­˜æ³„éœ².æ³¨æ„: å³ä½¿é—­åŒ…é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰,é—­åŒ…ä»ç„¶ä¼šéšå¼åœ°å¼•ç”¨å®ƒæ‰€åœ¨ä½œç”¨åŸŸé‡Œçš„æ‰€ç”¨å˜é‡. æ­£å› ä¸ºè¿™ä¸ªéšè—çš„ç‰¹ç‚¹,é—­åŒ…ç»å¸¸ä¼šå‘ç”Ÿä¸æ˜“å‘ç°çš„å†…å­˜æ³„æ¼é—®é¢˜.å¸¸è§å“ªäº›æƒ…å†µä½¿ç”¨é—­åŒ…ä¼šé€ æˆå†…å­˜æ³„éœ²: 1,ä½¿ç”¨å®šæ—¶å™¨æœªåŠæ—¶æ¸…é™¤.å› ä¸ºè®¡æ—¶å™¨åªæœ‰å…ˆåœæ­¢æ‰ä¼šè¢«å›æ”¶.æ‰€ä»¥å†³åŠæ³•å¾ˆç®€å•,å°†å®šæ—¶å™¨åŠæ—¶æ¸…é™¤,å¹¶å°†é€ æˆå†…å­˜çš„å˜é‡èµ‹å€¼ä¸ºnull(å˜æˆç©ºæŒ‡é’ˆ) 2,ç›¸äº’å¾ªç¯å¼•ç”¨.è¿™æ˜¯ç»å¸¸å®¹æ˜“çŠ¯çš„é”™è¯¯,å¹¶ä¸”ä¹Ÿä¸å®¹æ˜“å‘ç°.ä¸¾ä¸ªæ —å­:12345678function foo() &#123; var a = &#123;&#125;; function bar() &#123; console.log(a); &#125;; a.fn = bar; return bar; &#125;; è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªa çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è¢«å†…éƒ¨å‡½æ•°barå¼•ç”¨ã€‚ç„¶åï¼Œaåˆ›å»ºäº†ä¸€ä¸ªå±æ€§fnæŒ‡å‘äº†barï¼Œæœ€åè¿”å›äº†innerFn()ã€‚è¿™æ ·å°±å½¢æˆäº†barå’Œaçš„ç›¸äº’å¾ªç¯å¼•ç”¨.å¯èƒ½æœ‰äººè¯´baré‡Œä¸ä½¿ç”¨console.log(a)ä¸å°±æ²¡æœ‰å¼•ç”¨äº†å—å°±ä¸ä¼šé€ æˆå†…å­˜æ³„éœ²äº†.NONONO,barä½œä¸ºä¸€ä¸ªé—­åŒ…,å³ä½¿å®ƒå†…éƒ¨ä»€ä¹ˆéƒ½æ²¡æœ‰,fooä¸­çš„æ‰€æœ‰å˜é‡éƒ½è¿˜æ˜¯éšä½¿åœ°è¢« baræ‰€å¼•ç”¨ã€‚è¿™ä¸ªçŸ¥è¯†ç‚¹æ˜¯æˆ‘å‰é¢å¿˜è®°æåˆ°çš„,ä¹Ÿæ˜¯ä¹¦ä¸­æ²¡æœ‰æåˆ°çš„.ç®—äº†æˆ‘ç°åœ¨åŠ åˆ°å‰é¢å»å§.æ‰€ä»¥å³ä½¿barå†…ä»€ä¹ˆéƒ½æ²¡æœ‰è¿˜æ˜¯é€ æˆäº†å¾ªç¯å¼•ç”¨,é‚£çœŸæ­£çš„è§£å†³åŠæ³•å°±æ˜¯,ä¸è¦å°†a.fn = bar. 3,å°†é—­åŒ…å¼•ç”¨åˆ°å…¨å±€å˜é‡ä¸Š.å› ä¸ºå…¨å±€å˜é‡æ˜¯åªæœ‰å½“é¡µé¢è¢«å…³é—­çš„æ—¶å€™æ‰ä¼šè¢«å›æ”¶. 4,åœ¨é—­åŒ…ä¸­å¯¹DOMè¿›è¡Œä¸å½“çš„å¼•ç”¨.è¿™ä¸ªå¸¸è§äºè€IEæµè§ˆå™¨,ç°ä»£æµè§ˆå™¨å·²ç»é•¿å¤§äº†,å·²ç»å­¦ä¼šäº†è‡ªå·±å¤„ç†è¿™ç§æƒ…å†µäº†.è¿™é‡Œå°±ä¸èµ˜è¿°äº†.æƒ³çŸ¥é“çš„å¯ä»¥è‡ªè¡Œé—®è°·å¨˜å’Œåº¦å¨˜. æ€»è€Œè¨€ä¹‹,è§£å†³åŠæ³•å°±æ˜¯ä½¿é—­åŒ…çš„èƒ½æ­£å¸¸å¼•ç”¨,èƒ½è¢«æ­£å¸¸å›æ”¶.å¦‚æœå®åœ¨ä¸è¡Œ,å°±æ˜¯åœ¨ä½¿ç”¨å®Œå,æ‰‹åŠ¨å°†å˜é‡èµ‹å€¼null,å¼ºè¡Œè¿›è¡Œåƒåœ¾å›æ”¶. 5.4 å¾ªç¯å’Œé—­åŒ…çœ‹å¦‚ä¸‹ä¾‹å­:12345for (var i=1; i&lt;=5; i++) &#123; setTimeout( function timer() &#123; console.log( i ); &#125;, i*1000 );&#125; æˆ‘ä»¬æœŸæœ›çš„ç»“æœæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ä½†å®é™…ç»“æœæ˜¯,è¿™æ®µä»£ç åœ¨è¿è¡Œæ—¶ä¼šä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡è¾“å‡ºäº”æ¬¡ 6ã€‚(å…³äºä¹¦é‡Œçš„è§£é‡Š,æˆ‘è§‰å¾—æœ‰ç‚¹è¯´å¤æ‚äº†,æ²¡è¯´åˆ°ç‚¹å­ä¸Š,ä¸‹é¢æ˜¯æˆ‘çš„è§£é‡Š.)ä¸ºä»€ä¹ˆä¼šæ˜¯è¿™æ ·çš„ç»“æœ?timeræ¯«æ— ç–‘é—®æ˜¯ä¸€ä¸ªé—­åŒ…,å®ƒæ˜¯å¯ä»¥è®¿é—®åˆ°å¤–éƒ¨çš„å˜é‡i.åœ¨è¿›è¡Œforå¾ªç¯æ—¶,timer()ä¼šè¢«é‡å¤æ‰§è¡Œ5æ¬¡,ä¹Ÿå°±æ˜¯å®ƒä¼š console.log( i )5æ¬¡.(å…³é”®éƒ¨åˆ†æ¥äº†!)è¿™5æ¬¡iå…¶å®æ˜¯åŒä¸€ä¸ªi.å®ƒæ˜¯æ¥è‡ªäºå¤–éƒ¨ä½œç”¨åŸŸ,å³foré‡Œé¢å£°æ˜çš„i.åœ¨è¯æ³•ä½œç”¨åŸŸä¸­å˜é‡iåªå¯èƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„å€¼,å³å˜é‡å’Œå®ƒçš„å€¼æ˜¯ä¸€ä¸€å¯¹åº”çš„.ä¸ä¼šå˜åŒ–çš„.é‚£è¿™ä¸ªå€¼åˆ°åº•æ˜¯å¤šå°‘å‘¢?è¿™ä¸ªå€¼å°±æ˜¯æœ€ç»ˆå€¼! içš„æœ€ç»ˆå€¼å°±æ˜¯6å³forå¾ªç¯å®Œåiçš„å€¼.å½“å¼•æ“æ‰§è¡Œconsole.log( i )æ—¶,å®ƒä¼šè¯¢é—®iæ‰€å¯¹åº”çš„ä½œç”¨åŸŸ,é—®å®ƒiçš„å€¼æ˜¯å¤šå°‘.è¿™ä¸ªæ—¶å€™ä½œç”¨åŸŸè¿›è¡ŒRHSæŸ¥è¯¢å¾—åˆ°çš„ç»“æœå°±æ˜¯æœ€ç»ˆå€¼6. ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šä»¥ä¸ºåˆ†åˆ«è¾“å‡º1~5?å› ä¸ºåœ¨forå¾ªç¯ä¸­,æˆ‘ä»¬é”™ä»¥ä¸ºæ¯ä¸€æ¬¡å¾ªç¯æ—¶,å‡½æ•°æ‰€è¾“å‡ºçš„iæ˜¯æ ¹æ®å¾ªç¯åŠ¨æ€å˜åŒ–çš„.å³æ˜¯1~5ç´¯åŠ å˜åŒ–çš„.ä½†å®é™…ä¸Šå®ƒæ‰€è®¿é—®çš„iæ˜¯åŒä¸€ä¸ªå›ºå®šä¸å˜çš„å€¼,å³æœ€ç»ˆå€¼6.å¯èƒ½ä½ ä¼šæœ‰è¿™æ ·çš„ç–‘æƒ‘,é‚£æˆ‘å¾ªç¯è¿˜æœ‰æ„ä¹‰å—?iå…¶å®ä¸€å¼€å§‹å°±ç¡®å®šæ˜¯6äº†.æ²¡æœ‰å˜åŒ–è¿‡!é”™!iå˜åŒ–è¿‡,å®ƒçš„ç¡®æ˜¯ä»1é€æ­¥å¢åŠ åˆ°6çš„.åªæ˜¯å¤–éƒ¨ä½œç”¨åŸŸçš„iå€¼åªå¯èƒ½æ˜¯å¾ªç¯å®Œåçš„æœ€ç»ˆå€¼,å¹¶ä¸”å‡½æ•°timer()å¹¶æ²¡æœ‰ä¿å­˜æ¯æ¬¡iå˜åŒ–çš„å€¼.å®ƒåªæ˜¯è®¿é—®äº†å¤–éƒ¨ä½œç”¨åŸŸçš„iå€¼å³æœ€ç»ˆçš„å€¼6. OKæˆ‘ä»¬çŸ¥é“äº†å‡ºé”™çš„åœ°æ–¹,å°±æ˜¯æˆ‘ä»¬æ²¡æœ‰æŠŠæ¯æ¬¡içš„å€¼ä¿å­˜åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸä¸­.æ¥ä¸‹æ¥,çœ‹ä¸‹è¿™ä¸ªæ”¹è¿›çš„ä¾‹å­ç»“æœæ˜¯å¤šå°‘.1234567for (var i=1; i&lt;=5; i++) &#123; (function() &#123; setTimeout( function timer() &#123; console.log( i ); &#125;, i*1000 ); &#125;)();&#125; å®ƒçš„æœ€ç»ˆå€¼ä»ç„¶æ˜¯5ä¸ª6.ä¸ºä»€ä¹ˆ?æˆ‘ä»¬æ¥åˆ†æä¸‹,ä¸Šä¾‹ä¸­,å®ƒç”¨äº†ä¸€ä¸ªåŒ¿åå‡½æ•°åŒ…è£¹äº†å®šæ—¶å™¨,å¹¶ç«‹å³æ‰§è¡Œ.åœ¨è¿›è¡Œforå¾ªç¯æ—¶,ä¼šåˆ›é€ 5ä¸ªç‹¬ç«‹çš„å‡½æ•°ä½œç”¨åŸŸ(ç”±åŒ¿åå‡½æ•°åˆ›å»ºçš„,å› ä¸ºå®ƒæ˜¯é—­åŒ…å‡½æ•°).ä½†æ˜¯è¿™5ä¸ªç‹¬ç«‹çš„å‡½æ•°ä½œç”¨åŸŸé‡Œçš„iä¹Ÿå…¨éƒ½æ˜¯å¯¹å¤–éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨.å³å®ƒä»¬è®¿é—®çš„éƒ½æ˜¯içš„æœ€ç»ˆå€¼6.è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„,æˆ‘ä»¬è¦çš„æ˜¯5ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ,å¹¶ä¸”æ¯ä¸ªä½œç”¨åŸŸéƒ½ä¿å­˜ä¸€ä¸ªâ€å½“æ—¶â€içš„å€¼. è§£å†³åŠæ³•:é‚£æˆ‘ä»¬è¿™æ ·æ”¹å†™.123456789for (var i=1; i&lt;=5; i++) &#123; (function () &#123; var j =i; setTimeout( function timer() &#123; console.log( j ); &#125;, j*1000 ); &#125;)();&#125;//è¿™æ¬¡ç»ˆäºç»“æœæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ è¿™æ ·æ”¹å†™å,åŒ¿åå‡½æ•°æ¯æ¬¡éƒ½é€šè¿‡jä¿å­˜äº†æ¯æ¬¡iå€¼,è¿™æ ·iå€¼å°±é€šè¿‡jä¿å­˜åœ¨äº†ç‹¬ç«‹çš„ä½œç”¨åŸŸä¸­.æ³¨æ„æ­¤æ—¶ä¿å­˜çš„iå€¼æ˜¯â€™å½“æ—¶â€™çš„å€¼,å¹¶ä¸æ˜¯å¾ªç¯å®Œåçš„æœ€ç»ˆå€¼.è¿™æ ·å¾ªç¯å®Œå,å®é™…ä¸Šå°±åˆ›å»ºäº†5ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ,æ¯ä¸ªä½œç”¨åŸŸéƒ½ä¿å­˜äº†ä¸€ä¸ªâ€™å½“æ—¶â€™içš„å€¼(é€šè¿‡j).å½“å¼•æ“æ‰§è¡Œconsole.log( j )è¯¢é—®å…¶å¯¹åº”çš„ç‹¬ç«‹ä½œç”¨åŸŸæ—¶,å¾—åˆ°çš„å€¼å°±æ˜¯â€™å½“æ—¶â€™ä¿å­˜çš„å€¼,å†ä¹Ÿä¸æ˜¯6äº†.æˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€å†™ä¸ºè¿™æ ·:12345678for (var i=1; i&lt;=5; i++) &#123; (function(j) &#123; setTimeout( function timer() &#123; console.log( j ); &#125;, j*1000 ); &#125;)(i);&#125;//ç»“æœæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ åˆ©ç”¨å—ä½œç”¨åŸŸè¿›è¡Œè§£å†³:åœ¨es6ä¸­,æˆ‘ä»¬ä¸ä»…å¯ä»¥ä½¿ç”¨å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ,æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨letå£°æ˜æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å—ä½œç”¨åŸŸ(åœ¨{}å†…).æ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·æ”¹å†™:123456for (let i=1; i&lt;=5; i++) &#123; setTimeout( function timer() &#123; console.log( i ); &#125;, i*1000 );&#125;//ç»“æœæ˜¯åˆ†åˆ«è¾“å‡ºæ•°å­— 1~5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ è¿™æ ·æ”¹å†™,åœ¨æ¯æ¬¡å¾ªç¯æ—¶,letéƒ½ä¼šå¯¹iè¿›è¡Œå£°æ˜.å¹¶é€šè¿‡å¾ªç¯è‡ªå¸¦çš„{}åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å—ä½œç”¨åŸŸ.å¹¶ä¸”letå£°æ˜çš„i,ä¿å­˜äº†â€™å½“æ—¶â€™içš„å€¼åœ¨å½“å‰å—ä½œç”¨åŸŸé‡Œ.å› æ­¤å½“å¼•æ“æ‰§è¡Œconsole.log( i )æ—¶,å®ƒä¼šè¯¢é—®å¯¹åº”çš„å—ä½œç”¨åŸŸä¸Šiçš„å€¼,å¾—åˆ°çš„ç»“æœå°±æ˜¯â€™å½“æ—¶â€™ä¿å­˜çš„å€¼. å»¶ä¼¸:å®é™…ä¸Šå—ä½œç”¨åŸŸå¯ä»¥ç§°å¾—ä¸Šä¸€ä¸ªâ€™ä¼ªâ€™é—­åŒ…(ä¹‹æ‰€ä»¥æ˜¯ä¼ª,æ˜¯å› ä¸ºé—­åŒ…è§„å®šäº†åªèƒ½æ˜¯å‡½æ•°).å› ä¸ºå®ƒå‡ ä¹æ‹¥æœ‰é—­åŒ…çš„æ‰€æœ‰ç‰¹æ€§.å®ƒä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸ,åŒæ ·å¤–éƒ¨ä½œç”¨åŸŸä¸èƒ½è®¿é—®å—ä½œç”¨åŸŸçš„å˜é‡.ä½†å—ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸ.ä¸¾ä¸ªæ —å­:123456789function foo() &#123; var a = 2; &#123; //é€šè¿‡&#123;&#125; æ˜¾ç¤ºè¡¨ç¤ºå—ä½œç”¨åŸŸ let b = a; console.log('å—ä½œç”¨åŸŸå†…',b) //2 &#125; console.log('å—ä½œç”¨åŸŸå¤–',b) //b is not defined&#125;foo() è¯´äº†ç›¸åŒç‚¹,è¯´è¯´ä¸åŒç‚¹:1,ä¿å­˜å˜é‡åˆ°å—ä½œç”¨åŸŸ,å¿…é¡»é€šè¿‡letå£°æ˜.2,å—ä½œç”¨åŸŸä¸èƒ½å’Œå‡½æ•°ä¸€æ ·æœ‰åç§°(å‡½æ•°å)å¾ˆå¤šä¸æ–¹ä¾¿ä½¿ç”¨é—­åŒ…æˆ–è€…æ¯”è¾ƒéº»çƒ¦çš„æ—¶å€™,æ˜¯å¯ä»¥è€ƒè™‘é€šè¿‡å—ä½œç”¨åŸŸè¿›è¡Œè§£å†³. æ€»ç»“ä¸€ä¸‹ä¸€èˆ¬ä»€ä¹ˆæ—¶å€™è€ƒè™‘ä½¿ç”¨é—­åŒ…:è¿™éƒ¨åˆ†ä¹Ÿæ˜¯è‡ªå·±å·¥ä½œä½¿ç”¨çš„æ€»ç»“,å¦‚æœæœ‰è¡¥å……æˆ–è€…ä¸å¯¹çš„åœ°æ–¹,æ¬¢è¿ç•™è¨€æŒ‡æ­£. 1,éœ€è¦åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸå¹¶éšè—ä¸€äº›å˜é‡æˆ–å‡½æ•°,ä¸è¢«å¤–éƒ¨ä½¿ç”¨;æˆ–è€…æƒ³ä¿å­˜ä¸€äº›å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡æˆ–å‡½æ•°åˆ°è¿™ä¸ªç‹¬ç«‹ä½œç”¨åŸŸ. 2,åªæƒ³æš´éœ²ä¸€éƒ¨åˆ†è‡ªèº«ä½œç”¨åŸŸçš„å˜é‡æˆ–å‡½æ•°ç»™å¤–éƒ¨ä½¿ç”¨. 5.5 æ¨¡å—é¦–å…ˆçœ‹ä¸‹é¢çš„ä¾‹å­:123456789101112131415161718function CoolModule() &#123; var something = "cool"; var another = [1, 2, 3]; function doSomething() &#123; console.log( something ); &#125; function doAnother() &#123; console.log( another.join( " ! " ) ); &#125; return &#123; doSomething: doSomething, doAnother: doAnother &#125;; &#125;var foo = CoolModule(); foo.doSomething(); // coolfoo.doAnother(); // 1 ! 2 ! 3 é¦–å…ˆæˆ‘ä»¬å¯¹ä¸Šé¢è¿™æ®µä»£ç è¿›æˆåˆ†è¡Œåˆ†æ:ç§æœ‰æ•°æ®å˜é‡:something, anotherå†…éƒ¨å‡½æ•°:doSomething, doAnotherç›´æ¥è¯´ç»“è®º,ä¸Šé¢è¿™ä¸ªä¾‹å­å°±æ˜¯æ¨¡å—æ¨¡å¼.å®ƒreturnè¿”å›çš„è¿™ä¸ªå¯¹è±¡ä¹Ÿå°±æ˜¯æ¨¡å—ä¹Ÿè¢«ç§°ä¸ºå…¬å…±API(è‡³å°‘ä¹¦ä¸­æ˜¯è¿™æ ·ç§°å‘¼çš„).CoolModule()å°±æ˜¯æ¨¡å—æ„é€ å™¨æˆ–è€…å«æ¨¡å—å‡½æ•°.æ³¨æ„: è¿™é‡Œçš„æ¨¡å—å’Œæˆ‘ä»¬æ‰€è¯´çš„æ¨¡å—åŒ–å¼€å‘ä¸æ˜¯å®Œå…¨ä¸€æ ·çš„! æ¨¡å—ä¸ä¸€å®šéè¦æ˜¯æ ‡å‡†å¯¹è±¡,ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°,å‡½æ•°æœ¬è´¨ä¸Šä¹Ÿæ˜¯å¯¹è±¡,å‡½æ•°ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„å±æ€§. ä¹¦ä¸­æœ‰è¿™æ ·ä¸€å¥è¯CoolModule() åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¿…é¡»è¦é€šè¿‡è°ƒç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªæ¨¡å—å®ä¾‹ã€‚å¦‚æœä¸æ‰§è¡Œå¤–éƒ¨å‡½æ•°ï¼Œå†…éƒ¨ä½œç”¨åŸŸå’Œé—­åŒ…éƒ½æ— æ³•è¢«åˆ›å»ºã€‚æˆ‘è§‰å¾—è¿™å¥è¯æœ‰å¿…è¦å»¶ä¼¸è¯´ä¸€ä¸‹.å‡½æ•°è°ƒç”¨ä¸€æ¬¡å°±ä¼šåˆ›å»ºä¸€ä¸ªè¯¥å‡½æ•°çš„ä½œç”¨åŸŸ(ä¸è°ƒç”¨å°±ä¸ä¼šåˆ›å»º),åŒ…æ‹¬åˆ›å»ºå®ƒé‡Œé¢çš„å˜é‡å’Œå‡½æ•°. æ¨¡å—æ¨¡å¼:æ¨¡å—æ¨¡å¼éœ€è¦å…·å¤‡ä»¥ä¸‹2ä¸ªæ¡ä»¶:(è¿™é‡Œç»“åˆä¸Šé¢çš„ä¾‹å­,å¯¹ä¹¦ä¸­çš„å®šä¹‰è¿›è¡Œè¯´æ˜æ–¹ä¾¿ç†è§£) 1, å¿…é¡»æœ‰å¤–éƒ¨çš„å°é—­å‡½æ•°(å³CoolModule)ï¼Œè¯¥å‡½æ•°å¿…é¡»è‡³å°‘è¢«è°ƒç”¨ä¸€æ¬¡(æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—å®ä¾‹â€“&gt;æ¨¡å—å®ä¾‹æŒ‡çš„å°±æ˜¯å‡½æ•°returnè¿”å›çš„å¯¹è±¡)ã€‚ 2, å°é—­å‡½æ•°(å³CoolModule)å¿…é¡»è¿”å›è‡³å°‘ä¸€ä¸ªå†…éƒ¨å‡½æ•°(å³doSomething, doAnother)ï¼Œè¿™æ ·å†…éƒ¨å‡½æ•°æ‰èƒ½åœ¨ç§æœ‰ä½œç”¨åŸŸä¸­å½¢æˆé—­åŒ…ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®æˆ–è€…ä¿®æ”¹ç§æœ‰çš„çŠ¶æ€(å³something, another)ã€‚ æ¨¡å—:è¡¨é¢ä¸Šçœ‹ç”±æ¨¡å—å‡½æ•°(ä¾‹å­ä¸­çš„CoolModule)æ‰€è¿”å›çš„å¯¹è±¡å°±æ˜¯æ¨¡å—.ä½†æ¨¡å—è¿˜å¿…é¡»è¿˜åŒ…å«æ¨¡å—å‡½æ•°çš„å†…éƒ¨å‡½æ•°(å³é—­åŒ…å‡½æ•°).åªæœ‰åŒ…å«äº†æ‰èƒ½çœŸæ­£ç§°å¾—ä¸Šæ˜¯æ¨¡å—.æ‰å¼ºè°ƒä¸€æ¬¡è¿™é‡Œçš„æ¨¡å—ä¸æ¨¡å—åŒ–é‡Œçš„æ¨¡å—æ˜¯æœ‰åŒºåˆ«çš„,ä¹Ÿä¸æ˜¯nodejsé‡Œçš„æ¨¡å—. æ¨¡å—å‡½æ•°:æ¨¡å—å‡½æ•°ä¹Ÿå°±æ˜¯æ¨¡å—æ„é€ å™¨,ä¾‹å­ä¸­çš„CoolModule().ä¸€èˆ¬å®ƒæœ‰ä¸¤ä¸ªå¸¸è§ç”¨æ³•. é€šè¿‡æ¥å—å‚æ•°,å¯¹è¾“å‡ºçš„æ¨¡å—è¿›è¡Œä¿®æ”¹. é€šè¿‡æ·»åŠ æ¨¡å—é‡Œæ·»åŠ ç›¸å…³çš„å†…éƒ¨å‡½æ•°,å®ç°å¯¹è¾“å‡ºæ¨¡å—æ•°æ®çš„å¢åˆ æ”¹æŸ¥.(ä¹¦ä¸­ç”¨å‘½åå°†è¦ä½œä¸ºå…¬å…±APIè¿”å›çš„å¯¹è±¡.æˆ‘è§‰å¾—å‘½ååº”è¯¥æ˜¯ç”¨é”™äº†,åº”è¯¥æ˜¯ä¿®æ”¹å³å¢åˆ æ”¹æŸ¥æ›´å¥½) 5.5.1 ç°ä»£çš„æ¨¡å—æœºåˆ¶å¤§å¤šæ•°æ¨¡å—ä¾èµ–åŠ è½½å™¨ / ç®¡ç†å™¨æœ¬è´¨ä¸Šéƒ½æ˜¯å°†è¿™ç§æ¨¡å—å®šä¹‰å°è£…è¿›ä¸€ä¸ªå‹å¥½çš„ APIã€‚ä¸‹é¢å°±ä»‹ç»ä¸€ä¸ªç®€å•çš„æ¨¡å—ç®¡ç†å™¨å®ç°ä¾‹å­(å¯¹ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œé€è¡Œè§£è¯»):1234567891011121314151617181920212223242526272829303132//é¦–å…ˆå®ä¾‹åŒ–æˆ‘ä»¬çš„æ¨¡å—ç®¡ç†å™¨,å–åmyModulesvar MyModules=(function Manager() &#123; //ä½œä¸ºæˆ‘ä»¬çš„æ¨¡å—æ± ,ä¿å­˜æ‰€æœ‰å®šä¹‰çš„æ¨¡å— var modules=&#123;&#125;; /** *ä½¿ç”¨ç±»ä¼¼AMDçš„æ–¹å¼å®šä¹‰æ–°æ¨¡å—ï¼Œæ¥æ”¶3ä¸ªå‚æ•° *name:æ¨¡å—å *deps:æ•°ç»„å½¢å¼è¡¨ç¤ºæ‰€ä¾èµ–çš„å…¶ä»–æ¨¡å— *impl:æ¨¡å—åŠŸèƒ½çš„å®ç° **/ function define(name,deps,impl) &#123; //éå†ä¾èµ–æ¨¡å—æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œä»ç¨‹åºæ± ä¸­å–å‡ºå¯¹åº”çš„æ¨¡å—,å¹¶èµ‹å€¼. //å¾ªç¯å®Œå,depsç”±ä¿å­˜æ¨¡å—åçš„æ•°ç»„å˜æˆäº†ä¿å­˜å¯¹åº”æ¨¡å—çš„æ•°ç»„. for (var i=0;i&lt;deps.length;i++) &#123; deps[i]=modules[deps[i]]; &#125; //å°†æ–°æ¨¡å—å­˜å‚¨è¿›æ¨¡å—æ± ï¼Œå¹¶é€šè¿‡applyæ³¨å…¥å®ƒæ‰€ä¾èµ–çš„æ¨¡å—(å³éå†åçš„deps,å®é™…ä¸Šå°±æ˜¯ç”¨depsä½œä¸ºimplçš„å…¥å‚) modules[name]=impl.apply(impl,deps); &#125; //ä»æ¨¡å—æ± ä¸­å–å‡ºå¯¹åº”æ¨¡å— function get (name) &#123; return modules[name]; &#125; //æš´éœ²å®šä¹‰æ¨¡å—å’Œè·å–æ¨¡å—çš„ä¸¤ä¸ªapi return &#123; define: define, get: get &#125;&#125;)() è¯´æ˜: åé¢ä¹¦ä¸­è¯´äº†è¿™ä¹ˆä¸€å¥ä¸ºäº†æ¨¡å—çš„å®šä¹‰å¼•å…¥äº†åŒ…è£…å‡½æ•°(å¯ä»¥ä¼ å…¥ä»»ä½•ä¾èµ–),è¿™é‡ŒåŒ…è£…å‡½æ•°æŒ‡çš„æ˜¯Manger(),åŒæ ·ä¹Ÿæ˜¯æˆ‘ä»¬ä¸ŠèŠ‚æåˆ°çš„æ¨¡å—å‡½æ•°.é¦–å…ˆè¯´æ˜ä¸‹ä»€ä¹ˆæ˜¯åŒ…è£…å‡½æ•°.ä¾‹å¦‚å‡½æ•°Aå½“ä¸­è¿˜æœ‰ä¸€ä¸ªå‡½æ•°B.å½“æˆ‘ä»¬æƒ³è¦è°ƒç”¨å‡½æ•°Bçš„æ—¶å€™,åˆ™éœ€è¦å…ˆè°ƒç”¨å‡½æ•°A.é‚£ä¹ˆå‡½æ•°Aå°±å«åšå‡½æ•°Bçš„åŒ…è£…å‡½æ•°.ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æƒ³è°ƒç”¨æŸä¸ªæ¨¡å—æ—¶,éœ€è¦å…ˆè°ƒç”¨å®ƒçš„åŒ…è£…å‡½æ•°å³è¿™é‡Œçš„Manger().æ¥ç€æ˜¯åé¢é‚£å¥å¹¶ä¸”å°†è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯æ¨¡å—çš„ APIï¼Œå‚¨å­˜åœ¨ä¸€ä¸ªæ ¹æ®åå­—æ¥ç®¡ç†çš„æ¨¡å—åˆ—è¡¨ä¸­ã€‚æ³¨æ„è¿™é‡Œçš„è¿”å›å€¼æ˜¯æŒ‡implçš„è¿”å›å€¼. æ¥ç€çœ‹é€šè¿‡ç®¡ç†å™¨æ¥å®šä¹‰å’Œä½¿ç”¨æ¨¡å— 123456789101112131415161718192021222324252627282930313233MyModules.define('bar',[],function () &#123; function hello (who) &#123; return "Let me introduce: " + who; &#125; //è¿”å›å…¬å…±API å³æä¾›ä¸€ä¸ªhelloçš„æ¥å£ return &#123; hello:hello &#125;;&#125;);MyModules.define('foo',['bar'],function (bar) &#123; var hungry = "hippo"; functin awesome () &#123; //è¿™é‡Œçš„barä¸ºè¿”å›æ¨¡å—barè¿”å›çš„å…¬å…±API console.log( bar.hello( hungry ).toUpperCase() ); &#125; //è¿”å›å…¬å…±API å³æä¾›ä¸€ä¸ªawesomeçš„æ¥å£ return &#123; awesome:awesome &#125;&#125;)var bar=MyModules.get('bar');//é€šè¿‡ç®¡ç†å™¨è·å–æ¨¡å—'bar'var foo=MyModules.get('foo');//é€šè¿‡ç®¡ç†å™¨è·å–æ¨¡å—'foo'console.log(//è°ƒç”¨æ¨¡å—barçš„helloæ¥å£ bar.hello( "hippo" ) ); // Let me introduce: hippo //è°ƒç”¨æ¨¡å—fooçš„awesomeæ¥å£foo.awesome(); // LET ME INTRODUCE: HIPPO è¿™èŠ‚çš„ä¸»è¦å†…å®¹è¿˜æ˜¯äº†è§£ç°åœ¨æ˜¯å¦‚ä½•å¯¹æ¨¡å—è¿›è¡Œä¸€ä¸ªè§„èŒƒå¤„ç†.ä¸»è¦æ˜¯ä¸¤éƒ¨åˆ†å†…å®¹,ä¸€ä¸ªæ˜¯é€šè¿‡åç§°å’Œä¾èµ–åˆç†å®šä¹‰æ¨¡å—å¹¶å‚¨å­˜.å¦ä¸€ä¸ªåˆ™æ˜¯é€šè¿‡åç§°å¯¹å­˜å‚¨çš„æ¨¡å—çš„è°ƒç”¨.å…¶å®è¿˜å¯ä»¥å†å¢åŠ ä¸€ä¸ªåˆ é™¤æ¨¡å—çš„æ–¹æ³•. 5.5.2 æœªæ¥çš„æ¨¡å—æœºåˆ¶ok,è¿™èŠ‚è¯´çš„æ¨¡å—,å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ¨¡å—åŒ–å¼€å‘.å¹¶ä¸”ä¸»è¦æåˆ°çš„å°±æ˜¯ES6é‡Œå¸¸ç”¨çš„import.æ²¡ä»€ä¹ˆå¥½è¯´çš„. 5.6 å°ç»“åæ§½: åŒä¸€ä¸ªå‡½æ•°æ¦‚å¿µåœ¨5.5è¿™ä¸€ä¸ªå°èŠ‚é‡Œ,å±…ç„¶æ¢ç€èŠ±æ ·è¹¦å‡ºäº†ä¸‰ä¸ªåå­—!ä¸€ä¼šå«æ¨¡å—æ„é€ å™¨!ä¸€ä¼šå«æ¨¡å—å‡½æ•°!ä»¥åŠæœ€åçš„åŒ…è£…å‡½æ•°!æ¯å˜åŒ–ä¸€æ¬¡,éƒ½å¾—æƒ³ä¸€éå®ƒæŒ‡çš„æ˜¯å•¥!çœŸçš„æ˜¯æ— åŠ›åæ§½äº†!!!! é—­åŒ…:å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸï¼Œå¹¶ä¸”å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œï¼Œè¿™æ—¶ å°±äº§ç”Ÿäº†é—­åŒ…ã€‚ æ¨¡å—æœ‰ä¸¤ä¸ªä¸»è¦ç‰¹å¾: (1)ä¸ºåˆ›å»ºå†…éƒ¨ä½œç”¨åŸŸè€Œè°ƒç”¨äº†ä¸€ä¸ªåŒ…è£…å‡½æ•°(æ¨¡å—æ„é€ å™¨çš„å®ä¾‹åŒ–,ä¸æƒ³å¯¹é¢‘ç¹æ¢åå­—åæ§½äº†); (2)åŒ…è£…å‡½æ•°çš„è¿”å›å€¼(ä¹Ÿå°±æ˜¯æ¨¡å—)å¿…é¡»è‡³å°‘åŒ…æ‹¬ä¸€ä¸ªå¯¹å†…éƒ¨å‡½æ•°çš„å¼•ç”¨ï¼Œè¿™æ ·å°±ä¼šåˆ›å»ºæ¶µç›–æ•´ä¸ªåŒ…è£…å‡½æ•°å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ã€‚ ç¬¬äºŒéƒ¨åˆ†ç¬¬ä¸€ç«  å…³äºthis1.1 ä¸ºä»€ä¹ˆè¦ç”¨thiså› ä¸ºthis æä¾›äº†ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼æ¥éšå¼â€œä¼ é€’â€ä¸€ä¸ªå¯¹è±¡(å³ä¸Šä¸‹æ–‡å¯¹è±¡)å¼•ç”¨ï¼Œå› æ­¤å¯ä»¥å°† API è®¾è®¡å¾—æ›´åŠ ç®€æ´å¹¶ä¸”æ˜“äºå¤ç”¨ã€‚ 1.2 è¯¯è§£ä¸‹é¢ä¸¤ç§å¸¸è§çš„å¯¹äº this çš„è§£é‡Šéƒ½æ˜¯é”™è¯¯çš„(çœ‹çœ‹å°±å¥½,å°±ä¸è¿‡å¤šè§£è¯»äº†,ä»¥å…å¢åŠ äº†å¯¹é”™è¯¯çš„å°è±¡)ã€‚ 1.2.1 æŒ‡å‘è‡ªèº«äººä»¬å¾ˆå®¹æ˜“æŠŠ this ç†è§£æˆæŒ‡å‘å‡½æ•°è‡ªèº«. å…·åå‡½æ•°ï¼Œå¯ä»¥åœ¨å®ƒå†…éƒ¨å¯ä»¥ä½¿ç”¨å‡½æ•°åæ¥å¼•ç”¨è‡ªèº«è¿›è¡Œé€’å½’,æ·»åŠ å±æ€§ç­‰ã€‚(è¿™ä¸ªçŸ¥è¯†ç‚¹å…¶å®åœ¨ç¬¬ä¸‰ç« æè¿‡,æ—¢ç„¶è¿™é‡Œåˆæäº†ä¸€é,æˆ‘ä¹Ÿå†è¯´ä¸€é.)ä¾‹å¦‚:123function foo() &#123; foo.count = 4; // foo æŒ‡å‘å®ƒè‡ªèº«&#125; åŒ¿åå‡½æ•°å¦‚æœæƒ³è¦è°ƒç”¨è‡ªèº«åˆ™,éœ€è¦ä½¿ç”¨arguments.calleeä¸è¿‡è¿™ä¸ªå±æ€§åœ¨ES5ä¸¥æ ¼æ¨¡å¼ä¸‹å·²ç»ç¦æ­¢äº†,ä¹Ÿä¸å»ºè®®ä½¿ç”¨.è¯¦æƒ…å¯ä»¥æŸ¥çœ‹MDNçš„è¯´æ˜. 1.2.2 å®ƒçš„ä½œç”¨åŸŸåˆ‡è®°: this åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸æŒ‡å‘å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸã€‚ä½ ä¸èƒ½ä½¿ç”¨ this æ¥å¼•ç”¨ä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸå†…éƒ¨çš„ä¸œè¥¿ã€‚ è¿™éƒ¨åˆ†åªéœ€è®°ä½è¿™ä¸€æ®µè¯å°±è¡Œ. ç»ˆæç–‘é—®: JavaScripté‡Œçš„ä½œç”¨åŸŸåˆ°åº•æ˜¯å¯¹è±¡å—?è¿™å°èŠ‚æœ€ä»¤æˆ‘åœ¨æ„çš„æ˜¯é‡Œé¢è¿™å¥è¯â€åœ¨ JavaScript å†…éƒ¨ï¼Œä½œç”¨åŸŸç¡®å®å’Œå¯¹è±¡ç±»ä¼¼ï¼Œå¯è§çš„æ ‡è¯†ç¬¦éƒ½æ˜¯å®ƒçš„å±æ€§ã€‚ä½†æ˜¯ä½œç”¨åŸŸâ€œå¯¹è±¡â€æ— æ³•é€šè¿‡ JavaScriptä»£ç è®¿é—®ï¼Œå®ƒå­˜åœ¨äºJavaScript å¼•æ“å†…éƒ¨ã€‚â€å®ƒè®©æˆ‘æƒ³èµ·äº†æœ€å¼€å§‹å­¦JSçš„ä¸€ä¸ªç–‘é—®,JavaScripté‡Œçš„ä½œç”¨åŸŸåˆ°åº•æ˜¯å¯¹è±¡å—.è™½ç„¶â€åœ¨JSé‡Œä¸‡ç‰©çš†å¯¹è±¡â€.ä½†æ˜¯ä½œç”¨åŸŸç»™äººçš„æ„Ÿè§‰å´ä¸åƒæ˜¯ä¸€ä¸ªå¯¹è±¡.æ›´åƒæ˜¯ä¸€ä¸ªèŒƒå›´,ç”±å‡½æ•°çš„{}å›´åŸçš„èŒƒå›´,é™åˆ¶äº†å…¶ä¸­å˜é‡çš„è®¿é—®.ä½†ç›´è§‰å‘Šè¯‰æˆ‘å®ƒå’Œå¯¹è±¡è¿˜æ˜¯åº”è¯¥æœ‰ç‚¹è”ç³»çš„.ç›´åˆ°è¯»åˆ°ä¹¦ä¸­çš„è¿™æ®µè¯,æ›´åŠ å°è¯äº†æˆ‘çš„æ„Ÿè§‰.åœ¨JavaScripté‡Œ,ä½œç”¨åŸŸå…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å¯¹è±¡,ä½œç”¨åŸŸé‡Œæ‰€æœ‰å¯è§çš„æ ‡è¯†ç¬¦éƒ½æ˜¯å®ƒçš„å±æ€§.åªæ˜¯ä½œç”¨åŸŸå¯¹è±¡å¹¶ä¸èƒ½é€šè¿‡JavaScriptä»£ç è¢«æˆ‘ä»¬è®¿é—®,å®ƒåªå­˜åœ¨äºJavaScriptå¼•æ“å†…éƒ¨.æ‰€ä»¥ä½œç”¨åŸŸä½œä¸ºä¸€ä¸ªâ€å¯¹è±¡â€æ˜¯ç»å¸¸è¢«æˆ‘ä»¬å¿½ç•¥. 1.3 thisåˆ°åº•æ˜¯ä»€ä¹ˆthis æ˜¯åœ¨è¿è¡Œæ—¶(runtime)è¿›è¡Œç»‘å®šçš„ï¼Œå¹¶ä¸æ˜¯åœ¨ç¼–å†™æ—¶ç»‘å®šï¼Œå®ƒçš„ä¸Šä¸‹æ–‡(å¯¹è±¡)å–å†³äºå‡½æ•°è°ƒç”¨æ—¶çš„å„ç§æ¡ä»¶ã€‚this çš„ç»‘å®šå’Œå‡½æ•°å£°æ˜çš„ä½ç½®æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªå–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ã€‚ å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ´»åŠ¨è®°å½•(æœ‰æ—¶å€™ä¹Ÿç§°ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡)ã€‚è¿™ä¸ªè®°å½•ä¼šåŒ…å«å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨(è°ƒç”¨æ ˆ)ã€å‡½æ•°çš„è°ƒç”¨æ–¹æ³•ã€ä¼ å…¥çš„å‚æ•°ç­‰ä¿¡æ¯ã€‚this å°±æ˜¯è®°å½•çš„å…¶ä¸­ä¸€ä¸ªå±æ€§ï¼Œä¼šåœ¨å‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ç”¨åˆ°ã€‚(PS:æ‰€ä»¥thiså¹¶ä¸ç­‰ä»·äºæ‰§è¡Œä¸Šä¸‹æ–‡) 1.4 å°ç»“ å­¦ä¹  this çš„ç¬¬ä¸€æ­¥æ˜¯æ˜ç™½ this æ—¢ä¸æŒ‡å‘å‡½æ•°è‡ªèº«ä¹Ÿä¸æŒ‡å‘å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸ this å®é™…ä¸Šæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶å‘ç”Ÿçš„ç»‘å®šï¼Œå®ƒæŒ‡å‘ä»€ä¹ˆå®Œå…¨å–å†³äºå‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨(å…³äºthisä½ å¿…é¡»è®°ä½çš„è¯)ã€‚ ç¬¬äºŒç«  thiså…¨é¢è§£æ2.1 è°ƒç”¨ä½ç½®é€šè¿‡ä¸ŠèŠ‚æˆ‘ä»¬çŸ¥é“,thisçš„ç»‘å®šä¸å‡½æ•°çš„è°ƒç”¨ä½ç½®æœ‰å…³.é‚£è°ƒç”¨ä½ç½®æ˜¯ä»€ä¹ˆ.è°ƒç”¨ä½ç½®å°±æ˜¯å‡½æ•°åœ¨ä»£ç ä¸­è¢«è°ƒç”¨çš„ä½ç½®(è€Œä¸æ˜¯å£°æ˜çš„ä½ç½®)ã€‚ è¦å¯»æ‰¾è°ƒç”¨ä½ç½®,æœ€é‡è¦çš„æ˜¯è¦åˆ†æè°ƒç”¨æ ˆ(å°±æ˜¯ä¸ºäº†åˆ°è¾¾å½“å‰æ‰§è¡Œä½ç½®æ‰€è°ƒç”¨çš„æ‰€æœ‰å‡½æ•°)ã€‚æˆ‘ä»¬å…³å¿ƒçš„è°ƒç”¨ä½ç½®å°±åœ¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°çš„å‰ä¸€ä¸ªè°ƒç”¨ä¸­ã€‚PS:è°ƒç”¨æ ˆå…¶å®æ˜¯ä¸€ä¸ªè§£é‡Šèµ·æ¥æœ‰ç‚¹å¤æ‚çš„æ¦‚å¿µ.è¿™é‡Œæˆ‘å°±ä¸è¿‡å¤šè§£é‡Š,è¿™é‡Œæ¨èä¸€ç¯‡æ–‡ç« ,è§£é‡Šå¾—ä¸é”™. è¿™èŠ‚ä¹¦é‡Œçš„ä¾‹å­è§£é‡Šå¾—ä¸é”™,è¿™é‡Œå°±ä¸å¤åˆ¶ä»£ç äº†.å…¶å®åˆ†æè°ƒç”¨æ ˆåªæ˜¯ä¸ºäº†åœ¨è¿è¡Œæ—¶æ‰¾åˆ°æˆ‘ä»¬å…³å¿ƒçš„å‡½æ•°åˆ°åº•åœ¨å“ªé‡Œå’Œè¢«è°è°ƒç”¨äº†. ä½†æ˜¯å®é™…åˆ«å†™ä»£ç æ—¶,å…¶å®å¹¶ä¸ä¼šåˆ†æå¾—è¿™ä¹ˆæ¸…æ¥šçš„,æˆ‘ä»¬è¿˜æ˜¯åªéœ€è®°ä½thisçš„æŒ‡å‘å°±æ˜¯æˆ‘ä»¬è°ƒç”¨è¯¥å‡½æ•°çš„ä¸Šä¸‹æ–‡å¯¹è±¡.æ„æ€å°±æ˜¯æˆ‘ä»¬åœ¨å“ªé‡Œè°ƒç”¨è¯¥å‡½æ•°,thiså°±æŒ‡å‘å“ªé‡Œ.å¹¶ä¸”æŸ¥çœ‹è°ƒç”¨æ ˆè¿˜å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·,åªéœ€åœ¨ç–‘æƒ‘çš„ä»£ç ä¸Šä¸€è¡ŒåŠ ä¸Šdebuggerå³å¯.æµè§ˆå™¨åœ¨è°ƒè¯•æ¨¡å¼æ—¶,æˆ‘ä»¬å°±å¯ä»¥åœ¨è°ƒç”¨åˆ—è¡¨é‡ŒæŸ¥çœ‹è°ƒç”¨æ ˆ.æˆ‘ä»¬ä¸€èˆ¬ä¹Ÿä»…åœ¨æŸ¥æ‰¾bugæ—¶,ä¼šä½¿ç”¨è¯¥æ–¹æ³•. 2.2 ç»‘å®šè§„åˆ™åœ¨æ‰¾åˆ°è°ƒç”¨ä½ç½®å,åˆ™éœ€è¦åˆ¤å®šä»£ç å±äºä¸‹é¢å››ç§ç»‘å®šè§„åˆ™ä¸­çš„å“ªä¸€ç§.ç„¶åæ‰èƒ½å¯¹thisè¿›è¡Œç»‘å®š.æ³¨æ„: thisç»‘å®šçš„æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡,å¹¶ä¸æ˜¯å‡½æ•°è‡ªèº«ä¹Ÿä¸æ˜¯å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸ 2.2.1 é»˜è®¤ç»‘å®šä»€ä¹ˆæ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨:å¯¹å‡½æ•°ç›´æ¥ä½¿ç”¨è€Œä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°å¼•ç”¨è¿›è¡Œè°ƒç”¨.ç®€å•ç‚¹ä¸€ä¸ªå‡½æ•°ç›´æ¥æ˜¯func()è¿™æ ·è°ƒç”¨,å‰é¢ä»€ä¹ˆéƒ½æ²¡æœ‰.ä¸åŒäºé€šè¿‡å¯¹è±¡å±æ€§è°ƒç”¨ä¾‹å¦‚obj.func(),ä¹Ÿæ²¡æœ‰é€šè¿‡newå…³é”®å­—new Function();ä¹Ÿæ²¡æœ‰é€šè¿‡apply,bind,callå¼ºåˆ¶æ”¹å˜thisæŒ‡å‘.é»˜è®¤ç»‘å®š: å½“è¢«ç”¨ä½œç‹¬ç«‹å‡½æ•°è°ƒç”¨æ—¶ï¼ˆä¸è®ºè¿™ä¸ªå‡½æ•°åœ¨å“ªè¢«è°ƒç”¨,ä¸ç®¡å…¨å±€è¿˜æ˜¯å…¶ä»–å‡½æ•°å†…ï¼‰ï¼Œthisé»˜è®¤æŒ‡å‘åˆ°windowï¼›æ³¨æ„: å¦‚æœä½¿ç”¨ä¸¥æ ¼æ¨¡å¼(strict mode)ï¼Œé‚£ä¹ˆå…¨å±€å¯¹è±¡å°†æ— æ³•ä½¿ç”¨é»˜è®¤ç»‘å®šï¼Œå› æ­¤ this ä¼šç»‘å®šåˆ° undefined. 2.2.2 éšå¼ç»‘å®šéšå¼ç»‘å®š: å‡½æ•°è¢«æŸä¸ªå¯¹è±¡æ‹¥æœ‰æˆ–è€…åŒ…å«.ä¹Ÿå°±æ˜¯å‡½æ•°è¢«ä½œä¸ºå¯¹è±¡çš„å±æ€§æ‰€å¼•ç”¨.ä¾‹å¦‚obj.func().æ­¤æ—¶thisä¼šç»‘å®šåˆ°è¯¥å¯¹è±¡ä¸Š.éšå¼ä¸¢å¤±: ä¸ç®¡æ˜¯é€šè¿‡å‡½æ•°åˆ«åæˆ–æ˜¯å°†å‡½æ•°ä½œä¸ºå…¥å‚é€ æˆçš„éšå¼ä¸¢å¤±.åªéœ€æ‰¾åˆ°å®ƒçœŸæ­£çš„è°ƒç”¨ä½ç½®,å¹¶ä¸”å‡½æ•°å‰æ²¡æœ‰ä»»ä½•ä¿®é¥°ä¹Ÿæ²¡æœ‰æ˜¾å¼ç»‘å®š(ä¸‹èŠ‚ä¼šè®²åˆ°)(éä¸¥æ ¼æ¨¡å¼ä¸‹).é‚£ä¹ˆthisåˆ™ä¼šè¿›è¡Œé»˜è®¤ç»‘å®š,æŒ‡å‘window.æ³¨æ„: å®é™…å·¥ä½œä¸­,å¤§éƒ¨åˆ†thisä½¿ç”¨é”™è¯¯éƒ½æ˜¯ç”±å¯¹éšå¼ä¸¢å¤±çš„ä¸ç†è§£é€ æˆçš„.è®°ä½å‡½æ•°è°ƒç”¨å‰æ²¡æœ‰ä»»ä½•ä¿®é¥°å’Œæ˜¾å¼ç»‘å®š(å…¶å®å°±æ˜¯callã€applyã€bind),thiså°±æŒ‡å‘window 2.2.3 æ˜¾å¼ç»‘å®šåœ¨åˆ†æéšå¼ç»‘å®šæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä¸€ä¸ªå¯¹è±¡å†…éƒ¨åŒ…å«ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„å±æ€§ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå±æ€§é—´æ¥å¼•ç”¨å‡½æ•°ï¼Œä»è€ŒæŠŠ this é—´æ¥(éšå¼)ç»‘å®šåˆ°è¿™ä¸ªå¯¹è±¡ä¸Šã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³åœ¨å¯¹è±¡å†…éƒ¨åŒ…å«å‡½æ•°å¼•ç”¨ï¼Œè€Œæƒ³åœ¨æŸä¸ªå¯¹è±¡ä¸Šå¼ºåˆ¶è°ƒç”¨å‡½æ•°ï¼Œæ­¤æ—¶åˆ™éœ€è¦æ˜¾å¼ç»‘å®š.æ˜¾å¼ç»‘å®š: å¯ä»¥ç›´æ¥æŒ‡å®š this çš„ç»‘å®šå¯¹è±¡ï¼Œè¢«ç§°ä¹‹ä¸ºæ˜¾å¼ç»‘å®šã€‚åŸºæœ¬ä¸Šå°±æ˜¯æˆ‘ä»¬å¸¸ä½¿ç”¨çš„callã€applyã€bindæ–¹æ³•éƒ½æ˜¯æ˜¾å¼ç»‘å®š.(å¦‚æœè¿™ä¸‰ä¸ªæ–¹æ³•ä¸èƒ½ç†Ÿç»ƒä½¿ç”¨çš„,å»ºè®®æ‰¾åº¦å¨˜æˆ–è€…è°·å¨˜å­¦ä¹ å,å†çœ‹è¿™èŠ‚.)æ³¨æ„:å¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªåŸå§‹å€¼(å­—ç¬¦ä¸²ç±»å‹ã€å¸ƒå°”ç±»å‹æˆ–è€…æ•°å­—ç±»å‹)æ¥å½“ä½œ this çš„ç»‘å®šå¯¹ è±¡ï¼Œè¿™ä¸ªåŸå§‹å€¼ä¼šè¢«è½¬æ¢æˆå®ƒçš„å¯¹è±¡å½¢å¼(ä¹Ÿå°±æ˜¯new String(..)ã€new Boolean(..)æˆ–è€… new Number(..))ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œè£…ç®±â€ã€‚ ç¡¬ç»‘å®š: ä½¿ç”¨callã€applyã€bindæ–¹æ³•å¼ºåˆ¶æ˜¾å¼åœ°å°†thisè¿›è¡Œç»‘å®š,ç§°ä¹‹ä¸ºç¡¬ç»‘å®šã€‚ç¡¬ç»‘å®šçš„å…¸å‹åº”ç”¨åœºæ™¯å°±æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…è£¹å‡½æ•°(å…¶å®å°±æ˜¯å¸¸è¯´çš„å°è£…å‡½æ•°)ï¼Œä¼ å…¥æ‰€æœ‰çš„å‚æ•°å¹¶è¿”å›æ¥æ”¶åˆ°çš„æ‰€æœ‰å€¼.åœ¨å°è£…å‡½æ•°ä¸­,æˆ‘ä»¬å¸¸ä½¿ç”¨apply.ä¸€æ–¹é¢æ˜¯å› ä¸ºå®ƒå¯ä»¥æ‰‹åŠ¨ç»‘å®šthis,æ›´é‡è¦çš„æ˜¯å› ä¸ºå¯ä»¥ç”¨applyçš„ç¬¬äºŒä¸ªå‚æ•°,æ–¹ä¾¿åœ°æ³¨å…¥æ‰€æœ‰ä¼ å…¥çš„å‚æ•°.ä¾‹å¦‚ä¹‹å‰æåˆ°çš„modules[name]=impl.apply(impl,deps).å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“ä¼ å…¥çš„å‚æ•°æœ‰å¤šå°‘ä¸ª,ä½†æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨ä¸€ä¸ªdepså°†å…¶å…¨éƒ¨æ³¨å…¥.å¦ä¸€ä¸ªå¸¸ç”¨çš„æ˜¯foo.apply( null,argue)å½“æˆ‘ä»¬å°†applyçš„ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®ä¸ºnullæ—¶,æ­¤æ—¶thiså°±ä¼šé»˜è®¤ç»‘å®šåˆ°window.åˆ‡è®°ä½¿ç”¨è¿™ç§ç”¨æ³•æ—¶ç¡®ä¿å‡½æ•°fooå†…æ²¡æœ‰ä½¿ç”¨this. å¦åˆ™å¾ˆå¯èƒ½ä¼šé€ æˆå…¨å±€æ±¡æŸ“.å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹åº“çš„å‡½æ•°å°±å»ºè®®ä¸è¦ä½¿ç”¨äº†,å› ä¸ºä½ ä¸çŸ¥é“åˆ«äººçš„å‡½æ•°æ˜¯å¦ä½¿ç”¨äº†this(å…³äºè¿™éƒ¨åˆ†å†…å®¹,ä¸‹èŠ‚ä¼šç»§ç»­æåˆ°).è¿˜æœ‰ä¸€ç§å¸¸ç”¨å°±æ˜¯foo.call( this).è¿™æ ·fooé‡Œçš„thiséƒ½ä¼šæŒ‡å‘å½“å‰è°ƒç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒ. APIè°ƒç”¨çš„â€œä¸Šä¸‹æ–‡â€: ç¬¬ä¸‰æ–¹åº“çš„è®¸å¤šå‡½æ•°ï¼Œä»¥åŠ JavaScript è¯­è¨€å’Œå®¿ä¸»ç¯å¢ƒä¸­è®¸å¤šæ–°çš„å†…ç½®å‡½æ•°ï¼Œéƒ½æä¾›äº†ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œä¸Šä¸‹æ–‡â€(context)ï¼Œå…¶ä½œç”¨å’Œ bind(..) ä¸€æ ·ï¼Œç¡®ä¿ä½ çš„å›è°ƒå‡½æ•°ä½¿ç”¨æŒ‡å®šçš„ thisã€‚ 2.2.4 newç»‘å®šJavaScript ä¸­ new çš„æœºåˆ¶å®é™…ä¸Šå’Œé¢å‘ç±»çš„è¯­è¨€å®Œå…¨ä¸åŒã€‚åœ¨ JavaScript ä¸­ï¼Œæ„é€ å‡½æ•°åªæ˜¯ä¸€äº› ä½¿ç”¨ new æ“ä½œç¬¦æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ã€‚å®ƒä»¬å¹¶ä¸ä¼šå±äºæŸä¸ªç±»ï¼Œä¹Ÿä¸ä¼šå®ä¾‹åŒ–ä¸€ä¸ªç±»ã€‚å®é™…ä¸Šï¼Œ å®ƒä»¬ç”šè‡³éƒ½ä¸èƒ½è¯´æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ç±»å‹ï¼Œå®ƒä»¬åªæ˜¯è¢« new æ“ä½œç¬¦è°ƒç”¨çš„æ™®é€šå‡½æ•°è€Œå·²ã€‚å®é™…ä¸Šå¹¶ä¸å­˜åœ¨æ‰€è°“çš„â€œæ„é€ å‡½æ•°â€ï¼Œåªæœ‰å¯¹äºå‡½æ•°çš„â€œæ„é€ è°ƒç”¨â€ã€‚ ä½¿ç”¨ new æ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…è¯´å‘ç”Ÿæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œã€‚ 1,åˆ›å»º(æˆ–è€…è¯´æ„é€ )ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚ 2,è¿™ä¸ªæ–°å¯¹è±¡ä¼šè¢«æ‰§è¡Œ[[åŸå‹]]è¿æ¥ã€‚ 3,è¿™ä¸ªæ–°å¯¹è±¡ä¼šç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„thisã€‚ 4,å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆnewè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚ ç¤ºä¾‹:12345function foo(a) &#123; this.a = a;&#125;var bar = new foo(2); console.log( bar.a ); // 2 ä½¿ç”¨ new æ¥è°ƒç”¨ foo(..) æ—¶ï¼Œæˆ‘ä»¬ä¼šæ„é€ ä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠå®ƒç»‘å®šåˆ° foo(..) è°ƒç”¨ä¸­çš„ this ä¸Šã€‚è¯´æ˜:å¯¹äºä¸Šé¢è¿™å¥è¯è¿›è¡Œè§£é‡Šä¸‹,å¦‚æœåœ¨ä¸€ä¸ªå‡½æ•°å‰é¢å¸¦ä¸Š new å…³é”®å­—æ¥è°ƒç”¨ï¼Œ é‚£ä¹ˆèƒŒåœ°é‡Œå°†ä¼šåˆ›å»ºä¸€ä¸ªè¿æ¥åˆ°è¯¥å‡½æ•°çš„ prototype çš„æ–°å¯¹è±¡ï¼Œthiså°±æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ï¼› 2.3 ä¼˜å…ˆçº§ç›´æ¥ä¸Šç»“è®º:newç»‘å®š=æ˜¾ç¤ºç»‘å®š&gt;éšå¼ç»‘å®š&gt;é»˜è®¤ç»‘å®šè¯´æ˜: newç»‘å®šä¸æ˜¾ç¤ºç»‘å®šæ˜¯ä¸èƒ½ç›´æ¥è¿›è¡Œæµ‹è¯•æ¯”è¾ƒ,ä½†é€šè¿‡åˆ†æå‘ç°newç»‘å®šå†…éƒ¨å…¶å®æ˜¯ä½¿ç”¨äº†ç¡¬ç»‘å®š(æ˜¾ç¤ºç»‘å®šçš„ä¸€ç§),æ‰€ä»¥newç»‘å®šå’Œæ˜¾ç¤ºç»‘å®šä¼˜å…ˆçº§åº”è¯¥å·®ä¸å¤š.ä½†è¯è¯´å›æ¥,ä¸€èˆ¬å®é™…ä½¿ç”¨æ—¶,ä¸ä¼šè¿™ç§å¤æ‚çš„äº¤é”™ç»‘å®š.æ‰€ä»¥åªéœ€è®°ä½ä¸‹é¢çš„åˆ¤å®šå³å¯. åˆ¤æ–­this:ç°åœ¨æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¼˜å…ˆçº§æ¥åˆ¤æ–­å‡½æ•°åœ¨æŸä¸ªè°ƒç”¨ä½ç½®åº”ç”¨çš„æ˜¯å“ªæ¡è§„åˆ™ã€‚å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ¥è¿›è¡Œåˆ¤æ–­: 1,å‡½æ•°æ˜¯å¦åœ¨newä¸­è°ƒç”¨(newç»‘å®š)?å¦‚æœæ˜¯çš„è¯thisç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ var bar = new foo() 2,å‡½æ•°æ˜¯å¦é€šè¿‡callã€apply(æ˜¾å¼ç»‘å®š)æˆ–è€…ç¡¬ç»‘å®šè°ƒç”¨?å¦‚æœæ˜¯çš„è¯ï¼Œthisç»‘å®šçš„æ˜¯ æŒ‡å®šçš„å¯¹è±¡ã€‚var bar = foo.call(obj2) 3,å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨(éšå¼ç»‘å®š)?å¦‚æœæ˜¯çš„è¯ï¼Œthis ç»‘å®šçš„æ˜¯é‚£ä¸ªä¸Š ä¸‹æ–‡å¯¹è±¡ã€‚var bar = obj1.foo() 4,å¦‚æœéƒ½ä¸æ˜¯çš„è¯ï¼Œä½¿ç”¨é»˜è®¤ç»‘å®šã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°±ç»‘å®šåˆ°undefinedï¼Œå¦åˆ™ç»‘å®šåˆ° å…¨å±€å¯¹è±¡ã€‚var bar = foo()å°±æ˜¯è¿™æ ·ã€‚å¯¹äºæ­£å¸¸çš„å‡½æ•°è°ƒç”¨æ¥è¯´ï¼Œç†è§£äº†è¿™äº›çŸ¥è¯†ä½ å°±å¯ä»¥æ˜ç™½ this çš„ç»‘å®šåŸç†äº†ã€‚ 2.4 ç»‘å®šä¾‹å¤–2.4.1 è¢«å¿½ç•¥çš„thiså¦‚æœä½ æŠŠ null æˆ–è€… undefined ä½œä¸º this çš„ç»‘å®šå¯¹è±¡ä¼ å…¥ callã€apply æˆ–è€… bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™,thisä¼šç»‘å®šåˆ°windowä¸Š.ä½¿ç”¨æƒ…æ™¯:ä¸€ç§éå¸¸å¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨ apply(..) æ¥â€œå±•å¼€â€ä¸€ä¸ªæ•°ç»„(ä¹Ÿå¯ä»¥ç”¨æ¥æ–¹ä¾¿åœ°å‚æ•°æ³¨å…¥)ï¼Œå¹¶å½“ä½œå‚æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°ã€‚ç±»ä¼¼åœ°ï¼Œbind(..) å¯ä»¥å¯¹å‚æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–(é¢„å…ˆè®¾ç½®ä¸€äº›å‚æ•°).é€šè¿‡è‡ªå¸¦bindæ–¹æ³•å®ç°æŸ¯é‡ŒåŒ–æ˜¯å¾ˆæ–¹ä¾¿çš„,æ¯”è‡ªå·±å†™è¦ç®€åŒ–å¥½å¤š. æ³¨æ„: åœ¨ ES6 ä¸­ï¼Œå¯ä»¥ç”¨ â€¦ æ“ä½œç¬¦ä»£æ›¿ apply(..) æ¥â€œå±• å¼€â€æ•°ç»„ï¼Œfoo(â€¦[1,2]) å’Œ foo(1,2)æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸å¿…è¦çš„ this ç»‘å®šã€‚å¯æƒœï¼Œåœ¨ ES6 ä¸­æ²¡æœ‰æŸ¯é‡ŒåŒ–çš„ç›¸å…³è¯­æ³•ï¼Œå› æ­¤è¿˜æ˜¯éœ€è¦ä½¿ç”¨ bind(..)ã€‚ å½“ä½¿ç”¨nullæˆ–è€…undefinedè¿›è¡Œç»‘å®šæ—¶,è¦ç¡®ä¿è¯¥å‡½æ•°å†…æ²¡æœ‰ä½¿ç”¨this,å¦åˆ™æ­¤æ—¶å¾ˆå®¹æ˜“å¯¹å…¨å±€å˜é‡é€ æˆç ´å!å°¤å…¶æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æ–¹æ³•! æ›´å®‰å…¨çš„thiså¦‚æœå‡½æ•°å†…ä½¿ç”¨äº†this,ç›´æ¥ä½¿ç”¨nullåˆ™å¯èƒ½ä¼šå¯¹å…¨å±€é€ æˆç ´å.å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªâ€œDMZâ€(demilitarized zoneï¼Œéå†›äº‹åŒº)å¯¹è±¡â€”â€”å®ƒå°±æ˜¯ä¸€ä¸ªç©ºçš„éå§”æ‰˜çš„å¯¹è±¡(å§”æ‰˜åœ¨ç¬¬ 5 ç« å’Œç¬¬ 6 ç« ä»‹ç»)ã€‚è®©thisç»‘å®šåˆ°è¿™ä¸ªâ€DMZä¸Š.è¿™æ ·å°±ä¸ä¼šå¯¹å…¨å±€é€ æˆç ´å.æ€ä¹ˆåˆ›å»ºDMZå‘¢.å°±æ˜¯é€šè¿‡Object.create(null) åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡.è¿™ç§æ–¹æ³•å’Œ {} å¾ˆåƒï¼Œä½†æ˜¯å¹¶ä¸ä¼šåˆ›å»º Object.prototype è¿™ä¸ªå§”æ‰˜ï¼Œæ‰€ä»¥å®ƒæ¯” {}â€œæ›´ç©ºâ€æ›´åŠ å®‰å…¨. PS:å®é™…ä½¿ç”¨ä¸€èˆ¬ä¸ä¼šé‡åˆ°è¿™ç§æƒ…å†µ(ä¹Ÿå¯èƒ½æ˜¯æˆ‘å¤ªèœ,æ²¡é‡åˆ°),å¦‚æœå‡½æ•°å†…æœ‰this,é‚£è‚¯å®šæ˜¯æœ‰éœ€è¦è°ƒç”¨çš„å˜é‡æˆ–å‡½æ•°,ç›´æ¥æŠŠå®ƒç»‘å®šåˆ°ä¸€ä¸ªç©ºå¯¹è±¡ä¸Š.é‚£ä»€ä¹ˆéƒ½å–ä¸åˆ°,è¿˜æœ‰ä»€ä¹ˆæ„ä¹‰?æ‰€ä»¥å‡½æ•°æ²¡æœ‰thiså°±ä¼ å…¥null.å¦‚æœæœ‰thiså°±æŠŠå®ƒç»‘å®šåˆ°çœŸæ­£éœ€è¦å®ƒçš„å¯¹è±¡ä¸Š,è€Œä¸æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ä¸Š.è¿™äº›æ˜¯æˆ‘è‡ªå·±çš„è§è§£,å¦‚æœæœ‰ä¸å¦¥çš„,æ¬¢è¿ç•™è¨€æŒ‡æ­£. 2.4.2 é—´æ¥å¼•ç”¨12345678function foo() &#123; console.log( this.a );&#125;var a = 2;var o = &#123; a: 3, foo: foo &#125;; var p = &#123; a: 4 &#125;;o.foo(); // 3(p.foo = o.foo)(); // 2 å…¶å®å°±æ˜¯foo() æ­¤æ—¶thisé»˜è®¤ç»‘å®šåˆ°window ä¾‹å­ä¸­çš„é—´æ¥å¼•ç”¨å…¶å®æ˜¯å¯¹å‡½æ•°çš„ç†è§£ä¸æ·±é€ æˆçš„.å…¶å®(p.foo = o.foo)()å°±æ˜¯(foo)(),è¿™æ ·å°±æ˜¯å…¨å±€è°ƒç”¨foo()æ‰€ä»¥thisé»˜è®¤å°±ç»‘å®šåˆ°äº†windowä¸Š.æ³¨æ„:å¯¹äºé»˜è®¤ç»‘å®šæ¥è¯´ï¼Œå†³å®š this ç»‘å®šå¯¹è±¡çš„å¹¶ä¸æ˜¯è°ƒç”¨ä½ç½®æ˜¯å¦å¤„äºä¸¥æ ¼æ¨¡å¼ï¼Œè€Œæ˜¯ å‡½æ•°ä½“æ˜¯å¦å¤„äºä¸¥æ ¼æ¨¡å¼ã€‚å¦‚æœå‡½æ•°ä½“å¤„äºä¸¥æ ¼æ¨¡å¼ï¼Œthis ä¼šè¢«ç»‘å®šåˆ° undefinedï¼Œå¦åˆ™ this ä¼šè¢«ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚(å¯¹äºè¿™æ®µè¯å…¶å®åœ¨2.2.1èŠ‚å°±åº”è¯¥è¯´äº†!) 2.4.3 è½¯ç»‘å®šç¡¬ç»‘å®šä¼šå¤§å¤§é™ä½å‡½æ•°çš„çµæ´»æ€§ï¼Œä½¿ç”¨ç¡¬ç»‘å®šä¹‹åå°±æ— æ³•ä½¿ç”¨éšå¼ç»‘å®šæˆ–è€…æ˜¾å¼ç»‘å®šæ¥ä¿®æ”¹ thisã€‚è¿™æ—¶å€™åˆ™éœ€è¦ä½¿ç”¨è½¯ç»‘å®š.Tips: è¿™é‡Œç»™çš„è½¯ç»‘å®šæ–¹æ³•è¿˜æ˜¯æŒºå¥½çš„.ä½†æ˜¯å»ºè®®è¿˜æ˜¯åœ¨è‡ªå·±çš„ä»£ç é‡Œä½¿ç”¨,å¹¶æ³¨é‡Šæ¸…é™¤.ä»¥å…åˆ«äººä½¿ç”¨,å¯¹thisé”™è¯¯çš„åˆ¤æ–­. 2.5 thisè¯æ³• ES6 ä¸­ä»‹ç»äº†ä¸€ç§æ— æ³•ä½¿ç”¨ä¸Šé¢å››æ¡è§„åˆ™çš„ç‰¹æ®Šå‡½æ•°ç±»å‹:ç®­å¤´å‡½æ•°ã€‚ ç®­å¤´å‡½æ•°ä¸ä½¿ç”¨ this çš„å››ç§æ ‡å‡†è§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚(å‡½æ•°æˆ–è€…å…¨å±€)ä½œç”¨åŸŸæ¥å†³å®š thisã€‚(è€Œä¼ ç»Ÿçš„thisä¸å‡½æ•°ä½œç”¨åŸŸæ²¡æœ‰ä»»ä½•å…³ç³»,å®ƒåªä¸è°ƒç”¨ä½ç½®çš„ä¸Šä¸‹æ–‡å¯¹è±¡æœ‰å…³.è¿™ç‚¹åœ¨æœ¬ç« å¼€å¤´å°±å·²ç»åå¤å¼ºè°ƒäº†.) é‡è¦: ç®­å¤´å‡½æ•°æœ€å¸¸ç”¨äºå›è°ƒå‡½æ•°ä¸­ï¼Œä¾‹å¦‚äº‹ä»¶å¤„ç†å™¨æˆ–è€…å®šæ—¶å™¨. ç®­å¤´å‡½æ•°å¯ä»¥åƒ bind(..) ä¸€æ ·ç¡®ä¿å‡½æ•°çš„ this è¢«ç»‘å®šåˆ°æŒ‡å®šå¯¹è±¡ ç®­å¤´å‡½æ•°ç”¨æ›´å¸¸è§çš„è¯æ³•ä½œç”¨åŸŸå–ä»£äº†ä¼ ç»Ÿçš„ this æœºåˆ¶ã€‚ æ³¨æ„: è¿™ç§æƒ…å†µ:1234567891011function module() &#123; return this.x;&#125;var foo = &#123; x: 99, bar:module.bind(this) //æ­¤æ—¶bindç»‘å®šçš„thisä¸ºwindow. &#125;var x="window"console.log(foo.bar())//window åœ¨ ES6 ä¹‹å‰æˆ‘ä»¬å°±å·²ç»åœ¨ä½¿ç”¨ä¸€ç§å‡ ä¹å’Œç®­å¤´å‡½æ•°å®Œå…¨ä¸€æ ·çš„æ¨¡å¼:12345678910function foo() &#123;var self = this; // lexical capture of this setTimeout( function()&#123; console.log( self.a ); &#125;, 100 ); &#125;var obj = &#123; a: 2&#125;;foo.call( obj ); // 2 è™½ç„¶ self = this å’Œç®­å¤´å‡½æ•°çœ‹èµ·æ¥éƒ½å¯ä»¥å–ä»£ bind(..)ï¼Œä½†æ˜¯ä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œå®ƒä»¬æƒ³æ›¿ä»£çš„æ˜¯ this æœºåˆ¶ã€‚(çš„ç¡®æ˜¯è¿™æ ·,æˆ‘ä¸€èˆ¬ä¼šç”¨meæ›¿ä»£self.å› ä¸ºå°‘ä¸¤ä¸ªå•è¯=.=) å…³äºthisçš„ç¼–ç è§„èŒƒå»ºè®®: åªä½¿ç”¨è¯æ³•ä½œç”¨åŸŸå¹¶å®Œå…¨æŠ›å¼ƒé”™è¯¯thisé£æ ¼çš„ä»£ç ; å®Œå…¨é‡‡ç”¨ this é£æ ¼ï¼Œåœ¨å¿…è¦æ—¶ä½¿ç”¨ bind(..)ï¼Œå°½é‡é¿å…ä½¿ç”¨ self = this å’Œç®­å¤´å‡½æ•°ã€‚ åœ¨è‡ªå·±å®é™…å·¥ä½œä¸­,å…¶å®æ˜¯ä¸¤ç§æ··ç”¨çš„,ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½ä¼šä½¿ç”¨è¯æ³•ä½œç”¨åŸŸé£æ ¼.å› ä¸ºæœ‰æ—¶å€™ä½ çœŸçš„å¾ˆéš¾åšåˆ°å®Œå…¨ç»Ÿä¸€.æˆ‘ç°åœ¨çš„ä¹ æƒ¯æ˜¯,åœ¨å†™ä»»ä½•å‡½æ•°æ—¶,å¼€å¤´ç¬¬ä¸€ä¸ªå°±æ˜¯var me =this;è¿™æ ·åœ¨çœ‹åˆ°å‡½æ•°ç¬¬ä¸€çœ¼,å°±çŸ¥é“:å“¦,è¿™ä¸ªå‡½æ•°æ˜¯ç”¨è¯æ³•ä½œç”¨åŸŸé£æ ¼çš„.å°¤å…¶å‡½æ•°å†…æ¶‰åŠåˆ°å›è°ƒ.è¿™æ ·å°±é¿å…äº†å†™ç€å†™ç€å‘ç°thisç»‘å®šåˆ°å…¶ä»–åœ°æ–¹å»äº†,ä¸€ä¸ªå‡½æ•°é‡Œé¢thisä¸ç»Ÿä¸€çš„æƒ…å†µ. 2.6 å°ç»“(è¿™é‡Œæ€»ç»“å¾—å¾ˆå¥½,æˆ‘å°±å…¨éƒ¨copyäº†)å¦‚æœè¦åˆ¤æ–­ä¸€ä¸ªè¿è¡Œä¸­å‡½æ•°çš„ this ç»‘å®šï¼Œå°±éœ€è¦æ‰¾åˆ°è¿™ä¸ªå‡½æ•°çš„ç›´æ¥è°ƒç”¨ä½ç½®ã€‚æ‰¾åˆ°ä¹‹åå°±å¯ä»¥é¡ºåºåº”ç”¨ä¸‹é¢è¿™å››æ¡è§„åˆ™æ¥åˆ¤æ–­ this çš„ç»‘å®šå¯¹è±¡ã€‚ ç”±newè°ƒç”¨?ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ ç”±callæˆ–è€…apply(æˆ–è€…bind)è°ƒç”¨?ç»‘å®šåˆ°æŒ‡å®šçš„å¯¹è±¡ã€‚ ç”±ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨?ç»‘å®šåˆ°é‚£ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ é»˜è®¤:åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç»‘å®šåˆ°undefinedï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚ ä¸€å®šè¦æ³¨æ„ï¼Œæœ‰äº›è°ƒç”¨å¯èƒ½åœ¨æ— æ„ä¸­ä½¿ç”¨é»˜è®¤ç»‘å®šè§„åˆ™ã€‚å¦‚æœæƒ³â€œæ›´å®‰å…¨â€åœ°å¿½ç•¥ this ç»‘å®šï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª DMZ å¯¹è±¡ï¼Œæ¯”å¦‚ Ã¸ = Object.create(null)ï¼Œä»¥ä¿æŠ¤å…¨å±€å¯¹è±¡ã€‚ ES6 ä¸­çš„ç®­å¤´å‡½æ•°å¹¶ä¸ä¼šä½¿ç”¨å››æ¡æ ‡å‡†çš„ç»‘å®šè§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å½“å‰çš„è¯æ³•ä½œç”¨åŸŸæ¥å†³å®š thisï¼Œå…·ä½“æ¥è¯´ï¼Œç®­å¤´å‡½æ•°ä¼šç»§æ‰¿å¤–å±‚å‡½æ•°è°ƒç”¨çš„ this ç»‘å®š(æ— è®º this ç»‘å®šåˆ°ä»€ä¹ˆ)ã€‚è¿™å…¶å®å’Œ ES6 ä¹‹å‰ä»£ç ä¸­çš„ self = this æœºåˆ¶ä¸€æ ·ã€‚ ç‰¹åˆ«æ³¨æ„: å…¶ä¸­æœ€éœ€è¦æ³¨æ„çš„å°±æ˜¯å½“ä½ ä½¿ç”¨jqueryæˆ–vueæ—¶,æ­¤æ—¶thisæ˜¯è¢«åŠ¨æ€ç»‘å®šäº†çš„.å¤§å¤šæ•° jQuery æ–¹æ³•å°† this è®¾ç½®ä¸ºå·²é€‰æ‹©çš„ dom å…ƒç´ ã€‚ä½¿ç”¨ Vue.jsæ—¶ï¼Œåˆ™æ–¹æ³•å’Œè®¡ç®—å‡½æ•°é€šå¸¸å°† this è®¾ç½®ä¸º Vue ç»„ä»¶å®ä¾‹ã€‚vueæ–‡æ¡£ä¸­æ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸé’©å­è‡ªåŠ¨ç»‘å®š this ä¸Šä¸‹æ–‡åˆ°å®ä¾‹ä¸­ï¼Œå› æ­¤ä½ å¯ä»¥è®¿é—®æ•°æ®ï¼Œå¯¹å±æ€§å’Œæ–¹æ³•è¿›è¡Œè¿ç®—ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³• (ä¾‹å¦‚ created: () =&gt; this.fetchTodos())ã€‚è¿™æ˜¯å› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šäº†çˆ¶ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ this ä¸ä½ æœŸå¾…çš„ Vue å®ä¾‹ä¸åŒï¼Œthis.fetchTodos çš„è¡Œä¸ºæœªå®šä¹‰ã€‚ ä¹ŸåŒ…æ‹¬ä½¿ç”¨ç¬¬ä¸‰æ–¹ajaxæ—¶,ä¾‹å¦‚axios.è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•,è¦ä¹ˆä½¿ç”¨ä¼ ç»Ÿçš„functionæˆ–è€…ä½¿ç”¨let _this=thisè¿›è¡Œæ¥ç®¡.å…¶å®å½“ä½ ä½¿ç”¨vueæ—¶,ä½ é»˜è®¤çš„æ€æƒ³å°±æ˜¯thisæŒ‡çš„å°±æ˜¯vueå®ä¾‹.æ‰€ä»¥é™¤äº†é’©å­å‡½æ•°å’Œaxiosé‡Œä¼šæœ‰ç‚¹å½±å“å¤–,å…¶ä½™è¿˜å¥½. PS è¿™é‡Œå†è¡¥å……è¯´æ˜ä¸Šä¸‹æ–‡(å¯¹è±¡)ä¸å‡½æ•°ä½œç”¨åŸŸçš„åŒºåˆ«äºè”ç³»: ä¸Šä¸‹æ–‡ï¼š å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½å‚¨å­˜åœ¨é‡Œé¢.ä¸Šä¸‹æ–‡ç¯å¢ƒæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨å¹¶è¢«å¼•æ“æ‰§è¡Œæ—¶åˆ›å»ºçš„.å¦‚æœä½ æ²¡è°ƒç”¨,é‚£ä¹ˆå°±æ²¡æœ‰ä¸Šä¸‹æ–‡. ä½œç”¨åŸŸï¼š é™¤äº†å…¨å±€ä½œç”¨åŸŸï¼Œåªæœ‰å‡½æ•°å’ŒES6æ–°å¢çš„let,constæ‰èƒ½åˆ›å»ºä½œç”¨åŸŸ.åˆ›å»ºä¸€ä¸ªå‡½æ•°å°±åˆ›å»ºäº†ä¸€ä¸ªä½œç”¨åŸŸï¼Œæ— è®ºä½ è°ƒç”¨ä¸è°ƒç”¨ï¼Œå‡½æ•°åªè¦åˆ›å»ºäº†ï¼Œå®ƒå°±æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸ.ä½œç”¨åŸŸæ§åˆ¶ç€è¢«è°ƒç”¨å‡½æ•°ä¸­çš„å˜é‡è®¿é—®. ä¸¤è€…: ä½œç”¨åŸŸæ˜¯åŸºäºå‡½æ•°çš„ï¼Œè€Œä¸Šä¸‹æ–‡æ˜¯åŸºäºå¯¹è±¡çš„ã€‚ä½œç”¨åŸŸæ¶‰åŠåˆ°æ‰€è¢«è°ƒç”¨å‡½æ•°ä¸­çš„å˜é‡è®¿é—®ï¼Œå¹¶ä¸”ä¸åŒçš„è°ƒç”¨åœºæ™¯æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸Šä¸‹æ–‡å§‹ç»ˆæ˜¯thiså…³é”®å­—æœ‰å…³ï¼Œ å®ƒæ§åˆ¶ç€thisçš„å¼•ç”¨ã€‚ä¸€ä¸ªä½œç”¨åŸŸä¸‹å¯èƒ½åŒ…å«å¤šä¸ªä¸Šä¸‹æ–‡ã€‚æœ‰å¯èƒ½ä»æ¥æ²¡æœ‰è¿‡ä¸Šä¸‹æ–‡ï¼ˆå‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ï¼‰ï¼›æœ‰å¯èƒ½æœ‰è¿‡ï¼Œç°åœ¨å‡½æ•°è¢«è°ƒç”¨å®Œæ¯•åï¼Œä¸Šä¸‹æ–‡ç¯å¢ƒè¢«é”€æ¯äº†(åƒåœ¾å›æ”¶)ï¼›æœ‰å¯èƒ½åŒæ—¶å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªï¼ˆé—­åŒ…ï¼‰ã€‚ ç¬¬ä¸‰ç«  å¯¹è±¡3.1 è¯­æ³•å¯¹è±¡å¯ä»¥é€šè¿‡ä¸¤ç§å½¢å¼å®šä¹‰:å£°æ˜(æ–‡å­—)å½¢å¼(å°±æ˜¯å¸¸è¯´çš„å¯¹è±¡å­—é¢é‡)å’Œæ„é€ å½¢å¼ã€‚ å£°æ˜å½¢å¼(å¯¹è±¡å­—é¢é‡):1234 var myObj = &#123; key: value // ... &#125;; æ„é€ å½¢å¼:12var myObj = new Object(); myObj.key = value; æ„é€ å½¢å¼å’Œæ–‡å­—å½¢å¼ç”Ÿæˆçš„å¯¹è±¡æ˜¯ä¸€æ ·çš„ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œåœ¨æ–‡å­—å£°æ˜ä¸­ä½ å¯ä»¥æ·»åŠ å¤šä¸ª é”® / å€¼å¯¹ï¼Œä½†æ˜¯åœ¨æ„é€ å½¢å¼ä¸­ä½ å¿…é¡»é€ä¸ªæ·»åŠ å±æ€§ã€‚PS:å…¶å®æˆ‘ä»¬ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ä½¿ç”¨å¯¹è±¡å­—é¢é‡å½¢å¼åˆ›å»ºå¯¹è±¡. 3.2 ç±»å‹åœ¨JavaScriptä¸­ä¸€å…±æœ‰6ä¸­ä¸»è¦ç±»å‹(æœ¯è¯­æ˜¯â€è¯­è¨€ç±»å‹â€) string number boolean null undefined object ç®€å•æ•°æ®ç±»å‹:å…¶ä¸­stringã€booleanã€numberã€null å’Œ undefinedå±äºç®€å•åŸºæœ¬ç±»å‹,å¹¶ä¸å±äºå¯¹è±¡.null æœ‰æ—¶ä¼šè¢«å½“ä½œä¸€ç§å¯¹è±¡ç±»å‹ï¼Œä½†æ˜¯è¿™å…¶å®åªæ˜¯è¯­è¨€æœ¬èº«çš„ä¸€ä¸ª bugï¼Œå³å¯¹ null æ‰§è¡Œtypeof null æ—¶ä¼šè¿”å›å­—ç¬¦ä¸² â€œobjectâ€ã€‚å®é™…ä¸Šï¼Œnull æœ¬èº«æ˜¯åŸºæœ¬ç±»å‹ã€‚PS: åŸå› æ˜¯è¿™æ ·çš„ï¼Œä¸åŒçš„å¯¹è±¡åœ¨åº•å±‚éƒ½è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶ï¼Œåœ¨ JavaScript ä¸­äºŒè¿›åˆ¶å‰ä¸‰ä½éƒ½ä¸º 0 çš„è¯ä¼šè¢«åˆ¤ æ–­ä¸º object ç±»å‹ï¼Œnull çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯å…¨ 0ï¼Œè‡ªç„¶å‰ä¸‰ä½ä¹Ÿæ˜¯ 0ï¼Œæ‰€ä»¥æ‰§è¡Œ typeof æ—¶ä¼šè¿”å›â€œobjectâ€ã€‚ å¯¹è±¡:å¯¹è±¡é™¤äº†æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨åˆ›å»ºçš„,JavaScriptå…¶å®å†…ç½®äº†å¾ˆå¤šå¯¹è±¡,ä¹Ÿå¯ä»¥è¯´æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»å‹.å†…ç½®å¯¹è±¡: String Number Boolean Object Function Array Date RegExp Error åœ¨ JavaScript ä¸­ï¼Œè¿™äº›å†…ç½®å¯¹è±¡å®é™…ä¸Šåªæ˜¯ä¸€äº›å†…ç½®å‡½æ•°ã€‚è¿™äº›å†…ç½®å‡½æ•°å¯ä»¥å½“ä½œæ„é€ å‡½æ•°(ç”± new äº§ç”Ÿçš„å‡½æ•°è°ƒç”¨â€”â€”å‚è§ç¬¬ 2 ç« )æ¥ä½¿ç”¨.å‡ ç‚¹è¯´æ˜: å‡½æ•°å°±æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»å‹(ä»æŠ€æœ¯è§’åº¦æ¥è¯´å°±æ˜¯â€œå¯è°ƒç”¨çš„å¯¹è±¡â€)ã€‚JavaScript ä¸­çš„å‡½æ•°æ˜¯â€œä¸€ç­‰å…¬æ°‘â€ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šå’Œæ™®é€šçš„å¯¹è±¡ä¸€æ ·(åªæ˜¯å¯ä»¥è°ƒç”¨)ï¼Œæ‰€ä»¥å¯ä»¥åƒæ“ä½œå…¶ä»–å¯¹è±¡ä¸€æ ·æ“ä½œå‡½æ•°(æ¯”å¦‚å½“ä½œå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°)ã€‚ é€šè¿‡å­—é¢é‡å½¢å¼åˆ›å»ºå­—ç¬¦ä¸²,æ•°å­—,å¸ƒå°”æ—¶,å¼•æ“ä¼šè‡ªåŠ¨æŠŠå­—é¢é‡è½¬æ¢æˆ String å¯¹è±¡,Numberå¯¹è±¡,Booleanå¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯å¯ä»¥è®¿å¯¹åº”å¯¹è±¡å†…ç½®çš„é—®å±æ€§å’Œæ–¹æ³•ã€‚ null å’Œ undefined æ²¡æœ‰å¯¹åº”çš„æ„é€ å½¢å¼ï¼Œå®ƒä»¬åªæœ‰æ–‡å­—å½¢å¼ã€‚ç›¸åï¼ŒDate åªæœ‰æ„é€ ï¼Œæ²¡æœ‰æ–‡å­—å½¢å¼ã€‚ å¯¹äº Objectã€Arrayã€Function å’Œ RegExp(æ­£åˆ™è¡¨è¾¾å¼)æ¥è¯´ï¼Œæ— è®ºä½¿ç”¨æ–‡å­—å½¢å¼è¿˜æ˜¯æ„é€ å½¢å¼ï¼Œå®ƒä»¬éƒ½æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯å­—é¢é‡(è¿™æ˜¯è‚¯å®šçš„,å› ä¸ºä¸ç®¡å“ªç§å½¢å¼ä¸€åˆ›å»ºå‡ºæ¥å°±æ˜¯å¯¹è±¡ç±»å‹,ä¸å¯èƒ½æ˜¯å…¶ä»–ç±»å‹,å®é™…ä¸Šæ˜¯ä¸å­˜åœ¨å­—é¢é‡è¿™ä¸€è¯´çš„)ã€‚ä½†æ˜¯ä½¿ç”¨æ„é€ å½¢å¼å¯ä»¥æä¾›ä¸€äº›é¢å¤–é€‰é¡¹(å†…ç½®)ã€‚ Error å¯¹è±¡å¾ˆå°‘åœ¨ä»£ç ä¸­æ˜¾å¼åˆ›å»ºï¼Œä¸€èˆ¬æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸æ—¶è¢«è‡ªåŠ¨åˆ›å»ºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ new Error(..) è¿™ç§æ„é€ å½¢å¼æ¥åˆ›å»ºï¼Œä¸è¿‡ä¸€èˆ¬æ¥è¯´ç”¨ä¸ç€ã€‚ 3.3 å†…å®¹å¯¹è±¡å±æ€§:ç”±ä¸€äº›å­˜å‚¨åœ¨ç‰¹å®šå‘½åä½ç½®çš„(ä»»æ„ç±»å‹çš„)å€¼.å±æ€§å:å­˜å‚¨åœ¨å¯¹è±¡å®¹å™¨å†…éƒ¨çš„å±æ€§çš„åç§°.å±æ€§å€¼å¹¶ä¸ä¼šå­˜åœ¨å¯¹è±¡å†….è€Œæ˜¯é€šè¿‡å±æ€§å(å°±åƒæŒ‡é’ˆ,ä»æŠ€æœ¯è§’åº¦æ¥è¯´å°±æ˜¯å¼•ç”¨)æ¥æŒ‡å‘è¿™äº›å€¼çœŸæ­£çš„å­˜å‚¨ä½ç½®(å°±åƒæˆ¿é—¨å·ä¸€æ ·).å±æ€§åçš„ä¸¤ç§å½¢å¼: ä½¿ç”¨.æ“ä½œç¬¦.ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„å½¢å¼.å®ƒé€šå¸¸è¢«ç§°ä¸ºâ€å±æ€§è®¿é—®â€. . æ“ä½œç¬¦ä¼šè¦æ±‚å±æ€§åæ»¡è¶³æ ‡è¯†ç¬¦çš„å‘½åè§„èŒƒ. ä½¿ç”¨[&quot;..&quot;]è¯­æ³•è¿›è¡Œè®¿é—®.è¿™ä¸ªé€šå¸¸è¢«ç§°ä¸ºâ€é”®è®¿é—®â€.[&quot;..&quot;]è¯­æ³•å¯ä»¥æ¥å—ä»»æ„UTF-8/Unicode å­—ç¬¦ä¸²ä½œä¸ºå±æ€§åã€‚å¹¶ä¸”[&quot;..&quot;]è¯­æ³•ä½¿ç”¨å­—ç¬¦ä¸²æ¥è®¿é—®å±æ€§,å¦‚æœä½ çš„å±æ€§åæ˜¯ä¸€ä¸ªå˜é‡,åˆ™å¯ä»¥ä½¿ç”¨ä¹¦ä¸­çš„ä¾‹å­myObject[idx]å½¢å¼è¿›è¡Œè®¿é—®.è¿™ä¹Ÿæ˜¯æœ€å¸¸ä½¿ç”¨â€é”®è®¿é—®â€çš„æƒ…å†µ.ä½†å¦‚æœidxæ˜¯å±æ€§ååˆ™è¿˜æ˜¯éœ€å†™æˆmyObject[&quot;idx&quot;]å­—ç¬¦ä¸²å½¢å¼. æ³¨æ„: åœ¨å¯¹è±¡ä¸­ï¼Œå±æ€§åæ°¸è¿œéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚å¦‚æœä½ ä½¿ç”¨ string(å­—é¢é‡)ä»¥å¤–çš„å…¶ä»–å€¼ä½œä¸ºå±æ€§ åï¼Œé‚£å®ƒé¦–å…ˆä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å³ä½¿æ˜¯æ•°å­—ä¹Ÿä¸ä¾‹å¤–ï¼Œè™½ç„¶åœ¨æ•°ç»„ä¸‹æ ‡ä¸­ä½¿ç”¨çš„çš„ ç¡®æ˜¯æ•°å­—ï¼Œä½†æ˜¯åœ¨å¯¹è±¡å±æ€§åä¸­æ•°å­—ä¼šè¢«è½¬æ¢æˆå­—ç¬¦ä¸² . è¡¥å……: è¿™é‡Œæˆ‘åœ¨ä¹¦ä¸­çš„ä¾‹å­åŸºç¡€ä¸Šè¿›è¡Œäº†ä¿®æ”¹,å¾—åˆ°è¿™ä¸ªä¾‹å­:123456789var myObject = &#123; a:2, idx:111&#125;;var idx="a";console.log( myObject[idx] ); //2console.log( myObject["idx"] ); //111console.log( myObject[this.idx] ); // 2 æ­¤æ—¶thisæ˜¯æŒ‡å‘window.[]é‡Œçš„thisåŒæ ·ç¬¦åˆä¸Šä¸€ç« æ‰€è®²çš„è§„åˆ™//ç»“æœæ˜¯å¦å’Œä½ æ‰€æƒ³å¾—ä¸€æ ·å‘¢? 3.3.1 å¯è®¡ç®—å±æ€§åES6 å¢åŠ äº†å¯è®¡ç®—å±æ€§åï¼Œå¯ä»¥åœ¨æ–‡å­—å½¢å¼ä¸­ä½¿ç”¨ [] åŒ…è£¹ä¸€ä¸ªè¡¨è¾¾å¼æ¥å½“ä½œå±æ€§å:12345678var prefix = "foo";var myObject = &#123; [prefix + "bar"]:"hello", [prefix + "baz"]: "world"&#125;;myObject["foobar"]; // hellomyObject["foobaz"]; // world 3.3.2 å±æ€§ä¸æ–¹æ³• æˆ‘ä»¬ç»å¸¸æŠŠå¯¹è±¡å†…éƒ¨å¼•ç”¨çš„å‡½æ•°ç§°ä¸ºâ€œæ–¹æ³•â€(çš„ç¡®å¦‚æ­¤). å®é™…ä¸Šå‡½æ•°å¹¶ä¸å±äºè¯¥å¯¹è±¡,å®ƒä¸è¿‡æ˜¯å¯¹å‡½æ•°çš„å¼•ç”¨ç½¢äº†.å¯¹è±¡å±æ€§è®¿é—®è¿”å›çš„å‡½æ•°å’Œå…¶ä»–å‡½æ•°æ²¡æœ‰ä»»ä½•åŒºåˆ«(é™¤äº†å¯èƒ½å‘ç”Ÿçš„éšå¼ç»‘å®šthisåˆ°è¯¥å¯¹è±¡)ã€‚ å³ä½¿ä½ åœ¨å¯¹è±¡çš„æ–‡å­—å½¢å¼ä¸­å£°æ˜ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œè¿™ä¸ªå‡½æ•°ä¹Ÿä¸ä¼šâ€œå±äºâ€è¿™ä¸ªå¯¹è±¡â€”â€” å®ƒä»¬åªæ˜¯å¯¹äºç›¸åŒå‡½æ•°å¯¹è±¡çš„å¤šä¸ªå¼•ç”¨ã€‚ 3.3.3 æ•°ç»„ æ•°ç»„æ”¯æŒ[]å½¢å¼è®¿é—®å‚¨å­˜çš„å€¼,å…¶ä¸­[]å†…çš„å€¼é»˜è®¤å½¢å¼ä¸ºæ•°å€¼ä¸‹æ ‡(ä¸ºä»0å¼€å§‹çš„æ•´æ•°,ä¹Ÿå°±æ˜¯å¸¸è¯´çš„ç´¢å¼•).ä¾‹å¦‚myArray[0] æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥è™½ç„¶æ¯ä¸ªä¸‹æ ‡éƒ½æ˜¯æ•´æ•°ï¼Œä½ ä»ç„¶å¯ä»¥ç»™æ•°ç»„æ·»åŠ å±æ€§.ä¾‹å¦‚myArray.baz = &quot;baz&quot;.æ³¨æ„:æ·»åŠ æ–°å±æ€§å,è™½ç„¶å¯ä»¥è®¿é—®,ä½†æ•°ç»„çš„ length å€¼ä¸ä¼šæ”¹å˜. æ•°ç»„å¯ä»¥é€šè¿‡myArray[1]=11;myArray[&quot;2&quot;]=22;è¿™ç§å½¢å¼å¯¹æ•°ç»„å†…å®¹è¿›è¡Œä¿®æ”¹,æ·»åŠ . è™½ç„¶æ•°ç»„ä¹Ÿå¯ä»¥å’Œå¯¹è±¡ä¸€æ ·é€šè¿‡é”®/å€¼ å¯¹ å½¢å¼æ¥ä½¿ç”¨.ä½†JSå·²ç»å¯¹æ•°ç»„çš„è¡Œä¸ºå’Œç”¨é€”è¿›è¡Œäº†ä¼˜åŒ–.æ‰€ä»¥è¿˜æ˜¯å»ºè®®ä½¿ç”¨é»˜è®¤çš„ä¸‹æ ‡/å€¼ å¯¹ å½¢å¼æ¥ä½¿ç”¨. 3.3.4 å¤åˆ¶å¯¹è±¡ å¤åˆ¶åˆ†ä¸ºæµ…æ‹·è´å’Œæ·±æ‹·è´.æµ…æ‹·è´ä¼šå¯¹å¯¹è±¡ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå¤åˆ¶(åœ¨å†…å­˜ä¸­å¼€è¾Ÿæ–°çš„åŒºåŸŸ),å¯¹äºå¯¹è±¡åˆ™æ˜¯ç»§ç»­å¼•ç”¨.è€Œä¸æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªâ€ä¸€æ ·çš„â€å¯¹è±¡.æ·±æ‹·è´åˆ™æ˜¯å¯¹å…¶ä¸­çš„æ‰€æœ‰å†…(å®¹åŒ…æ‹¬å¯¹è±¡)è¿›è¡Œæ·±å±‚æ¬¡çš„å¤åˆ¶. ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥é€šè¿‡JSONæ¥å¤åˆ¶å¯¹è±¡.var newObj = JSON.parse( JSON.stringify( someObj ) );.ä½†éœ€è¦æŒ‡å‡ºçš„æ˜¯è¿™ç§æ–¹æ³•å¯¹äºåŒ…å«functionå‡½æ•°æˆ–è€…Dateç±»å‹çš„å¯¹è±¡åˆ™ä¸ç®¡ç”¨! ES6 å®šä¹‰äº† Object.assign(..) æ–¹æ³•æ¥å®ç°æµ…å¤åˆ¶ã€‚å…·ä½“ç”¨æ³•åœ¨è¿™å°±ä¸èµ˜è¿°äº†. 3.3.5 å±æ€§æè¿°ç¬¦ä» ES5 å¼€å§‹ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½å…·å¤‡äº†å±æ€§æè¿°ç¬¦ã€‚ æŸ¥çœ‹å±æ€§æè¿°ç¬¦: å¯ä»¥ä½¿ç”¨Object.getOwnPropertyDescriptor( myObject, â€œaâ€ );æ–¹æ³•æŸ¥çœ‹myObjectå¯¹è±¡é‡Œå±æ€§açš„å±æ€§æè¿°ç¬¦. é…ç½®å±æ€§æè¿°ç¬¦: å¯ä»¥ä½¿ç”¨Object.defineProperty(..)æ–¹æ³•å¯¹å±æ€§çš„å±æ€§æè¿°ç¬¦å°±åƒé…ç½®.ä¸¾ä¸ªä¾‹å­:123456789 var myObject = &#123;&#125;;Object.defineProperty( myObject, "a", &#123; value: 2, writable: true, configurable: true, enumerable: true &#125; );myObject.a; // 2//è¯¥æ–¹æ³•å¯ä»¥é…ç½®å››ä¸ªå±æ€§æè¿°ç¬¦ æ³¨æ„: ä¹¦ä¸­å…³äºå±æ€§æè¿°ç¬¦ä¹Ÿè¢«ç§°ä¸ºâ€œæ•°æ®æè¿°ç¬¦â€å…¶å®æ˜¯ä¸å¤Ÿå‡†ç¡®çš„.å¯¹è±¡é‡Œç›®å‰å­˜åœ¨çš„å±æ€§æè¿°ç¬¦æœ‰ä¸¤ç§ä¸»è¦å½¢å¼ï¼šæ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ã€‚æ•°æ®æè¿°ç¬¦æ˜¯ä¸€ä¸ªå…·æœ‰å€¼çš„å±æ€§ï¼Œè¯¥å€¼å¯èƒ½æ˜¯å¯å†™çš„ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯å¯å†™çš„ã€‚å­˜å–æè¿°ç¬¦æ˜¯ç”±getterå’Œsetterå‡½æ•°å¯¹æè¿°çš„å±æ€§ã€‚æè¿°ç¬¦å¿…é¡»æ˜¯è¿™ä¸¤ç§å½¢å¼ä¹‹ä¸€ï¼›ä¸èƒ½åŒæ—¶æ˜¯ä¸¤è€…ã€‚(getterå’Œsetteræ˜¯åé¢é©¬ä¸Šè¦è®²åˆ°çš„ä¸¤ä¸ªæè¿°ç¬¦)å®ƒä»¬çš„å…³ç³»å¦‚ä¸‹:(è¯¦æƒ…å¯ä»¥æŸ¥çœ‹MDNçš„è§£é‡Š) configurable enumerable value writable get set æ•°æ®æè¿°ç¬¦ Yes Yes Yes Yes No No å­˜å–æè¿°ç¬¦ Yes Yes No No Yes Yes å¦‚æœä¸€ä¸ªæè¿°ç¬¦ä¸å…·æœ‰value,writable,get å’Œ set ä»»æ„ä¸€ä¸ªå…³é”®å­—ï¼Œé‚£ä¹ˆå®ƒå°†è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®æè¿°ç¬¦ã€‚å¦‚æœä¸€ä¸ªæè¿°ç¬¦åŒæ—¶æœ‰(valueæˆ–writable)å’Œ(getæˆ–set)å…³é”®å­—ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ã€‚ valueå°±æ˜¯è¯¥å±æ€§å¯¹åº”çš„å€¼ã€‚é»˜è®¤ä¸º undefinedã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»å‰©ä¸‹çš„ä¸‰ä¸ªå±æ€§æè¿°ç¬¦é”®å€¼: 1. Writable å†³å®šæ˜¯å¦å¯ä»¥ä¿®æ”¹å±æ€§çš„å€¼ã€‚å½“è¢«è®¾ç½®ä¸ºfalseå,å†å¯¹å±æ€§å€¼è¿›è¡Œä¿®æ”¹,åˆ™ä¼šé™é»˜å¤±è´¥(silently failed,ä¿®æ”¹ä¸æˆåŠŸ,ä¹Ÿä¸æŠ¥é”™)äº†ã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™ä¼šæŠ¥å‡ºTypeErroré”™è¯¯. 2. Configurable å†³å®šå±æ€§æè¿°ç¬¦æ˜¯å¦å¯é…ç½®.å¦‚æœä¸ºtrue,å°±å¯ä»¥ä½¿ç”¨ defineProperty(..) æ–¹æ³•æ¥ä¿®æ”¹å±æ€§æè¿°ç¬¦.æ³¨æ„:ä¸ç®¡æ˜¯ä¸æ˜¯å¤„äºä¸¥æ ¼æ¨¡å¼ï¼Œä¿®æ”¹ä¸€ä¸ªä¸å¯é…ç½®çš„å±æ€§æè¿°ç¬¦éƒ½ä¼šå‡ºé”™ã€‚å¹¶ä¸”æŠŠ configurable ä¿®æ”¹æˆ false æ˜¯å•å‘æ“ä½œï¼Œæ— æ³•æ’¤é”€! ä½†æ˜¯æœ‰ä¸ªä¾‹å¤–å³ä¾¿å±æ€§æ˜¯ configurable:falseï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ æŠŠ writable çš„çŠ¶æ€ç”± true æ”¹ä¸º falseï¼Œä½†æ˜¯æ— æ³•ç”± false æ”¹ä¸º trueã€‚é™¤äº†æ— æ³•ä¿®æ”¹ï¼Œconfigurable:false è¿˜ä¼šç¦æ­¢åˆ é™¤è¿™ä¸ªå±æ€§. 3. Enumerable å†³å®šè¯¥å±æ€§æ˜¯å¦ä¼šå‡ºç°åœ¨å¯¹è±¡çš„å±æ€§æšä¸¾ä¸­.æ¯”å¦‚è¯´ for..in å¾ªç¯ã€‚å¦‚æœæŠŠ enumerable è®¾ç½®æˆ falseï¼Œè¿™ä¸ªå±æ€§å°±ä¸ä¼šå‡ºç°åœ¨æšä¸¾ä¸­ï¼Œè™½ç„¶ä»ç„¶å¯ä»¥æ­£å¸¸è®¿é—®å®ƒã€‚ç›¸å¯¹åœ°ï¼Œè®¾ç½®æˆ true å°±ä¼šè®©å®ƒå‡ºç°åœ¨æšä¸¾ä¸­ã€‚ 3.3.6 ä¸å˜æ€§é™¤äº†ä¸Šé¢æåˆ°çš„Object.defineProperty(..),ES5è¿˜å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹æ³•æ¥å®ç°å±æ€§æˆ–è€…å¯¹è±¡çš„ä¸å¯å˜.æ³¨æ„: è¿™äº›æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åªèƒ½æµ…ä¸å˜,å¦‚æœç›®æ ‡å¯¹è±¡å¼•ç”¨äº†å…¶ä»–å¯¹è±¡(æ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ï¼Œç­‰)ï¼Œå…¶ä»–å¯¹è±¡çš„å†…å®¹ä¸å—å½±å“ï¼Œä»ç„¶æ˜¯å¯å˜çš„.ç±»ä¼¼äºæµ…æ‹·è´. è¯´æ˜: åœ¨ JavaScript ç¨‹åºä¸­å¾ˆå°‘éœ€è¦æ·±ä¸å¯å˜æ€§ã€‚ æœ‰äº›ç‰¹æ®Šæƒ…å†µå¯èƒ½éœ€è¦è¿™æ ·åšï¼Œä½†æ˜¯æ ¹æ®é€šç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚æœä½ å‘ç°éœ€è¦å¯†å°æˆ–è€…å†»ç»“æ‰€æœ‰çš„å¯¹è±¡ï¼Œé‚£ä½ æˆ–è®¸åº”å½“é€€ä¸€æ­¥ï¼Œé‡æ–°æ€è€ƒä¸€ä¸‹ç¨‹åºçš„è®¾è®¡ï¼Œè®©å®ƒèƒ½æ›´å¥½åœ°åº”å¯¹å¯¹è±¡å€¼çš„æ”¹å˜ã€‚ æ–¹æ³•: 1. å¯¹è±¡å¸¸é‡(ä¸å¯æ”¹) ç»“åˆ writable:false å’Œ configurable:false å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªçœŸæ­£çš„å¸¸é‡å±æ€§(ä¸å¯ä¿®æ”¹ã€é‡å®šä¹‰æˆ–è€…åˆ é™¤) 2. ç¦æ­¢æ‰©å±•(ä¸å¯å¢) ä½¿ç”¨ Object.prevent Extensions(myObject),å¯ä»¥ç¦æ­¢ä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°å±æ€§å¹¶ä¸”ä¿ç•™å·²æœ‰å±æ€§.åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ›å»ºå±æ€§ b ä¼šé™é»˜å¤±è´¥ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°†ä¼šæŠ›å‡º TypeError é”™è¯¯ã€‚ 3. å¯†å°(ä¸å¯é…ç½®,ä½†å¯ä¿®æ”¹) ä½¿ç”¨Object.seal(..) ä¼šåˆ›å»ºä¸€ä¸ªâ€œå¯†å°â€çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šä¼šåœ¨ä¸€ä¸ªç°æœ‰å¯¹è±¡ä¸Šè°ƒç”¨Object.preventExtensions(..) å¹¶æŠŠæ‰€æœ‰ç°æœ‰å±æ€§æ ‡è®°ä¸º configurable:falseã€‚å¯†å°ä¹‹åä¸ä»…ä¸èƒ½æ·»åŠ æ–°å±æ€§ï¼Œä¹Ÿä¸èƒ½é‡æ–°é…ç½®æˆ–è€…åˆ é™¤ä»»ä½•ç°æœ‰å±æ€§(è™½ç„¶å¯ä»¥ä¿®æ”¹å±æ€§çš„å€¼)ã€‚ 4. å†»ç»“(ä¸å¯é…ç½®,ä¹Ÿä¸å¯ä¿®æ”¹) Object.freeze(..) ä¼šåˆ›å»ºä¸€ä¸ªå†»ç»“å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šä¼šåœ¨ä¸€ä¸ªç°æœ‰å¯¹è±¡ä¸Šè°ƒç”¨ Object.seal(..) å¹¶æŠŠæ‰€æœ‰â€œæ•°æ®è®¿é—®â€å±æ€§æ ‡è®°ä¸º writable:falseï¼Œè¿™æ ·å°±æ— æ³•ä¿®æ”¹å®ƒä»¬çš„å€¼ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ä½ å¯ä»¥åº”ç”¨åœ¨å¯¹è±¡ä¸Šçš„çº§åˆ«æœ€é«˜çš„ä¸å¯å˜æ€§ï¼Œå®ƒä¼šç¦æ­¢å¯¹äºå¯¹è±¡æœ¬èº«åŠå…¶ä»»æ„ç›´æ¥å±æ€§çš„ä¿®æ”¹(ä¸è¿‡å°±åƒæˆ‘ä»¬ä¹‹å‰è¯´è¿‡çš„ï¼Œè¿™ä¸ªå¯¹è±¡å¼•ç”¨çš„å…¶ä»–å¯¹è±¡æ˜¯ä¸å—å½±å“çš„)ã€‚ æ³¨æ„: ä½ å¯ä»¥â€œæ·±åº¦å†»ç»“â€ä¸€ä¸ªå¯¹è±¡(è¿å¼•ç”¨çš„å¯¹è±¡ä¹Ÿå†»ç»“)ï¼Œå…·ä½“æ–¹æ³•ä¸ºï¼Œé¦–å…ˆåœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ Object.freeze(..)ï¼Œ ç„¶åéå†å®ƒå¼•ç”¨çš„æ‰€æœ‰å¯¹è±¡å¹¶åœ¨è¿™äº›å¯¹è±¡ä¸Šè°ƒç”¨ Object.freeze(..)ã€‚ä½†æ˜¯ä¸€å®šè¦è°¨æ…!å› ä¸ºä½ å¼•ç”¨çš„å¯¹è±¡å¯èƒ½ä¼šåœ¨å…¶ä»–åœ°å‘ä¹Ÿè¢«å¼•ç”¨. è¯´æ˜: åœ¨ JavaScript ç¨‹åºä¸­å¾ˆå°‘éœ€è¦æ·±ä¸å¯å˜æ€§ã€‚æœ‰äº›ç‰¹æ®Šæƒ…å†µå¯èƒ½éœ€è¦è¿™æ ·åšï¼Œ ä½†æ˜¯æ ¹æ®é€šç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚æœä½ å‘ç°éœ€è¦å¯†å°æˆ–è€…å†»ç»“æ‰€æœ‰çš„å¯¹è±¡ï¼Œé‚£ä½ æˆ–è®¸åº”å½“é€€ä¸€æ­¥ï¼Œé‡æ–°æ€è€ƒä¸€ä¸‹ç¨‹åºçš„è®¾è®¡ï¼Œè®©å®ƒèƒ½æ›´å¥½åœ°åº”å¯¹å¯¹è±¡å€¼çš„æ”¹å˜ã€‚ 3.3.7 [[Get]]1234var myObject = &#123; a: 2&#125;;myObject.a; // 2 myObject.aæ˜¯æ€ä¹ˆå–åˆ°å€¼2çš„?myObject.a é€šè¿‡å¯¹è±¡é»˜è®¤å†…ç½®çš„[[Get]] æ“ä½œ(æœ‰ç‚¹åƒå‡½æ•°è°ƒç”¨:[Get]).é¦–å…ˆå®ƒä¼šåœ¨å¯¹è±¡ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åç§°ç›¸åŒçš„å±æ€§ï¼Œ å¦‚æœæ‰¾åˆ°å°±ä¼šè¿”å›è¿™ä¸ªå±æ€§çš„å€¼ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åç§°ç›¸åŒçš„å±æ€§ï¼ŒæŒ‰ç…§ [[Get]] ç®—æ³•çš„å®šä¹‰ä¼šæ‰§è¡Œå¦å¤–ä¸€ç§éå¸¸é‡è¦çš„è¡Œä¸ºã€‚å…¶å®å°±æ˜¯éå†å¯èƒ½å­˜åœ¨çš„ [[Prototype]] é“¾ï¼Œä¹Ÿå°±æ˜¯åœ¨åŸå‹é“¾ä¸Šå¯»æ‰¾è¯¥å±æ€§ã€‚å¦‚æœä»ç„¶éƒ½æ²¡æœ‰æ‰¾åˆ°åç§°ç›¸åŒçš„å±æ€§ï¼Œé‚£ [[Get]] æ“ä½œä¼šè¿”å›å€¼ undefined. æ³¨æ„: å¦‚æœä½ å¼•ç”¨äº†ä¸€ä¸ªå½“å‰è¯æ³•ä½œç”¨åŸŸä¸­ä¸å­˜åœ¨çš„å˜é‡ï¼Œå¹¶ä¸ä¼šåƒå¯¹è±¡å±æ€§ä¸€æ ·è¿”å› undefinedï¼Œè€Œæ˜¯ä¼šæŠ›å‡ºä¸€ä¸ª ReferenceError å¼‚å¸¸. 3.3.8 [[Put]]æ—¢ç„¶æœ‰å¯ä»¥è·å–å±æ€§å€¼çš„ [[Get]] æ“ä½œï¼Œå°±ä¸€å®šæœ‰å¯¹åº”çš„ [[Put]] æ¥è®¾ç½®æˆ–è€…åˆ›å»ºå±æ€§. [[Put]] è¢«è§¦å‘æ—¶çš„æ“ä½œåˆ†ä¸ºä¸¤ä¸ªæƒ…å†µ:1. å¯¹è±¡ä¸­å·²ç»å­˜åœ¨è¿™ä¸ªå±æ€§ 2. å¯¹è±¡ä¸­ä¸å­˜åœ¨è¿™ä¸ªå±æ€§. å¦‚æœå¯¹è±¡ä¸­å·²ç»å­˜åœ¨è¿™ä¸ªå±æ€§,[[Put]] ç®—æ³•å¤§è‡´ä¼šæ£€æŸ¥ä¸‹é¢è¿™äº›å†…å®¹: å±æ€§æ˜¯å¦æ˜¯è®¿é—®æè¿°ç¬¦(å‚è§ä¸‹ä¸€èŠ‚)?å¦‚æœæ˜¯å¹¶ä¸”å­˜åœ¨setterå°±è°ƒç”¨setterã€‚ å±æ€§çš„æ•°æ®æè¿°ç¬¦ä¸­writableæ˜¯å¦æ˜¯false?å¦‚æœæ˜¯ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹é™é»˜å¤±è´¥ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ›å‡º TypeError å¼‚å¸¸ã€‚ å¦‚æœéƒ½ä¸æ˜¯ï¼Œå°†è¯¥å€¼è®¾ç½®ä¸ºå±æ€§çš„å€¼ã€‚ å¦‚æœå¯¹è±¡ä¸­ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œ[[Put]] æ“ä½œä¼šæ›´åŠ å¤æ‚ã€‚ä¼šåœ¨ç¬¬ 5 ç« è®¨è®º [[Prototype]] æ—¶è¯¦ç»†è¿›è¡Œä»‹ç»ã€‚ 3.3.9 Getterå’ŒSetterå¯¹è±¡é»˜è®¤çš„ [[Put]] å’Œ [[Get]] æ“ä½œåˆ†åˆ«å¯ä»¥æ§åˆ¶å±æ€§å€¼çš„è®¾ç½®å’Œè·å–ã€‚ç›®å‰æˆ‘ä»¬è¿˜æ— æ³•æ“ä½œ[[Get]] å’Œ [[Put]]æ¥æ”¹å†™æ•´ä¸ªå¯¹è±¡ ,ä½†æ˜¯åœ¨ES5ä¸­å¯ä»¥ä½¿ç”¨ getter å’Œ setter æ”¹å†™éƒ¨åˆ†é»˜è®¤æ“ä½œ,åªèƒ½åº”ç”¨åœ¨å•ä¸ªå±æ€§ä¸Šï¼Œæ— æ³•åº”ç”¨åœ¨æ•´ä¸ªå¯¹è±¡ä¸Šã€‚ æ³¨æ„: ä¹¦ä¸­åé¢è¯´çš„è®¿é—®æè¿°ç¬¦å°±æ˜¯å­˜å–æè¿°ç¬¦.å…³äºå±æ€§æè¿°ç¬¦,å­˜å–æè¿°ç¬¦åŠæ•°æ®æè¿°ç¬¦å¯ä»¥æŸ¥çœ‹MDNçš„è§£é‡Š) getter:getter æ˜¯ä¸€ä¸ªéšè—å‡½æ•°ï¼Œä¼šåœ¨è·å–å±æ€§å€¼æ—¶è°ƒç”¨ã€‚åŒæ—¶ä¼šè¦†ç›–è¯¥å•ä¸ªå±æ€§é»˜è®¤çš„ [[Get]]æ“ä½œ.å½“ä½ è®¾ç½®getteræ—¶,ä¸èƒ½åŒæ—¶å†è®¾ç½®valueæˆ–writable,å¦åˆ™å°±ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸.å¹¶ä¸”å½“ä½ è®¾ç½®getteræˆ–setteræ—¶,JavaScript ä¼šå¿½ç•¥å®ƒä»¬çš„ value å’Œ writable ç‰¹æ€§. è¯­æ³•: {get prop() { ... } }æˆ–{get [expression]() { ... } }.å…¶ä¸­prop:è¦è®¾ç½®çš„å±æ€§å. expression:ä» ECMAScript 2015 å¼€å§‹å¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§å.ä½¿ç”¨æ–¹å¼:123456789101112131415161718192021222324var myObject = &#123; a: 1111, //åœ¨åé¢ä¼šå‘ç°myObject.aä¸º2,è¿™æ˜¯å› ä¸ºè®¾ç½®äº†getteræ‰€ä»¥å¿½ç•¥äº†valueç‰¹æ€§. //æ–¹å¼ä¸€:åœ¨æ–°å¯¹è±¡åˆå§‹åŒ–æ—¶å®šä¹‰ä¸€ä¸ªgetter get a() &#123; return 2 &#125;&#125;;Object.defineProperty( myObject, // ç›®æ ‡å¯¹è±¡ "b", // å±æ€§å &#123; // æ–¹å¼äºŒ:ä½¿ç”¨definePropertyåœ¨ç°æœ‰å¯¹è±¡ä¸Šå®šä¹‰ getter get: function()&#123; return this.a * 2 &#125;, // ç¡®ä¿ b ä¼šå‡ºç°åœ¨å¯¹è±¡çš„å±æ€§åˆ—è¡¨ä¸­ enumerable: true &#125;);myObject.a = 3; //å› ä¸ºè®¾ç½®äº†getteræ‰€ä»¥å¿½ç•¥äº†writableç‰¹æ€§.æ‰€ä»¥è¿™é‡Œèµ‹å€¼æ²¡æˆåŠŸmyObject.a; // 2myObject.b; // 4delete myObject.a;//å¯ä»¥ä½¿ç”¨deleteæ“ä½œç¬¦åˆ é™¤ setter:setter æ˜¯ä¸€ä¸ªéšè—å‡½æ•°ï¼Œä¼šåœ¨è·å–å±æ€§å€¼æ—¶è°ƒç”¨ã€‚åŒæ—¶ä¼šè¦†ç›–è¯¥å•ä¸ªå±æ€§é»˜è®¤çš„ [[Put]]æ“ä½œ(ä¹Ÿå°±æ˜¯èµ‹å€¼æ“ä½œ).å½“ä½ è®¾ç½®setteræ—¶,ä¸èƒ½åŒæ—¶å†è®¾ç½®valueæˆ–writable,å¦åˆ™å°±ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸.å¹¶ä¸”å½“ä½ è®¾ç½®getteræˆ–setteræ—¶,JavaScript ä¼šå¿½ç•¥å®ƒä»¬çš„ value å’Œ writable ç‰¹æ€§. è¯­æ³•: {set prop(val) { . . . }}æˆ–{set [expression](val) { . . . }}.å…¶ä¸­prop:è¦è®¾ç½®çš„å±æ€§å. val:ç”¨äºä¿å­˜å°è¯•åˆ†é…ç»™propçš„å€¼çš„å˜é‡çš„ä¸€ä¸ªåˆ«åã€‚expression:ä» ECMAScript 2015 å¼€å§‹å¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§å.ä½¿ç”¨æ–¹å¼:1234567891011121314151617181920212223242526272829303132var myObject = &#123; //æ³¨æ„:é€šå¸¸æ¥è¯´ getter å’Œ setter æ˜¯æˆå¯¹å‡ºç°çš„(åªå®šä¹‰ä¸€ä¸ªçš„è¯ é€šå¸¸ä¼šäº§ç”Ÿæ„æ–™ä¹‹å¤–çš„è¡Œä¸º): //æ–¹å¼ä¸€:åœ¨æ–°å¯¹è±¡åˆå§‹åŒ–æ—¶å®šä¹‰ä¸€ä¸ªsetter set a(val) &#123; this._a_ = val * 2 &#125;, get a() &#123; return this._a_ &#125;&#125;;Object.defineProperty( myObject, // ç›®æ ‡å¯¹è±¡ "b", // å±æ€§å &#123; set: function(val)&#123; this._b_ = val * 3 &#125;, // æ–¹å¼äºŒ:ä½¿ç”¨definePropertyåœ¨ç°æœ‰å¯¹è±¡ä¸Šå®šä¹‰ setter get: function()&#123; return this._b_ &#125;, // ç¡®ä¿ b ä¼šå‡ºç°åœ¨å¯¹è±¡çš„å±æ€§åˆ—è¡¨ä¸­ enumerable: true &#125;);myObject.a = 2; myObject.b = 3; console.log(myObject.a); //4console.log(myObject.b);//9console.log(myObject._a_);//4console.log(myObject._b_);//9delete myObject.a;//å¯ä»¥ä½¿ç”¨deleteæ“ä½œç¬¦åˆ é™¤ 3.3.10 å­˜åœ¨æ€§å±æ€§å­˜åœ¨æ€§:å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§(å‡†ç¡®æ¥è¯´æ˜¯æ£€æŸ¥è¿™ä¸ªå±æ€§åæ˜¯å¦å­˜åœ¨),è¿™æ—¶å°±éœ€è¦ç”¨åˆ°: inæ“ä½œç¬¦in æ“ä½œç¬¦ä¼šæ£€æŸ¥å±æ€§æ˜¯å¦åœ¨å¯¹è±¡åŠå…¶ [[Prototype]] åŸå‹é“¾ä¸­(å‚è§ç¬¬ 5 ç« )ã€‚ hasOwnProperty(..)hasOwnProperty(..) åªä¼šæ£€æŸ¥å±æ€§æ˜¯å¦åœ¨ myObject å¯¹è±¡ä¸­ï¼Œä¸ä¼šæ£€æŸ¥ [[Prototype]] é“¾ã€‚ æ³¨æ„: 1.å¦‚æœæœ‰çš„å¯¹è±¡å¯èƒ½æ²¡æœ‰è¿æ¥åˆ° Object.prototype( é€šè¿‡Object. create(null) æ¥åˆ›å»ºâ€”â€”å‚è§ç¬¬ 5 ç« )ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½¢å¦‚myObejct.hasOwnProperty(..) å°±ä¼šå¤±è´¥ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨ä¸€ç§æ›´åŠ å¼ºç¡¬çš„æ–¹æ³•æ¥è¿›è¡Œåˆ¤æ–­:Object.prototype.hasOwnProperty. call(myObject,â€aâ€)ï¼Œå®ƒå€Ÿç”¨åŸºç¡€çš„ hasOwnProperty(..) æ–¹æ³•å¹¶æŠŠå®ƒæ˜¾å¼ç»‘å®š(å‚è§ç¬¬2ç« )åˆ° myObject ä¸Šã€‚ 2.å¯¹äºæ•°ç»„æ¥è¯´,ä¸è¦ä½¿ç”¨inæ“ä½œç¬¦,å› ä¸ºå®ƒæ£€æŸ¥çš„æ˜¯å±æ€§å,åœ¨æ•°ç»„ä¸­å±æ€§åå°±æ˜¯ç´¢å¼•,å®ƒå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€å…³æ³¨çš„é‡ç‚¹.å¯¹äºæ•°ç»„æˆ‘ä»¬æ›´å…³æ³¨çš„æ˜¯å®ƒæ‰€å­˜çš„å€¼,æ‰€ä»¥å¯¹äºæ•°ç»„æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦å­˜åœ¨è¿˜æ˜¯é‡‡ç”¨indexOfæ–¹æ³•. å±æ€§å¯æšä¸¾æ€§:å¦‚æœä¸€ä¸ªå±æ€§å­˜åœ¨,ä¸”å®ƒçš„enumerable å±æ€§æè¿°ç¬¦ä¸ºtrueæ—¶.åˆ™å®ƒæ˜¯å¯æšä¸¾çš„.å¹¶ä¸”å¯ä»¥è¢«for..in å¾ªç¯.ä¸€ä¸ªå±æ€§ä¸ä»…ä»…éœ€è¦å­˜åœ¨,è¿˜éœ€è¦å®ƒçš„enumerable ä¸ºtrueæ‰æ˜¯å¯æšä¸¾çš„,æ‰èƒ½è¢«forâ€¦inéå†åˆ°.æ³¨æ„: forâ€¦inä¸é€‚åˆå¯¹æ•°ç»„è¿›è¡Œéå†,å¯¹æ•°ç»„çš„éå†è¿˜æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„forå¾ªç¯. å¯¹å±æ€§çš„å¯æšä¸¾æ€§åˆ¤æ–­,åˆ™éœ€è¦ç”¨åˆ°ä»¥ä¸‹å‡ ç§æ–¹æ³•: propertyIsEnumerable(..) ä¼šæ£€æŸ¥ç»™å®šçš„å±æ€§åæ˜¯å¦ç›´æ¥å­˜åœ¨äºå¯¹è±¡ä¸­(è€Œä¸æ˜¯åœ¨åŸå‹é“¾ä¸Š)å¹¶ä¸”æ»¡è¶³ enumerable:trueã€‚ Object.keys(..) ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å¯æšä¸¾å±æ€§. Object.getOwnPropertyNames(..)ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å±æ€§ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦å¯æšä¸¾ã€‚ 3.4 éå†å…³äºè¿™èŠ‚æˆ‘è§‰å¾—è¿˜æ˜¯ä»¥ç†æ¸…for..inå’Œfor..ofä¸ºä¸».åé¢å»¶ä¼¸çš„@@iteratoråŠSymbol.iteratorçš„ä½¿ç”¨,æ²¡å¿…è¦è¿‡äºæ·±ç©¶.æ³¨æ„ä¹¦ä¸­123é¡µç¬¬äºŒè¡Œdone æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è¿˜æœ‰å¯ä»¥éå†çš„å€¼ã€‚æœ‰ä¸ªé”™è¯¯,åº”è¯¥æ”¹æˆdone æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸã€‚å¦åˆ™ä½ åœ¨çœ‹åé¢å®ƒçš„è¯´æ˜æ—¶ä¼šæ„Ÿè§‰åˆ°è‡ªç›¸çŸ›ç›¾.è¿™é‡Œæˆ‘ä¹Ÿæ˜¯ä»¥for..inå’Œfor..ofä¸ºä¸»è¿›è¡Œè¯´æ˜,ä¹Ÿæ›´è´´è¿‘æˆ‘ä»¬å®é™…ä½¿ç”¨. for..in for..in å¾ªç¯å¯ä»¥ç”¨æ¥éå†å¯¹è±¡çš„å¯æšä¸¾å±æ€§åˆ—è¡¨(åŒ…æ‹¬ [[Prototype]] é“¾)ã€‚ å®é™…ä¸Šfor..inéå†çš„å¹¶ä¸æ˜¯å±æ€§å€¼,è€Œæ˜¯å±æ€§å(å³é”®å key).æ‰€ä»¥ä½ æƒ³è·å–å±æ€§å€¼è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨ä½¿ç”¨obj[key]æ¥è·å–. ä¸€èˆ¬åœ¨éå†å¯¹è±¡æ—¶,æ¨èä½¿ç”¨for..in.å½“ç„¶æ•°ç»„ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨for..inçš„.åœ¨éå†æ•°ç»„æ—¶,æ¨èè¿˜æ˜¯ä½¿ç”¨for..of. for..of ES6 å¢åŠ äº†ä¸€ç§ç”¨æ¥éå†æ•°ç»„çš„ for..of å¾ªç¯è¯­æ³•(å¦‚æœå¯¹è±¡æœ¬èº«å®šä¹‰äº†è¿­ä»£å™¨çš„è¯ä¹Ÿå¯ä»¥éå†å¯¹è±¡) for..ofä¸for..inæœ€å¤§çš„ä¸åŒç‚¹æ˜¯,å®ƒå¾ªç¯çš„æ˜¯å±æ€§å€¼,è€Œä¸æ˜¯å±æ€§å.ä¸è¿‡å®ƒåªå¾ªç¯æ•°ç»„é‡Œå­˜æ”¾çš„å€¼,ä¸ä¼šæ¶‰åŠåˆ°å¯¹è±¡é‡Œçš„key.(å…³äºè¿™ä¸ªæˆ‘åé¢çš„ä¾‹å­é‡Œä¼šè¯´å…·ä½“å¯¹æ¯”æ˜çš„) for..of å¾ªç¯é¦–å…ˆä¼šå‘è¢«è®¿é—®å¯¹è±¡è¯·æ±‚ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œç„¶åé€šè¿‡è°ƒç”¨è¿­ä»£å™¨å¯¹è±¡çš„next() æ–¹æ³•æ¥éå†æ‰€æœ‰è¿”å›å€¼ã€‚æ•°ç»„æœ‰å†…ç½®çš„ @@iteratorï¼Œ(å¯¹è±¡æ²¡æœ‰,æ‰€ä»¥ä¸èƒ½ä½¿ç”¨for..of,é™¤éæˆ‘ä»¬è‡ªå·±å®šä¹‰ä¸€ä¸ª)å› æ­¤ for..of å¯ä»¥ç›´æ¥åº”ç”¨åœ¨æ•°ç»„ä¸Šã€‚ ä¾‹å­æ¯”è¾ƒ1234567891011let arr = ['shotCat',111,&#123;a:'1',b:'2'&#125;]arr.say="IG niu pi!"//ä½¿ç”¨for..inå¾ªç¯for(let index in arr)&#123; console.log(arr[index]);//shotCat 111 &#123;a:'1',b:'2'&#125; IG niu pi!&#125;//ä½¿ç”¨for..ofå¾ªç¯for(var value of arr)&#123; console.log(value);//shotCat 111 &#123;a:'1',b:'2'&#125;&#125;//æ³¨æ„ for..ofå¹¶æ²¡æœ‰éå†å¾—åˆ°` IG niu pi!`.åŸå› æˆ‘å‰é¢è¯´è¿‡`å®ƒåªå¾ªç¯æ•°ç»„é‡Œå­˜æ”¾çš„å€¼,ä¸ä¼šæ¶‰åŠåˆ°å¯¹è±¡é‡Œçš„key.`æ›´ä¸ç”¨è¯´ [[Prototype]] é“¾.(for..inåˆ™ä¼š) å¦‚ä½•è®©å¯¹è±¡ä¹Ÿèƒ½ä½¿ç”¨for..of ?ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¹¦ä¸­çš„è‡ªå·±é€šè¿‡Object.defineProperty()å®šä¹‰ä¸€ä¸ªSymbol.iteratorå±æ€§æ¥å®ç°.è¿™é‡Œæˆ‘å°±ä¸èµ˜è¿°äº†.ä¹Ÿæ˜¯æœ€æ¥è¿‘åŸç”Ÿä½¿ç”¨æ„Ÿå—çš„.ä¸è¿‡æˆ‘è¿™é‡Œè¦ä»‹ç»ä¸€ä¸ªç¨å¾®ç®€å•ç‚¹çš„æ–¹æ³•æ¥å®ç°.å°±æ˜¯ä½¿ç”¨ä¸ŠèŠ‚è®²åˆ°çš„Object.keys()æ­é…ä½¿ç”¨.ä¸¾ä¸ªä¾‹å­:12345678910111213var shotCat=&#123; name:'shotCat', age:'forever18', info:&#123; sex:'true man', city:'wuhan', girlFriend:'æ–°å£ç»“è¡£!' &#125;&#125;for(var key of Object.keys(shotCat))&#123; //ä½¿ç”¨Object.keys()æ–¹æ³•è·å–å¯¹è±¡keyçš„æ•°ç»„ console.log(key+": "+shotCat[key]);&#125; 3.5 å°ç»“ä¹¦ä¸­å°ç»“æ€»ç»“å¾—æŒºå…¨çš„,è¿™é‡Œæˆ‘å°±æ¬è¿ä¸‹ JavaScript ä¸­çš„å¯¹è±¡æœ‰å­—é¢å½¢å¼(æ¯”å¦‚ var a = { .. })å’Œæ„é€ å½¢å¼(æ¯”å¦‚ var a = new Array(..))ã€‚å­—é¢å½¢å¼æ›´å¸¸ç”¨ï¼Œä¸è¿‡æœ‰æ—¶å€™æ„é€ å½¢å¼å¯ä»¥æä¾›æ›´å¤šé€‰é¡¹ã€‚ å¯¹è±¡æ˜¯ 6 ä¸ª(æˆ–è€…æ˜¯ 7 ä¸ªï¼Œå–å†³äºä½ çš„è§‚ç‚¹)åŸºç¡€ç±»å‹ä¹‹ä¸€ã€‚å¯¹è±¡æœ‰åŒ…æ‹¬ function åœ¨å†…çš„å­ç±»å‹ï¼Œä¸åŒå­ç±»å‹å…·æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œæ¯”å¦‚å†…éƒ¨æ ‡ç­¾ [object Array] è¡¨ç¤ºè¿™æ˜¯å¯¹è±¡çš„å­ç±»å‹æ•°ç»„ã€‚ å¯¹è±¡å°±æ˜¯é”® / å€¼å¯¹çš„é›†åˆã€‚å¯ä»¥é€šè¿‡ .propName æˆ–è€… [â€œpropNameâ€] è¯­æ³•æ¥è·å–å±æ€§å€¼ã€‚è®¿é—®å±æ€§æ—¶ï¼Œå¼•æ“å®é™…ä¸Šä¼šè°ƒç”¨å†…éƒ¨çš„é»˜è®¤ [[Get]] æ“ä½œ(åœ¨è®¾ç½®å±æ€§å€¼æ—¶æ˜¯ [[Put]])ï¼Œ [[Get]] æ“ä½œä¼šæ£€æŸ¥å¯¹è±¡æœ¬èº«æ˜¯å¦åŒ…å«è¿™ä¸ªå±æ€§ï¼Œå¦‚æœæ²¡æ‰¾åˆ°çš„è¯å®ƒè¿˜ä¼šæŸ¥æ‰¾ [[Prototype]] é“¾(å‚è§ç¬¬ 5 ç« )ã€‚ å±æ€§çš„ç‰¹æ€§å¯ä»¥é€šè¿‡å±æ€§æè¿°ç¬¦æ¥æ§åˆ¶ï¼Œæ¯”å¦‚ writable å’Œ configurableã€‚æ­¤å¤–ï¼Œå¯ä»¥ä½¿ç”¨ Object.preventExtensions(..)ã€Object.seal(..) å’Œ Object.freeze(..) æ¥è®¾ç½®å¯¹è±¡(åŠå…¶å±æ€§)çš„ä¸å¯å˜æ€§çº§åˆ«ã€‚ å±æ€§ä¸ä¸€å®šåŒ…å«å€¼â€”â€”å®ƒä»¬å¯èƒ½æ˜¯å…·å¤‡ getter/setter çš„â€œè®¿é—®æè¿°ç¬¦â€ã€‚æ­¤å¤–ï¼Œå±æ€§å¯ä»¥æ˜¯å¯æšä¸¾æˆ–è€…ä¸å¯æšä¸¾çš„ï¼Œè¿™å†³å®šäº†å®ƒä»¬æ˜¯å¦ä¼šå‡ºç°åœ¨ for..in å¾ªç¯ä¸­ã€‚ å¯ä»¥ä½¿ç”¨ ES6 çš„ for..of è¯­æ³•æ¥éå†æ•°æ®ç»“æ„(æ•°ç»„ã€å¯¹è±¡ï¼Œç­‰ç­‰)ä¸­çš„å€¼ï¼Œfor..of ä¼šå¯»æ‰¾å†…ç½®æˆ–è€…è‡ªå®šä¹‰çš„ @@iterator å¯¹è±¡å¹¶è°ƒç”¨å®ƒçš„ next() æ–¹æ³•æ¥éå†æ•°æ®å€¼ã€‚ ç¬¬å››ç«  æ··åˆå¯¹è±¡â€ç±»â€æ³¨æ„: æ­£å¦‚ä¹¦ä¸­æç¤ºçš„é‚£æ ·,æ•´ç« ä¸€åŠä»¥ä¸Šå‡ ä¹éƒ½æ˜¯è®²é¢å‘å¯¹è±¡å’Œç±»çš„æ¦‚å¿µ.ä¼šè¯»å¾—äººäº‘é‡Œé›¾é‡Œ,ç»™äººå“¦,ä¹Ÿè®¸å¤§æ¦‚å°±æ˜¯è¿™æ ·å­çš„æ„Ÿè§‰.åé¢æˆ‘è¿˜æ˜¯ä¼šå¯¹é‚£äº›æŠ½è±¡çš„æ¦‚å¿µæ‰¾åˆ°åœ¨JavaScripté‡Œå¯¹åº”çš„â€ç«‹è¶³ç‚¹â€,ä¸è‡³äºå¯¹è¿™äº›æ¦‚å¿µå¤ªâ€é£˜â€. 4.1 ç±»ç†è®ºè¯´æ˜: ç±»å…¶æ˜¯æè¿°äº†ä¸€ç§ä»£ç çš„ç»„ç»‡ç»“æ„å½¢å¼. åœ¨jsä¸­ç±»å¸¸è§çš„å°±æ˜¯æ„é€ å‡½æ•°,ä¹Ÿå¯ä»¥æ˜¯é€šè¿‡ES6æä¾›çš„classå…³é”®å­—;ç»§æ‰¿å°±æ˜¯å‡½æ•°;å®ä¾‹åŒ–å°±æ˜¯å¯¹è±¡,å¸¸è§çš„å°±æ˜¯é€šè¿‡newæ„é€ å‡½æ•°å®ç°çš„. æ³¨æ„: Javascriptè¯­è¨€ä¸æ”¯æŒâ€œç±»â€ï¼Œæ‰€è°“çš„â€ç±»â€ä¹Ÿæ˜¯æ¨¡æ‹Ÿå‡ºçš„â€œç±»â€ã€‚å³ä½¿æ˜¯ES6å¼•å…¥çš„â€ç±»â€å®è´¨ä¸Šä¹Ÿæ˜¯ JavaScript ç°æœ‰çš„åŸºäºåŸå‹çš„ç»§æ‰¿çš„è¯­æ³•ç³–ã€‚ 4.1.1 â€œç±»â€è®¾è®¡æ¨¡å¼ä¸€å¥è¯:ç±»å…¶å®ä¹Ÿæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼! ç±»å¹¶ä¸æ˜¯å¿…é¡»çš„ç¼–ç¨‹åŸºç¡€,è€Œæ˜¯ä¸€ç§å¯é€‰çš„ä»£ç æŠ½è±¡. æœ‰äº›è¯­è¨€(æ¯”å¦‚ Java)å¹¶ä¸ä¼šç»™ä½ é€‰æ‹©çš„æœºä¼šï¼Œç±»å¹¶ä¸æ˜¯å¯é€‰çš„â€”â€”ä¸‡ç‰©çš†æ˜¯ç±»ã€‚ å…¶ä»–è¯­è¨€(æ¯”å¦‚ C/C++ æˆ–è€… PHP)ä¼šæä¾›è¿‡ç¨‹åŒ–å’Œé¢å‘ç±»è¿™ä¸¤ç§è¯­æ³•ï¼Œå¼€å‘è€…å¯ä»¥é€‰æ‹©å…¶ä¸­ä¸€ç§é£æ ¼æˆ–è€…æ··ç”¨ä¸¤ç§é£æ ¼ã€‚ 4.1.2 JavaScriptä¸­çš„â€œç±»â€JavaScript åªæœ‰ä¸€äº›è¿‘ä¼¼ç±»çš„è¯­æ³•å…ƒç´  (æ¯”å¦‚ new å’Œ instanceof)ï¼Œä¸è¿‡åœ¨åæ¥çš„ ES6 ä¸­æ–°å¢äº†ä¸€äº›å…ƒç´ ï¼Œæ¯”å¦‚ class å…³é”®å­—,å…¶å®è´¨ä¸Šä¹Ÿæ˜¯ JavaScript ç°æœ‰çš„åŸºäºåŸå‹çš„ç»§æ‰¿çš„è¯­æ³•ç³–ã€‚ä¹Ÿä¸æ˜¯çœŸæ­£çš„ç±». 4.2 ç±»çš„æœºåˆ¶è¿™éƒ¨åˆ†ä¹¦ä¸­çš„æè¿°,æˆ‘ç†è§£èµ·æ¥ä¹Ÿæ¯”è¾ƒè´¹åŠ²,ä¸»è¦æ˜¯å®ƒæåˆ°çš„æ ˆ,å †ä¸æˆ‘ç†è§£ä¸­å†…å­˜é‡Œçš„æ ˆ,å †ç›¸å†²çªäº†.è¿™é‡Œç®€å•è¯´ä¸‹æˆ‘çš„ç†è§£,å¦‚æœ‰è¯¯,æ„Ÿæ¿€æŒ‡æ­£. stackç±»å…¶å®æ˜¯ä¸€ç§æ•°æ®ç»“æ„.å®ƒå¯ä»¥å‚¨å­˜æ•°æ®,å¹¶æä¾›ä¸€äº›å…¬ç”¨çš„æ–¹æ³•(è¿™å’Œä¸Šé¢æåˆ°çš„ç±»å¾ˆç›¸ä¼¼).ä½†æ˜¯stackç±»å…¶å®åªæ˜¯ä¸€ä¸ªæŠ½è±¡çš„è¡¨ç¤º,ä½ æƒ³å¯¹å®ƒè¿›è¡Œæ“ä½œ,å°±éœ€è¦å…ˆå¯¹å®ƒè¿›è¡Œå®ä¾‹åŒ–. 4.2.1 å»ºé€ è¿™èŠ‚ä¸»è¦å°±æ˜¯è¯´æ˜â€ç±»â€å’Œâ€å®ä¾‹â€çš„å…³ç³».åœ¨JavaScripté‡Œâ€ç±»â€ä¸»è¦æ˜¯æ„é€ å‡½æ•°,â€å®ä¾‹â€å°±æ˜¯å¯¹è±¡. ä¸€ä¸ªç±»å°±åƒä¸€å¼ è“å›¾ã€‚ä¸ºäº†è·å¾—çœŸæ­£å¯ä»¥äº¤äº’çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‰ç…§ç±»æ¥å®ä¾‹åŒ–ä¸€ä¸ªä¸œè¥¿ï¼Œè¿™ä¸ªä¸œè¥¿(å¯¹è±¡)é€šå¸¸è¢«ç§°ä¸ºå®ä¾‹ï¼Œæœ‰éœ€è¦çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å®ä¾‹ä¸Šè°ƒç”¨æ–¹æ³•å¹¶è®¿é—®å…¶æ‰€æœ‰å…¬æœ‰æ•°æ®å±æ€§ã€‚ æ€»è€Œè¨€ä¹‹:ç±»é€šè¿‡å®ä¾‹åŒ–å¾—åˆ°å®ä¾‹å¯¹è±¡. 4.2.2 æ„é€ å‡½æ•° ç±»å®ä¾‹æ˜¯ç”±ä¸€ä¸ªç‰¹æ®Šçš„ç±»æ–¹æ³•æ„é€ çš„ï¼Œè¿™ä¸ªæ–¹æ³•åé€šå¸¸å’Œç±»åç›¸åŒï¼Œè¢«ç§°ä¸ºæ„é€ å‡½æ•°ã€‚ å®ä¾‹å°±æ˜¯ç”±æ„é€ å‡½æ•°å®ä¾‹åŒ–çš„: new æ„é€ å‡½æ•°. æ„é€ å‡½æ•°å¤§å¤šéœ€è¦ç”¨ new æ¥è°ƒï¼Œè¿™æ ·è¯­è¨€å¼•æ“æ‰çŸ¥é“ä½ æƒ³è¦æ„é€ ä¸€ä¸ªæ–°çš„ç±»å®ä¾‹ã€‚ æ„é€ å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡,è¿™ä¸ªå¯¹è±¡å°±æ˜¯å®ä¾‹.è¿™ä¸ªå¯¹è±¡å¯ä»¥è°ƒç”¨ç±»çš„æ–¹æ³•. 4.3 ç±»çš„ç»§æ‰¿åœ¨é¢å‘ç±»çš„è¯­è¨€ä¸­ï¼Œä½ å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªç»§æ‰¿å‰è€…çš„ç±»ã€‚åè€…é€šå¸¸è¢«ç§°ä¸ºâ€œå­ç±»â€ï¼Œå‰è€…é€šå¸¸è¢«ç§°ä¸ºâ€œçˆ¶ç±»â€ã€‚å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„è¡Œä¸º,å¹¶ä¸”å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚,ä¿®æ”¹ç»§æ‰¿çš„è¡Œä¸º(ä¸€èˆ¬å¹¶ä¸ä¼šä¿®æ”¹çˆ¶ç±»çš„è¡Œä¸º).æ³¨æ„:æˆ‘ä»¬è®¨è®ºçš„çˆ¶ç±»å’Œå­ç±»å¹¶ä¸æ˜¯å®ä¾‹,åœ¨JavaScripté‡Œç±»ä¸€èˆ¬éƒ½æ˜¯æ„é€ å‡½æ•°ã€‚ 4.3.1 å¤šæ€å¤§æ¦‚ä½ çœ‹äº†å®ƒçš„â€è§£é‡Šâ€,å¯¹å¤šæ€è¿˜æ˜¯æ‡µæ‡µæ‡‚æ‡‚.è¿™é‡Œæˆ‘å†è§£é‡Šä¸‹:ä»€ä¹ˆæ˜¯å¤šæ€?åŒä¸€ä¸ªæ“ä½œï¼Œä½œç”¨äºä¸åŒçš„å¯¹è±¡ï¼Œä¼šäº§ç”Ÿä¸åŒçš„ç»“æœã€‚å‘å‡ºä¸€ä¸ªç›¸åŒçš„æŒ‡ä»¤åï¼Œä¸åŒçš„å¯¹è±¡ä¼šå¯¹è¿™ä¸ªæŒ‡ä»¤æœ‰ä¸åŒçš„ååº”ï¼Œæ•…ç§°ä¸ºå¤šæ€ã€‚è¯´æ˜: ä¹¦ä¸­ä¾‹å­ä¸­çš„inheritedå…¶å®å°±æ˜¯ç›¸å½“äºsuper.å¹¶ä¸”æ³¨æ„ä¹¦ä¸­çš„è¿™äº›ä¾‹å­éƒ½æ˜¯ä¼ªä»£ç ! å¹¶ä¸æ˜¯çœŸçš„åœ¨JavaScripté‡Œå°±æ˜¯è¿™æ ·å®ç°çš„.è¡¥å……:è¿™é‡Œæ˜¯å…³äºsuperçš„mdné“¾æ¥. å¤šæ€: ç›¸å¯¹æ€§: å…¶å®ç›¸å¯¹æ€§å°±æ˜¯å­ç±»ç›¸å¯¹äºçˆ¶ç±»çš„å¼•ç”¨(ä¾‹å¦‚ä½¿ç”¨superå®ç°å¼•ç”¨),å¹¶ä¸”å­ç±»å¯¹çˆ¶ç±»çš„å¼•ç”¨å¹¶ä¸ä¼šå¯¹çˆ¶ç±»çš„è¡Œä¸ºé€ æˆä»»ä½•å½±å“(å¹¶ä¸ä¼šå¯¹çˆ¶ç±»è‡ªèº«çš„è¡Œä¸ºè¿›è¡Œé‡æ–°å®šä¹‰),ä¾‹å¦‚ä¹¦ä¸­ä¾‹å­å­ç±»å¯¹drive()çš„å¼•ç”¨. å¯é‡å¤å®šä¹‰: å­ç±»ç»§æ‰¿çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•,å¹¶å¯ä»¥å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œå†æ¬¡å®šä¹‰,ä¾‹å¦‚ä¹¦ä¸­å­ç±»å¯¹drive()ä¸­çš„outputè¿›è¡Œä¿®æ”¹.å½“è°ƒç”¨æ–¹æ³•æ—¶ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å®šä¹‰,è¿™å¥è¯æ€ä¹ˆç†è§£,å½“å­ç±»å®ä¾‹åŒ–å,æ‰§è¡Œdrive()æ–¹æ³•æ—¶,å®ƒå¹¶ä¸ä¼šç›´æ¥å»æ‰§è¡Œçˆ¶ç±»çš„drive().è€Œæ˜¯å­ç±»ä¸Šçš„drive().ç®€å•æ¥è¯´å°±æ˜¯å®ä¾‹æ¥æºäºé‚£ä¸ªç±»,å®ƒå°±ä½¿ç”¨é‚£ä¸ªç±»çš„æ–¹æ³•. è¯´æ˜: åœ¨ JavaScript ä¸­â€œç±»â€æ˜¯å±äºæ„é€ å‡½æ•°çš„(ç±»ä¼¼ Foo.prototypeâ€¦ è¿™æ ·çš„ç±»å‹å¼•ç”¨)ã€‚ç”±äº JavaScriptä¸­çˆ¶ç±»å’Œå­ç±»çš„å…³ç³»åªå­˜åœ¨äºä¸¤è€…æ„é€ å‡½æ•°å¯¹åº”çš„ .prototype å¯¹è±¡ä¸­ï¼Œå› æ­¤å®ƒä»¬çš„æ„é€ å‡½æ•°ä¹‹é—´å¹¶ä¸å­˜åœ¨ç›´æ¥è”ç³»ï¼Œä»è€Œæ— æ³•ç®€å•åœ°å®ç°ä¸¤è€…çš„ç›¸å¯¹å¼•ç”¨(åœ¨ ES6 çš„ç±»ä¸­å¯ä»¥é€šè¿‡ superæ¥â€œè§£å†³â€è¿™ä¸ªé—®é¢˜ï¼Œå‚è§é™„å½• A)ã€‚ å¤šæ€å¹¶ä¸è¡¨ç¤ºå­ç±»å’Œçˆ¶ç±»æœ‰å…³è”ï¼Œå­ç±»å¾—åˆ°çš„åªæ˜¯çˆ¶ç±»çš„ä¸€ä»½å‰¯æœ¬ã€‚ç±»çš„ç»§æ‰¿å…¶å®å°±æ˜¯å¤åˆ¶ã€‚ å…¶å®è¿™é‡Œè®¨è®ºçš„è¿™äº›æ¦‚å¿µå…¶å®åœ¨æˆ‘ä»¬å®é™…å·¥ä½œä¸­,å·²ç»ä½¿ç”¨äº†æ— æ•°æ¬¡,åªæ˜¯ç°åœ¨ä½ éœ€è¦ç†è§£â€åŸæ¥ä½ æ˜¯å«è¿™ä¸ªåå­—å•Š!â€ 4.3.2 å¤šé‡ç»§æ‰¿å¤šé‡ç»§æ‰¿: ä¸€ä¸ªå­ç±»å¯ä»¥ç»§æ‰¿æ¥è‡ªå¤šä¸ªçˆ¶ç±»çš„æ–¹æ³•.å¤šé‡ç»§æ‰¿å¼•å‘çš„é—®é¢˜: å¤šé‡ç»§æ‰¿å¯èƒ½ä¼šå‡ºç°,å¤šä¸ªçˆ¶ç±»ä¸­æ–¹æ³•åå†²çªçš„é—®é¢˜,è¿™æ ·å­ç±»åˆ°åº•å¼•ç”¨å“ªä¸ªæ–¹æ³•?å¤šé‡ç»§æ‰¿ä¸JavaScript: JavaScriptæœ¬èº«å¹¶æ²¡æœ‰æä¾›å¤šé‡ç»§æ‰¿åŠŸèƒ½.ä½†å®ƒå¯ä»¥é€šè¿‡å…¶ä»–æ–¹æ³•æ¥è¾¾åˆ°å¤šé‡ç»§æ‰¿çš„æ•ˆæœ. 4.4 æ··å…¥JavaScript ä¸­åªæœ‰å¯¹è±¡ï¼Œå¹¶ä¸å­˜åœ¨å¯ä»¥è¢«å®ä¾‹åŒ–çš„â€œç±»â€ã€‚ä¸€ä¸ªå¯¹è±¡å¹¶ä¸ä¼šè¢«å¤åˆ¶åˆ°å…¶ä»–å¯¹è±¡ï¼Œå®ƒä»¬ä¼šè¢«å…³è”èµ·æ¥(å‚è§ç¬¬ 5 ç« )(å…¶å®å°±æ˜¯å¼•ç”¨,æ‰€ä»¥å®ƒçš„å¤šæ€æ˜¯â€ç›¸å¯¹â€çš„)ã€‚ç”±äºåœ¨å…¶ä»–è¯­è¨€ä¸­ç±»è¡¨ç°å‡ºæ¥çš„éƒ½æ˜¯å¤åˆ¶è¡Œä¸ºï¼Œå› æ­¤ JavaScript å¼€å‘è€…ä¹Ÿæƒ³å‡ºäº†ä¸€ä¸ªæ–¹æ³•æ¥æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸ºï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æ··å…¥(å°±æ˜¯é€šè¿‡æ··å…¥æ¥æ¨¡æ‹Ÿå®ç°ç±»çš„å¤šé‡ç»§æ‰¿)ã€‚ 4.4.1 æ˜¾å¼æ··å…¥éƒ‘é‡æé†’: ä¹¦ä¸­è¿™é‡Œçš„ç±»éƒ½æ˜¯å¯¹è±¡å½¢å¼çš„.ä¾‹å­é‡Œçš„sourceObj, targetObj,è¿™å°±å¯èƒ½é€ æˆä¸€ä¸ªâ€è¯¯å¯¼â€,åœ¨JavaScripté‡Œæ˜¯æ²¡æœ‰çœŸæ­£çš„ç±»,æ‰€è°“çš„ç±»ä¹Ÿä¸è¿‡æ˜¯æˆ‘ä»¬æ¨¡æ‹Ÿå‡ºæ¥çš„â€ç±»â€,ä¸è¿‡æ˜¯ä¸€ç§è¯­æ³•ç³–(åŒ…æ‹¬ES6é‡Œçš„class).åœ¨JavaScripté‡Œâ€æ‰€è°“çš„ç±»â€ç»å¸¸æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°,ä½ å¹¶ä¸èƒ½è¿™æ ·è¿›è¡Œéå†,åªèƒ½å¯¹å®ƒçš„å®ä¾‹å¯¹è±¡è¿›è¡Œè¿™ç§æ“ä½œ.ä¸è¦è¢«ä¹¦ä¸­ä¾‹å­å¸¦è¿›å»äº†,ä¸è¦æ··æ·†,æ¯•ç«Ÿæˆ‘ä»¬æœ€ç»ˆä½¿ç”¨çš„æ˜¯JavaScript(è€Œä¸æ˜¯å…¶ä»–é¢å‘å¯¹è±¡çš„è¯­è¨€.),å®ƒé‡Œé¢çš„ç±»å¸¸å¸¸å¹¶ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡! æ˜¾å¼æ··å…¥: ä¹¦ä¸­æ²¡æœ‰ç»™å‡ºæ˜ç¡®çš„æ˜¾å¼æ··å…¥çš„å®šä¹‰,ä½†æ˜¯è¯»å®Œæ•´ç« .åŸºæœ¬å°±çŸ¥é“ä»€ä¹ˆæ˜¯æ˜¾å¼æ··å…¥äº†.æ˜¾å¼æ··å…¥å°±æ˜¯é€šè¿‡ç±»ä¼¼mixin()æ–¹æ³•,æ˜¾å¼åœ°å°†çˆ¶å¯¹è±¡å±æ€§é€ä¸€å¤åˆ¶,æˆ–è€…æœ‰é€‰æ‹©åœ°å¤åˆ¶(å³ä¾‹å­ä¸­çš„å­˜åœ¨æ€§æ£€æŸ¥)åˆ°å­å¯¹è±¡ä¸Š. æ˜¾å¼æ··å…¥å¸¸ç”¨æ–¹æ³•: å°±æ˜¯ä¹¦ä¸­çš„ä¾‹å­, é¦–å…ˆæœ‰å­å¯¹è±¡,å¹¶å¯¹å…¶è¿›è¡Œç‰¹æ®ŠåŒ–(å®šä¹‰è‡ªå·±çš„å±æ€§æˆ–æ–¹æ³•).ç„¶åå†é€šè¿‡mixin()æ–¹æ³•å°†çˆ¶å¯¹è±¡æœ‰é€‰æ‹©åœ°å¤åˆ¶(å³å­˜åœ¨æ€§æ£€æŸ¥,è¿‡æ»¤å­å¯¹è±¡å·²æœ‰çš„å±æ€§,é¿å…å†²çª)åˆ°å­å¯¹è±¡ä¸Š. æ˜¾å¼æ··å…¥æ³¨æ„ç‚¹:æ˜¾å¼æ··å…¥æ—¶,åˆ‡è®°ä¸€ç‚¹ä½ è¦é¿å…çˆ¶å¯¹è±¡çš„å±æ€§ä¸å­å¯¹è±¡ç‰¹æ®ŠåŒ–çš„å±æ€§å†²çª.è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¾‹å­ä¸­è¦è¿›è¡Œå­˜åœ¨æ€§æ£€æŸ¥,ä»¥åŠåé¢è¦è¯´çš„æ··åˆå¤åˆ¶,å¯èƒ½å­˜åœ¨çš„é‡å†™é£é™©. 1. å†è¯´å¤šæ€(å…¶å®è¯´çš„å°±æ˜¯jsé‡Œçš„å¤šæ€)æ˜¾å¼å¤šæ€: å°†çˆ¶å¯¹è±¡é‡Œçš„æ–¹æ³•é€šè¿‡æ˜¾å¼ç»‘å®šåˆ°å­å¯¹è±¡ä¸Š.å°±æ˜¯æ˜¾å¼å¤šæ€.ä¾‹å¦‚ä¹¦ä¸­çš„ä¾‹å­:Vehicle.drive.call( this )ã€‚æ˜¾å¼å¤šæ€ä¹Ÿæ˜¯ä¸ºäº†JSæ¥æ¨¡æ‹Ÿå®ç°å¤šé‡ç»§æ‰¿çš„!è¯´æ˜: åœ¨ES6ä¹‹å‰æ˜¯æ²¡æœ‰ç›¸å¯¹å¤šæ€çš„æœºåˆ¶ã€‚æ‰€ä»¥å°±ä½¿ç”¨callè¿™ç§è¿›è¡Œæ˜¾å¼ç»‘å®šå®ç°æ˜¾å¼åŠ¨æ€.æ³¨æ„JavaScripté‡Œå®ç°å¤šæ€çš„æ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºâ€ä¼ªå¤šæ€â€.æ‰€ä»¥ä¸è¦å¯¹åé¢çªç„¶å†’å‡ºçš„ä¼ªå¤šæ€æ¦‚å¿µè€Œä¸€è„¸æ‡µé€¼(å…¶å®æ•´æœ¬ä¹¦ç»å¸¸åšè¿™æ ·çš„äº‹) æ˜¾å¼å¤šæ€(ä¼ªå¤šæ€)çš„ç¼ºé™·: å› ä¸ºåœ¨JavaScript ä¸­å­˜åœ¨å±è”½(å®é™…æ˜¯å‡½æ•°å¼•ç”¨çš„ä¸Šä¸‹æ–‡ä¸åŒ),æ‰€ä»¥åœ¨å¼•ç”¨çš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨æ˜¾å¼ä¼ªå¤šæ€çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªå‡½æ•°å…³è”. è¿™äº›éƒ½ä¼šå¢åŠ ä»£ç çš„å¤æ‚åº¦å’Œç»´æŠ¤éš¾åº¦(è¿‡å¤šçš„thisç»‘å®š,çœŸçš„ä¼šè®©ä»£ç å¾ˆéš¾è¯»)ã€‚ 2. æ··åˆå¤åˆ¶(æ˜¾å¼æ··å…¥å¦ä¸€ç§ä¸å¸¸ç”¨æ–¹æ³•)å‰é¢çš„æ˜¾å¼æ··å…¥çš„æ–¹æ³•æ˜¯å…ˆæœ‰å­å¯¹è±¡å¹¶è¿›è¡Œç‰¹æ®ŠåŒ–,ç„¶åå†æœ‰é€‰æ‹©åœ°å¤åˆ¶çˆ¶å¯¹è±¡å±æ€§.è¿™ä¸ªä¸å¸¸ç”¨çš„æ–¹æ³•åˆ™æ˜¯åè¿‡æ¥çš„,ç»“åˆä¹¦ä¸­ä¾‹å­,å®ƒå…ˆç”¨ä¸€ä¸ªç©ºå¯¹è±¡å®Œå…¨å¤åˆ¶çˆ¶å¯¹è±¡çš„å±æ€§,ç„¶åè¯¥å¯¹è±¡å¤åˆ¶ç‰¹æ®ŠåŒ–å¯¹è±¡çš„å±æ€§,æœ€åå¾—åˆ°å­å¯¹è±¡.è¿™ç§æ–¹æ³•æ˜æ˜¾æ˜¯æ¯”ç¬¬ä¸€ç§éº»çƒ¦çš„,å¹¶ä¸”åœ¨å¤åˆ¶ç‰¹æ®ŠåŒ–å¯¹è±¡æ—¶,å¯èƒ½ä¼šå¯¹ä¹‹å‰é‡åçš„å±æ€§(å³å¤åˆ¶å¾—åˆ°çš„çˆ¶å¯¹è±¡å±æ€§)è¿›è¡Œé‡å†™è¦†ç›–.æ‰€ä»¥è¿™ç§æ–¹æ³•æ˜¯å­˜åœ¨é£é™©,ä¸”æ•ˆç‡ä½ä¸‹çš„. æ˜¾å¼æ··å…¥çš„ç¼ºé™·: æ— æ³•åšåˆ°çœŸæ­£çš„å¤åˆ¶: å¦‚æœå¤åˆ¶çš„å¯¹è±¡ä¸­å­˜åœ¨å¯¹å‡½æ•°çš„å¼•ç”¨,é‚£ä¹ˆå­å¯¹è±¡å¾—åˆ°çš„æ˜¯å’Œçˆ¶å¯¹è±¡ä¸€æ ·çš„,å¯¹åŒä¸€ä¸ªå‡½æ•°çš„å¼•ç”¨.å¦‚æœæŸä¸ªå­å¯¹è±¡å¯¹å‡½æ•°è¿›è¡Œäº†ä¿®æ”¹,é‚£ä¹ˆçˆ¶å¯¹è±¡åŠå…¶ä»–å­å¯¹è±¡éƒ½ä¼šå—åˆ°å½±å“.å¾ˆæ˜æ˜¾è¿™æ˜¯ä¸å®‰å…¨çš„.åŸå› æ˜¯JavaScript ä¸­çš„å‡½æ•°æ— æ³•è¿›è¡ŒçœŸæ­£åœ°å¤åˆ¶ï¼Œä½ åªèƒ½å¤åˆ¶å¯¹å…±äº«å‡½æ•°å¯¹è±¡çš„å¼•ç”¨. å‡½æ•°åå’Œå±æ€§ååŒå: å¦‚æœæ··å…¥å¤šä¸ªå¯¹è±¡,åˆ™å¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µ.ç›®å‰ç°åœ¨ä»æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ–¹å¼æ¥å¤„ç†å‡½æ•°å’Œå±æ€§çš„åŒåé—®é¢˜(æé—®:è¿™ç§æƒ…å†µä¸‹è°çš„ä¼˜å…ˆçº§æ›´é«˜?æ»‘ç¨½è„¸)ã€‚ 3. å¯„ç”Ÿç»§æ‰¿æ˜¾å¼æ··å…¥æ¨¡å¼çš„ä¸€ç§å˜ä½“è¢«ç§°ä¸ºâ€œå¯„ç”Ÿç»§æ‰¿â€ï¼Œå®ƒæ—¢æ˜¯æ˜¾å¼çš„åˆæ˜¯éšå¼çš„.é¦–å…ˆä¼šå¤åˆ¶ä¸€ä»½çˆ¶ç±»(å¯¹è±¡)çš„å®šä¹‰ï¼Œç„¶åæ··å…¥å­ç±»(å¯¹è±¡)çš„å®šä¹‰(å¦‚æœéœ€è¦çš„è¯ä¿ç•™åˆ°çˆ¶ç±»çš„ç‰¹æ®Šå¼•ç”¨)ï¼Œç„¶åç”¨è¿™ä¸ªå¤åˆå¯¹è±¡æ„å»ºå®ä¾‹ã€‚è¯´æ˜: å¯„ç”Ÿç»§æ‰¿ä¸æ··åˆå¤åˆ¶æ˜¯å¾ˆç›¸ä¼¼çš„,æœ€å¤§çš„åŒºåˆ«æ˜¯å¯„ç”Ÿç»§æ‰¿æ˜¯é€šè¿‡å®ä¾‹åŒ–æ„é€ å‡½æ•°(JSä¸­çš„â€ç±»â€)æ¥å®ç°å¤åˆ¶çš„. 4.4.2 éšå¼æ··å…¥éšå¼æ··å…¥: å®ƒä¸æ˜¾ç¤ºæ··å…¥æœ€å¤§çš„åŒºåˆ«,å°±æ˜¯å®ƒæ²¡æœ‰æ˜æ˜¾çš„å¯¹çˆ¶ç±»(å¯¹è±¡)å±æ€§è¿›è¡Œå¤åˆ¶çš„è¿‡ç¨‹.å®ƒæ˜¯é€šè¿‡åœ¨æ„é€ å‡½æ•°è°ƒç”¨æˆ–è€…æ–¹æ³•è°ƒç”¨ä¸­ä½¿ç”¨æ˜¾å¼ç»‘å®šä¾‹å¦‚: Something.cool.call( this)æ¥å®ç°æ··å…¥(å¤šé‡ç»§æ‰¿).å…¶æœ¬è´¨å°±æ˜¯é€šè¿‡æ”¹å˜thisæŒ‡å‘æ¥å®ç°æ··å…¥. 4.5 å°ç»“æ•´ç« çš„é‡ç‚¹å…¶å®å°±æ˜¯è®©ä½ ç†è§£ä»€ä¹ˆå«ç±».é™¤äº†æœ€åä¸€å°èŠ‚çš„æ··å…¥å’ŒJavaScriptæœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹å…³ç³».å…¶ä½™çš„å°ç»“å’ŒJavaScriptéƒ½æ²¡ä»€ä¹ˆå…³ç³».é‡è¦çš„æ˜¯ç†è§£ç±»è¿™ç§æ€æƒ³å’Œè®¾è®¡æ¨¡å¼.é‡ç‚¹: 1.ç±»æ„å‘³ç€å¤åˆ¶! ä¼ ç»Ÿçš„ç±»è¢«å®ä¾‹åŒ–æ—¶ï¼Œå®ƒçš„è¡Œä¸ºä¼šè¢«å¤åˆ¶åˆ°å®ä¾‹ä¸­ã€‚ç±»è¢«ç»§æ‰¿æ—¶ï¼Œè¡Œä¸ºä¹Ÿä¼šè¢«å¤åˆ¶åˆ°å­ç±»ä¸­ã€‚ å¤šæ€(åœ¨ç»§æ‰¿é“¾çš„ä¸åŒå±‚æ¬¡åç§°ç›¸åŒä½†æ˜¯åŠŸèƒ½ä¸åŒçš„å‡½æ•°)çœ‹èµ·æ¥ä¼¼ä¹æ˜¯ä»å­ç±»å¼•ç”¨çˆ¶ç±»ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå¼•ç”¨çš„å…¶å®æ˜¯å¤åˆ¶çš„ç»“æœã€‚ JavaScript å¹¶ä¸ä¼š(åƒç±»é‚£æ ·)è‡ªåŠ¨åˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬ã€‚(ä½ åªèƒ½è‡ªå·±æ‰‹åŠ¨å¤åˆ¶,è€Œä¸”å¤åˆ¶çš„è¿˜ä¸å½»åº•!) æ··å…¥æ¨¡å¼(æ— è®ºæ˜¾å¼è¿˜æ˜¯éšå¼)å¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸ºï¼Œä½†æ˜¯é€šå¸¸ä¼šäº§ç”Ÿä¸‘é™‹å¹¶ä¸”è„†å¼±çš„è¯­æ³•ï¼Œæ¯”å¦‚æ˜¾å¼ä¼ªå¤šæ€(OtherObj.methodName.call(this, â€¦))ï¼Œè¿™ä¼šè®©ä»£ç æ›´åŠ éš¾ æ‡‚å¹¶ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ æ˜¾å¼æ··å…¥å®é™…ä¸Šæ— æ³•å®Œå…¨æ¨¡æ‹Ÿç±»çš„å¤åˆ¶è¡Œä¸ºï¼Œå› ä¸ºå¯¹è±¡(å’Œå‡½æ•°!åˆ«å¿˜äº†å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡)åªèƒ½å¤åˆ¶å¼•ç”¨ï¼Œæ— æ³•å¤åˆ¶è¢«å¼•ç”¨çš„å¯¹è±¡æˆ–è€…å‡½æ•°æœ¬èº«ã€‚å¿½è§†è¿™ä¸€ç‚¹ä¼šå¯¼è‡´è®¸å¤šé—®é¢˜ã€‚ åœ¨ JavaScript ä¸­æ¨¡æ‹Ÿç±»æ˜¯å¾—ä¸å¿å¤±çš„ï¼Œè™½ç„¶èƒ½è§£å†³å½“å‰çš„é—®é¢˜ï¼Œä½†æ˜¯å¯èƒ½ä¼šåŸ‹ä¸‹æ›´å¤šçš„éšæ‚£ã€‚(ä½†å®é™…,æˆ‘ä»¬ç”¨å¾—å´å¾ˆå¤š) ç¬¬äº”ç«  åŸå‹æ³¨æ„:æœ¬ç« çš„å‰ææ˜¯ä½ å·²ç»æ¯”è¾ƒç†Ÿæ‚‰åŸå‹åŠåŸå‹é“¾.ä¸å¤ªç†Ÿæˆ–è€…ä¸çŸ¥é“çš„å¯ä»¥,é€šè¿‡è¿™ç¯‡æ–‡ç« ç†Ÿæ‚‰ä¸‹. 5.1 [[Prototype]]JavaScript ä¸­çš„å¯¹è±¡æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ [[Prototype]] å†…ç½®å±æ€§ï¼Œå…¶å®å°±æ˜¯å¯¹äºå…¶ä»–å¯¹è±¡çš„å¼•ç”¨(ä¸€èˆ¬å°±æ˜¯å…¶æ„é€ å‡½æ•°prototypeå±æ€§çš„å¼•ç”¨)ã€‚å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡åœ¨åˆ›å»ºæ—¶ [[Prototype]] å±æ€§éƒ½ä¼šè¢«èµ‹äºˆä¸€ä¸ªéç©ºçš„å€¼ã€‚åæ§½: ä¹¦ä¸­æœ‰è¿™æ ·ä¸€å¥è¯ â€œæ³¨æ„:å¾ˆå¿«æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ï¼Œå¯¹è±¡çš„ [[Prototype]] é“¾æ¥å¯ä»¥ä¸ºç©ºï¼Œè™½ç„¶å¾ˆå°‘è§ã€‚â€æˆ‘å‰å‰ååçœ‹äº†ä¸‰ééƒ½æ²¡æ‰¾åˆ°å®ƒæ‰€è¯´çš„å¯¹è±¡çš„ [[Prototype]] é“¾æ¥å¯ä»¥ä¸ºç©º.çš„æƒ…å†µ!åº”è¯¥æ˜¯ä½œè€…å†™å¿˜è®°äº†.ok,è¿™é‡Œæˆ‘æ¥è¯´ä¸‹å¯¹è±¡çš„ [[Prototype]] é“¾æ¥å¯ä»¥ä¸ºç©ºçš„æƒ…å†µ.å°±æ˜¯é€šè¿‡Object.create(null)å¾—åˆ°çš„å¯¹è±¡.å®ƒçš„ [[Prototype]] æ˜¯ä¸ºç©ºçš„.åº”è¯¥è¯´å®ƒçš„æ‰€æœ‰éƒ½æ˜¯ç©ºçš„.ä¸ºä»€ä¹ˆ?å› ä¸ºnullæ˜¯åŸå‹é“¾çš„é¡¶ç«¯.å®ƒæ˜¯æ²¡æœ‰[[Prototype]]çš„.å¯¹åº”çš„å¯ä»¥å¯¹æ¯”ä¸‹console.log(Object.create({}))å’Œconsole.log(Object.create(null)) [[Prototype]]æœ‰ä»€ä¹ˆç”¨?æˆ‘åŸä»¥ä¸ºä½œè€…ä¼šè¯´å¯ä»¥ä½œä¸ºå­˜æ”¾å®ä¾‹å¯¹è±¡çš„å…¬å…±å±æ€§,ç„¶ååƒç±»ä¸€æ ·è®²å¾—æ›´æ·±åˆ»ç‚¹.ä¸è¿‡è¿™æ¬¡åªæ˜¯è¯´äº†å®ƒè¡¨æ˜çš„ä½œç”¨. ä½œç”¨: å°±æ˜¯å­˜æ”¾å“ªäº›ä¸åœ¨å¯¹è±¡è‡ªèº«çš„å±æ€§. å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶,æ­¤æ—¶å¯¹è±¡çš„å†…éƒ¨é»˜è®¤æ“ä½œ[[Get]],é¦–å…ˆä¼šæ£€æŸ¥å¯¹è±¡æœ¬èº«æ˜¯å¦æœ‰è¿™ä¸ªå±æ€§ï¼Œå¦‚æœæœ‰çš„è¯å°±ä½¿ç”¨å®ƒã€‚å¦‚æœæ²¡æœ‰çš„è¯,[[Get]] å°±ä¼šç»§ç»­è®¿é—®å¯¹è±¡çš„ [[Prototype]] é“¾.([[Prototype]]å…¶å®å°±æ˜¯å…¶æ„é€ å‡½æ•°çš„prototypeå±æ€§.ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡.)å¦‚æœæ‰¾åˆ°,å°±è¿”å›è¯¥å±æ€§å€¼.å¦‚æœæ²¡æœ‰å°±ç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ª[[Prototype]]é“¾.ç›´åˆ°æ‰¾å®Œæ•´æ¡[[Prototype]]é“¾.è¿˜æ˜¯æ²¡æœ‰çš„è¯,[[Get]] å°±ä¼šè¿”å›undefined. è¡¥å……: ä½¿ç”¨ for..in éå†å¯¹è±¡æ—¶ ä»»ä½•å¯ä»¥é€šè¿‡åŸå‹é“¾è®¿é—®åˆ° (å¹¶ä¸”æ˜¯ enumerable:true)çš„å±æ€§éƒ½ä¼šè¢«æšä¸¾ã€‚(å…¶å®è¿™ä¸ªåœ¨ç¬¬ä¸‰ç« é‡Œæˆ‘è¯´è¿‡) ä½¿ç”¨ in æ“ä½œç¬¦ åŒæ ·ä¼šæŸ¥æ‰¾å¯¹è±¡çš„æ•´æ¡åŸå‹é“¾(æ— è®ºå±æ€§æ˜¯å¦å¯æšä¸¾) 5.1.1 Object.prototypeæ‰€æœ‰æ™®é€šçš„ [[Prototype]] é“¾æœ€ç»ˆéƒ½ä¼šæŒ‡å‘å†…ç½®çš„ Object.prototypeã€‚(Object.prototypeçš„[[Prototype]] æœ€ç»ˆä¼šæŒ‡å‘null.nullå°±æ˜¯æœ€åçš„ç»ˆç‚¹).è¿™ä¸ª Object.prototype å¯¹è±¡ï¼ŒåŒ…å«äº† JavaScript ä¸­è®¸å¤šé€šç”¨çš„åŠŸèƒ½,ä¾‹å¦‚:toString() , valueOf(), hasOwnProperty(..)å’Œ isPrototypeOf(..)ã€‚ 5.1.2 å±æ€§è®¾ç½®å’Œå±è”½è¯´æ˜: çœ‹å®Œæœ¬èŠ‚æ—¶,åˆ‡è®°ä¸è¦å¯¹myObject.foo = &quot;bar&quot;è¿™ç§ç®€å•çš„å¯¹è±¡å±æ€§èµ‹å€¼äº§ç”Ÿé¡¾è™‘å’Œç–‘æƒ‘.è¿™ç§èµ‹å€¼ç»å¯¹ä¸ä¼šå¯¹åŸå‹é“¾äº§ç”Ÿä»»ä½•å½±å“!åŸºæœ¬ä¹Ÿä¸ä¼šå‡ºç°èµ‹å€¼ä¸æˆåŠŸçš„æƒ…å†µ.å¦‚æœæœ‰äººæ•¢åœ¨å›¢é˜Ÿé¡¹ç›®é‡Œä¿®æ”¹å¯¹è±¡çš„å±æ€§æè¿°ç¬¦,æ—©å°±è¢«æ‹–å‡ºå»æ‰“æ­»äº†!!! è¿™éƒ¨åˆ†å¯ä»¥çœ‹åšè¡¥å……çŸ¥è¯†,çŸ¥é“æœ‰è¿™äº›å¥‡è‘©è®¾å®šå°±è¡Œ.å…¶å®è¿™èŠ‚æ›´åº”è¯¥å…³æ³¨çš„æ˜¯myObject.fooçš„è¿”å›å€¼.æ³¨æ„: ä¹¦ä¸­æåˆ°çš„åŠ¨è¯å±è”½å…¶å®æŒ‡çš„å°±æ˜¯åœ¨å¯¹è±¡ä¸Šåˆ›å»ºåŒåå±æ€§(åŸå‹é“¾ä¸Šå·²æœ‰è¯¥å±æ€§).æ³¨æ„ä¸è¦è¢«ç»•æ™•äº†.è¿˜æœ‰++å°±ç›¸å½“äºmyObject.a=myObject.a+1,æ³¨æ„åˆ†è§£å°±è¡Œ,ä¸å­˜åœ¨ä»€ä¹ˆç‰¹åˆ«éœ€è¦å½“å¿ƒçš„. 5.2 â€œç±»â€ JavaScripté‡Œåªæœ‰å¯¹è±¡,æ²¡æœ‰ç±»! JavaScriptä¸éœ€è¦é€šè¿‡ç±»æ¥æŠ½è±¡å¯¹è±¡.è€Œæ˜¯è‡ªå·±ç›´æ¥åˆ›å»ºå¯¹è±¡,å¹¶å®šä¹‰å¯¹è±¡çš„è¡Œä¸º. 5.2.1 â€œç±»â€å‡½æ•°åæ§½:æ¨¡ä»¿ç±»ç«Ÿç„¶è¢«è¯´æˆå¥‡æ€ªçš„æ— è€»æ»¥ç”¨!?ä¸è¿™æ ·åš,jsé‚£äº›é«˜çº§ç”¨æ³•æ€ä¹ˆå®ç°?æ€ä¹ˆä¼šæœ‰ç°åœ¨å‰ç«¯çš„ç™¾èŠ±é½æ”¾(è½®å­æ»¡åœ°è·‘)?è¿™ä¹Ÿæ˜¯å†’å¾—åŠæ³•çš„åŠæ³•å•Š!æ¯•ç«Ÿå½“æ—¶jsåªæ˜¯å°ä¼—,ä¸æŒ‡æœ›å®ƒæœ‰å¤šå¤§èƒ½è€.æ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªäººç”¨7å¤©â€å€Ÿé‰´â€å‡ºæ¥çš„ä¸œè¥¿. â€œç±»â€å‡½æ•°: JavaScriptç”¨æ¥æ¨¡ä»¿ç±»çš„å‡½æ•°å°±è¢«ç§°ä¸ºç±»å‡½æ•°,å…¶å®å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ„é€ å‡½æ•°. â€œç±»â€å‡½æ•°æ¨¡æ‹Ÿç±»çš„å…³é”®: æ‰€æœ‰çš„å‡½æ•°é»˜è®¤éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªåä¸º prototype çš„å…¬æœ‰å¹¶ä¸”ä¸å¯æšä¸¾(å‚è§ç¬¬ 3 ç« )çš„å±æ€§ï¼Œå®ƒä¼šæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡.å½“æˆ‘ä»¬é€šè¿‡new å‡½æ•°(æ„é€ å‡½æ•°)æ¥å¾—åˆ°å®ä¾‹å¯¹è±¡æ—¶,æ­¤æ—¶newä¼šç»™å®ä¾‹å¯¹è±¡ä¸€ä¸ªå†…éƒ¨çš„ [[Prototype]]å±æ€§ï¼Œå®ä¾‹å¯¹è±¡å†…éƒ¨çš„[[Prototype]]å±æ€§ä¸æ„é€ å‡½æ•°çš„prototypeå±æ€§éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡.é‚£JSçš„è¿™ä¸ªç‰¹æ€§æ€ä¹ˆæ¨¡æ‹Ÿç±»å‘¢?é¦–å…ˆç±»çš„æœ¬è´¨å°±æ˜¯å¤åˆ¶!.æ˜ç™½è¿™ç‚¹å,æˆ‘ä»¬å°±éœ€è¦å®ç°ä¼ªå¤åˆ¶.æˆ‘ä»¬å¯ä»¥å°†ç±»é‡Œçš„å±æ€§,æ”¾åœ¨å‡½æ•°çš„prototypeå±æ€§é‡Œ.è¿™æ ·è¯¥å‡½æ•°çš„å®ä¾‹å¯¹è±¡å°±å¯ä»¥é€šè¿‡[Prototype]è®¿é—®è¿™äº›å±æ€§.æˆ‘ä»¬ä¹Ÿç»å¸¸æŠŠè¿™ç§è¡Œä¸ºç§°ä¸ºåŸå‹ç»§æ‰¿(ä½œè€…åé¢ä¼šç–¯ç‹‚åæ§½è¿™ä¸ªç§°å‘¼,æˆ‘åé¢å†è§£é‡Šä¸ºä»€ä¹ˆåæ§½).è¿™æ ·å°±å®ç°äº†ä¼ªâ€å¤åˆ¶â€. å¯ä»¥è¾¾åˆ°å’Œç±»ç›¸ä¼¼çš„æ•ˆæœ. æ³¨æ„: è™½ç„¶è¯´æ‰€æœ‰çš„å‡½æ•°é»˜è®¤éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªåä¸º prototypeå±æ€§.ä½†ä¹Ÿæœ‰ç‰¹æ®Šçš„æ—¶å€™.å°±ä¸æ˜¯é»˜è®¤çš„æƒ…å†µ.å°±æ˜¯é€šè¿‡bind()ç¡¬ç»‘å®šæ—¶.æ‰€è¿”å›çš„ç»‘å®šå‡½æ•°,å®ƒæ˜¯æ²¡æœ‰prototypeå±æ€§çš„! å›¾è§£çœŸæ­£çš„ç±»ä¸JSçš„æ¨¡æ‹Ÿç±»: å…³äºåŸå‹ç»§æ‰¿è¿™ä¸ªåå­—çš„ç–¯ç‹‚åæ§½: ä½œè€…çš„åæ§½ä¸»è¦é›†ä¸­åœ¨â€ç»§æ‰¿â€ä¸¤ä¸ªå­—,åŸå› æ˜¯åœ¨é¢å‘ç±»çš„è¯­è¨€ä¸­,â€ç»§æ‰¿â€æ„å‘³ç€å¤åˆ¶,ä½†åœ¨JavaScripté‡ŒåŸå‹ç»§æ‰¿å´æ ¹æœ¬ä¸æ˜¯è¿™ä¸ªæ„æ€,å®ƒå¹¶æ²¡æœ‰å¤åˆ¶,è€Œæ˜¯ç”¨åŸå‹é“¾æ¥å®ç°.æ‰€ä»¥ç–¯ç‹‚åæ§½å…¶è¯¯å¯¼. ä»€ä¹ˆæ˜¯å·®å¼‚ç»§æ‰¿? æˆ‘æ ¹æœ¬æ²¡å¬è¿‡è¿™ä¸ªæœ¯è¯­,åˆæ¬¡çœ‹ä½œè€…æ‰€è°“çš„è§£é‡Š,è¿™æ˜¯å•¥?ä»–æƒ³è¯´å•¥?åæ¥è¯»äº†å¥½å¤šé,ç»ˆäºå¤§æ¦‚ç†è§£äº†.å¦‚æœä½ ä¹Ÿçœ‹ä¸æ‡‚ä½œè€…æƒ³åœ¨è¡¨è¾¾ä»€ä¹ˆ,å°±passè¿™éƒ¨åˆ†.æ²¡å¿…è¦ç†è§£.åè€Œä¼šæŠŠä½ çœ‹å¾—æ›´è¿·æƒ‘.å¥½äº†,æˆ‘æ¥è§£é‡Šä¸‹ä»€ä¹ˆå«å·®å¼‚ç»§æ‰¿.å·®å¼‚ç»§æ‰¿å°±æ˜¯åŸå‹ç»§æ‰¿çš„ä¸€ä¸ªä¸å¸¸ç”¨çš„åˆ«å.æˆ‘ä»¬çŸ¥é“å¯¹è±¡å¯ä»¥é€šè¿‡åŸå‹é“¾ç»§æ‰¿ä¸€éƒ¨åˆ†å±æ€§,ä½†æˆ‘ä»¬ä»å¯ä»¥ç»™å¯¹è±¡è®¾ç½®å…¶ä»–æœ‰å·®å¼‚ä¸åŒçš„å±æ€§.è¿™ä¹Ÿå°±å¯ä»¥ç§°ä¸ºå·®å¼‚ç»§æ‰¿. 5.2.2 â€œæ„é€ å‡½æ•°â€æ„é€ å‡½æ•°ä¹‹æ‰€ä»¥æ˜¯æ„é€ å‡½æ•°,æ˜¯å› ä¸ºå®ƒè¢«newè°ƒç”¨,å¦‚æœæ²¡è¢«newè°ƒç”¨,å®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°.å®é™…ä¸Š,newä¼šåŠ«æŒæ‰€æœ‰æ™®é€šå‡½æ•°å¹¶ç”¨æ„é€ å¯¹è±¡çš„å½¢å¼æ¥è°ƒç”¨å®ƒ,å¹¶ä¸”æ— è®ºå¦‚ä½•éƒ½ä¼šæ„é€ è¿”å›ä¸€ä¸ªå¯¹è±¡. 5.2.3 æŠ€æœ¯å…³äºä¸¤ç§â€œé¢å‘ç±»â€çš„æŠ€å·§,æˆ‘è¿™å°±ä¸è¯´æ˜äº†,ç†è§£äº†è¿™éƒ¨åˆ†ç¬¬ä¸€ç¬¬äºŒç« å…³äºthisçš„ä½¿ç”¨,å°±å¾ˆç®€å•äº†. prototype.constructor:ä¸ºäº†æ­£ç¡®ç†è§£constructor.æˆ‘ç‰¹æ„åœ¨æ ‡é¢˜ä¸ŠåŠ ä¸Šprototype.æ˜¯æƒ³å¼ºè°ƒ:ä¸€ä¸ªå¯¹è±¡è®¿é—®constructoræ—¶,ä¼šé»˜è®¤è®¿é—®å…¶åŸå‹å¯¹è±¡ä¸Šçš„constructorå±æ€§. æ³¨æ„:12345678910111213function Foo() &#123; /* .. */ &#125;Foo.prototype = &#123; /* .. */ &#125;; // æœ‰æ—¶å€™æˆ‘ä»¬ä¼šéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°åŸå‹å¯¹è±¡,å› æ­¤ä¹Ÿä¸ä¼šæœ‰é»˜è®¤çš„constructorå±æ€§æŒ‡å‘æ„é€ å‡½æ•°// éœ€è¦åœ¨ Foo.prototype ä¸Šâ€œä¿®å¤â€ä¸¢å¤±çš„ .constructor å±æ€§// å…³äº defineProperty(..)ï¼Œå‚è§ç¬¬ 3 ç«  Object.defineProperty( Foo.prototype, "constructor" , &#123; enumerable: false,//ä¸å¯æšä¸¾ writable: true, configurable: true, value: Foo // è®© .constructor æŒ‡å‘ Foo&#125; );//ä¸Šé¢è¿™ç§æ–¹æ³•æ˜¯æ¯”è¾ƒä¸¥è°¨,ä¹Ÿæ¯”è¾ƒéº»çƒ¦çš„.å¹¶ä¸”ä½¿ç”¨Object.defineProperty()é£é™©æ˜¯å¾ˆå¤§çš„.//æ‰€ä»¥æˆ‘ä»¬å®é™…æ˜¯è¿™æ ·ä¿®æ”¹çš„Foo.prototype.constructor=Foo; //ç›´æ¥å°†å…¶èµ‹å€¼Foo å”¯ä¸€è¦æ³¨æ„çš„æ˜¯æ­¤æ—¶constructoræ˜¯å¯æšä¸¾çš„.ä¼šè¢«å®ä¾‹å¯¹è±¡çš„for..in..éå†åˆ°. 5.3 (åŸå‹)ç»§æ‰¿åŸå‹å¯¹è±¡åˆ°åŸå‹å¯¹è±¡çš„ç»§æ‰¿:ä¾‹å¦‚:Bar.prototype åˆ° Foo.prototype çš„å§”æ‰˜å…³ç³»ï¼Œæ­£ç¡®çš„JavaScriptä¸­â€œåŸå‹é£æ ¼â€:1234567891011121314151617181920212223function Foo(name) &#123; this.name = name;&#125;Foo.prototype.myName = function() &#123; return this.name;&#125;;function Bar(name,label) &#123; Foo.call( this, name ); this.label = label;&#125;// æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Bar.prototype å¯¹è±¡,å¹¶ä¸”å®ƒçš„[[Prototype]] å…³è”Foo.prototype Bar.prototype = Object.create( Foo.prototype );// æ³¨æ„!Object.create()æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡,æ‰€ä»¥ç°åœ¨æ²¡æœ‰ Bar.prototype.constructor äº† // å¦‚æœä½ éœ€è¦è¿™ä¸ªå±æ€§çš„è¯å¯èƒ½éœ€è¦æ‰‹åŠ¨ä¿®å¤ä¸€ä¸‹å®ƒBar.prototype.myLabel = function() &#123; return this.label;&#125;;var a = new Bar( "a", "obj a" );a.myName(); // "a"a.myLabel(); // "obj a" é”™è¯¯ç”¨æ³•: 1, Bar.prototype = Foo.prototype; æ­¤æ—¶å¹¶ä¸ä¼šåˆ›å»ºä¸€ä¸ªå…³è”åˆ° Bar.prototype çš„æ–°å¯¹è±¡ï¼Œå®ƒåªæ˜¯è®© Bar.prototype ç›´æ¥å¼•ç”¨ Foo.prototype å¯¹è±¡ã€‚ å› æ­¤å½“ä½ æ‰§è¡Œç±»ä¼¼ Bar.prototype. myLabel = â€¦ çš„èµ‹å€¼è¯­å¥æ—¶ä¼šç›´æ¥ä¿®æ”¹ Foo.prototype å¯¹è±¡æœ¬èº«ã€‚ 2, Bar.prototype = new Foo(); å®ƒä½¿ç”¨ äº† Foo(..) çš„â€œæ„é€ å‡½æ•°è°ƒç”¨â€ï¼Œå¦‚æœå‡½æ•° Foo æœ‰ä¸€äº›å…¶ä»–æ“ä½œçš„è¯,å°¤å…¶æ˜¯ä¸thisæœ‰å…³çš„çš„è¯ï¼Œå°±ä¼šå½±å“åˆ° Bar() çš„â€œåä»£â€ï¼Œåæœä¸å ªè®¾æƒ³ã€‚ ç»“è®º: è¦åˆ›å»ºä¸€ä¸ªåˆé€‚çš„å…³è”å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€ä½¿ç”¨ Object.create(..) è€Œä¸æ˜¯ä½¿ç”¨å…·æœ‰å‰¯ä½œç”¨çš„ Foo(..)ã€‚è¿™æ ·åšå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ç„¶åæŠŠæ—§å¯¹è±¡æŠ›å¼ƒæ‰(ä¸»è¦æ˜¯éœ€è¦æ‰‹åŠ¨è®¾ç½®constructor)ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹å·²æœ‰çš„é»˜è®¤å¯¹è±¡ã€‚ æ£€æŸ¥â€ç±»â€å…³ç³» instanceof æ“ä½œç¬¦: éªŒè¯å·¦è¾¹çš„æ™®é€šå¯¹è±¡çš„æ•´æ¡[[prototype]]é“¾æ˜¯å¦æœ‰æŒ‡å‘å³è¾¹å‡½æ•°çš„prototype,ä¾‹å¦‚:a instanceof Fooã€‚ isPrototypeOf(..) æ–¹æ³•: éªŒè¯åœ¨å¯¹è±¡ a çš„æ•´æ¡ [[Prototype]] é“¾ä¸­æ˜¯å¦å‡ºç°è¿‡ åŸå‹å¯¹è±¡b.ä¾‹å¦‚:b.isPrototypeOf( a ); æ³¨æ„: å¦‚æœä½¿ç”¨å†…ç½®çš„ .bind(..) å‡½æ•°æ¥ç”Ÿæˆä¸€ä¸ªç¡¬ç»‘å®šå‡½æ•°(å‚è§ç¬¬ 2 ç« )çš„è¯ï¼Œ è¯¥å‡½æ•°æ˜¯æ²¡æœ‰ .prototype å±æ€§çš„ã€‚å¦‚æœç¡¬ç»‘å®šå‡½æ•°instanceof çš„è¯,åˆ™å…¶bindçš„ ç›®æ ‡å‡½æ•°çš„prototypeä¼šæˆä¸ºç¡¬ç»‘å®šå‡½æ•°çš„prototype. å…³äºproto:æˆ‘ä»¬çŸ¥é“å‡½æ•°å¯ä»¥ç›´æ¥é€šè¿‡prototypeå±æ€§ç›´æ¥è®¿é—®åŸå‹å¯¹è±¡.é‚£å¯¹è±¡æ€ä¹ˆè®¿é—®å‘¢?æˆ‘ä»¬çŸ¥é“æ˜¯é€šè¿‡[[prototype]]é“¾.æ€ä¹ˆè®¿é—®å‘¢?åœ¨ES5ä¹‹ä¸­çš„æ ‡å‡†æ–¹æ³•:é€šè¿‡Object.getPrototypeOf( )æ–¹æ³•æ¥è·å–å¯¹è±¡åŸå‹.Object.getPrototypeOf( a ) === Foo.prototype; // true,å¦ä¸€ç§æ–¹æ³•:åœ¨ ES6 ä¹‹å‰å¹¶ä¸æ˜¯æ ‡å‡†,ä½†å´è¢«ç»å¤§å¤šæ•°æµè§ˆå™¨æ”¯æŒçš„ä¸€ç§æ–¹æ³•,å¯ä»¥è®¿é—®å†…éƒ¨[[prototype]]å¯¹è±¡.é‚£å°±æ˜¯__proto__.ä¾‹å¦‚:a.__proto__ === Foo.prototype; // true.ä½ ç”šè‡³å¯ä»¥é€šè¿‡.__proto__.__ptoto__...æ¥è®¿é—®æ•´ä¸ªåŸå‹é“¾. .__proto__å®é™…ä¸Šå¹¶ä¸å­˜åœ¨äºä½ æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡ä¸­.å¹¶ä¸”å®ƒçœ‹èµ·æ¥å¾ˆåƒä¸€ä¸ªå±æ€§ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒæ›´åƒä¸€ä¸ª getter/setter(è§ç¬¬ä¸‰ç« ). 5.4 å¯¹è±¡å…³è”[[Prototype]] æœºåˆ¶å°±æ˜¯å­˜åœ¨äºå¯¹è±¡ä¸­çš„ä¸€ä¸ªå†…éƒ¨é“¾æ¥ï¼Œå®ƒä¼šå¼•ç”¨å…¶ä»–å¯¹è±¡ã€‚ è¿™ä¸ªé“¾æ¥çš„ä½œç”¨æ˜¯:å¦‚æœåœ¨å¯¹è±¡ä¸Šæ²¡æœ‰æ‰¾åˆ°éœ€è¦çš„å±æ€§æˆ–è€…æ–¹æ³•å¼•ç”¨ï¼Œå¼•æ“å°±ä¼šç»§ç»­åœ¨ [[Prototype]] å…³è”çš„å¯¹è±¡ä¸Šè¿›è¡ŒæŸ¥æ‰¾ã€‚åŒç†ï¼Œå¦‚æœåœ¨åè€…ä¸­ä¹Ÿæ²¡æœ‰æ‰¾åˆ°éœ€è¦çš„ å¼•ç”¨å°±ä¼šç»§ç»­æŸ¥æ‰¾å®ƒçš„ [[Prototype]]ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ä¸€ç³»åˆ—å¯¹è±¡çš„é“¾æ¥è¢«ç§°ä¸ºåŸå‹é“¾ã€‚ 5.4.1 åˆ›å»ºå…³è”é—®:â€œæˆ‘ä»¬å·²ç»æ˜ç™½äº†ä¸ºä»€ä¹ˆ JavaScript çš„ [[Prototype]] æœºåˆ¶å’Œç±»ä¸ä¸€æ ·ï¼Œä¹Ÿæ˜ç™½äº†å®ƒå¦‚ä½•å»ºç«‹å¯¹è±¡é—´çš„å…³è”ã€‚â€ç­”: ç±»çš„æœºåˆ¶æ˜¯å¤åˆ¶,JavaScripté‡ŒåŸå‹é“¾çš„æœºåˆ¶æ˜¯å¼•ç”¨. é—®:â€œé‚£ [[Prototype]] æœºåˆ¶çš„æ„ä¹‰æ˜¯ä»€ä¹ˆå‘¢?ä¸ºä»€ä¹ˆ JavaScript å¼€å‘è€…è´¹è¿™ä¹ˆå¤§çš„åŠ›æ°”(æ¨¡æ‹Ÿç±»)åœ¨ä»£ç ä¸­åˆ›å»ºè¿™äº›å…³è”å‘¢?â€ç­”: æ„ä¹‰å°±æ˜¯æ¨¡æ‹Ÿç±»,JavaScriptä¸éœ€è¦å¤åˆ¶(æˆ‘è§‰å¾—è¿™ä¸æ˜¯ä¸ªä¼˜ç‚¹)è€Œé€šè¿‡åŸå‹é“¾å®ç°â€å®ä¾‹â€å¯¹â€ç±»â€çš„â€ç»§æ‰¿(å…¶å®å°±æ˜¯å¼•ç”¨)â€.è¿™æ ·å°±è¾¾åˆ°äº†å®ä¾‹å¯¹è±¡å¯¹æŸäº›å±æ€§(å³åŸå‹å¯¹è±¡é‡Œçš„å±æ€§)çš„å¤ç”¨. Object.create(..)è¿™ä¸ªæ–¹æ³•å…¶å®æˆ‘ä»¬åœ¨å‰é¢å·²ç»ä½¿ç”¨è¿‡å¾ˆå¤šæ¬¡.â€Object.create(..) ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡(bar)å¹¶æŠŠå®ƒå…³è”åˆ°æˆ‘ä»¬æŒ‡å®šçš„å¯¹è±¡(foo)ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å……åˆ†å‘æŒ¥ [[Prototype]] æœºåˆ¶çš„å¨åŠ›(å§”æ‰˜)å¹¶ä¸”é¿å…ä¸å¿…è¦çš„éº»çƒ¦(æ¯”å¦‚ä½¿ç”¨ new çš„æ„é€ å‡½æ•°è°ƒç”¨ä¼šç”Ÿæˆ .prototype å’Œ .constructor å¼•ç”¨)ã€‚â€å®é™…ä¸Šè¿™ä¸ªæ–¹æ³•å°±æ˜¯åˆ›å»ºè¿”å›ä¸€ä¸ªæ–°å¯¹è±¡,è¿™ä¸ªæ–°å¯¹è±¡çš„åŸå‹([[Prototype]])ä¼šç»‘å®šä¸ºæˆ‘ä»¬è¾“å…¥çš„å‚æ•°å¯¹è±¡foo.å¹¶ä¸”ç”±äºä¸æ˜¯é€šè¿‡æ„é€ å‡½æ•°çš„å½¢å¼,æ‰€ä»¥ä¸éœ€è¦ä¸ºå‡½æ•°å•ç‹¬è®¾ç½®prototype.è™½ç„¶Object.create(..)å¾ˆå¥½,ä½†å®é™…æˆ‘ä»¬ä½¿ç”¨çš„æ›´å¤šçš„è¿˜æ˜¯æ„é€ å‡½æ•°å½¢å¼.æ³¨æ„: Object.create(..) çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†éœ€è¦æ·»åŠ åˆ°æ–°å¯¹è±¡ä¸­çš„å±æ€§åä»¥åŠè¿™äº›å±æ€§çš„å±æ€§æè¿°ç¬¦(å‚è§ç¬¬ 3 ç« )ã€‚ Object.create(null)è¿™ä¸ªæ–¹æ³•å…¶å®æˆ‘ä»¬åœ¨å‰é¢ä¹Ÿè®²è§£è¿‡å‡ æ¬¡.â€Object.create(null) ä¼šåˆ›å»ºä¸€ä¸ªæ‹¥æœ‰ç©º(æˆ–è€…è¯´null)[[Prototype]] é“¾æ¥çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ— æ³•è¿›è¡Œå§”æ‰˜ã€‚ç”±äºè¿™ä¸ªå¯¹è±¡æ²¡æœ‰åŸå‹é“¾ï¼Œæ‰€ä»¥ instanceof æ“ä½œç¬¦(ä¹‹å‰è§£é‡Šè¿‡)æ— æ³•è¿›è¡Œåˆ¤æ–­ï¼Œå› æ­¤æ€»æ˜¯ä¼šè¿”å› falseã€‚ è¿™äº›ç‰¹æ®Šçš„ç©º [[Prototype]] å¯¹è±¡é€šå¸¸è¢«ç§°ä½œâ€œå­—å…¸â€ï¼Œå®ƒä»¬å®Œå…¨ä¸ä¼šå—åˆ°åŸå‹é“¾çš„å¹²æ‰°ï¼Œå› æ­¤éå¸¸é€‚åˆç”¨æ¥å­˜å‚¨æ•°æ®ã€‚â€œ â€œObject.create()çš„polyfillä»£ç .â€è¿™éƒ¨åˆ†æˆ‘å°±ä¸åšè§£è¯»äº†,å› ä¸ºç°åœ¨éƒ½8102å¹´,es6æ—©å°±æ™®åŠäº†,ä½ å‡ ä¹ä¸å¯èƒ½å†ç”¨åˆ°es5ä¹‹å‰çš„è¯­æ³•äº†.æ‰€ä»¥è¿™éƒ¨åˆ†å¤§å®¶äº†è§£ä¸‹å³å¯. 5.4.2 å…³è”å…³ç³»æ˜¯å¤‡ç”¨[[Prototype]] çš„æœ¬è´¨ä½œç”¨: ä¹¦ä¸­æåˆ°äº†ä¸€ä¸ªè§‚ç‚¹â€å¤„ç†â€œç¼ºå¤±â€å±æ€§æˆ–è€…æ–¹æ³•æ—¶çš„ä¸€ç§å¤‡ç”¨é€‰é¡¹ã€‚â€(å³å¤‡ç”¨è®¾è®¡æ¨¡å¼).ä½†éšåè¿›è¡Œäº†å¦å®šâ€ä½†æ˜¯è¿™åœ¨ JavaScript ä¸­å¹¶ä¸æ˜¯å¾ˆå¸¸è§ã€‚æ‰€ä»¥å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è¿™ç§æ¨¡å¼ï¼Œé‚£æˆ–è®¸åº”å½“é€€åä¸€æ­¥å¹¶é‡æ–°æ€è€ƒä¸€ä¸‹è¿™ç§æ¨¡å¼æ˜¯å¦åˆé€‚ã€‚â€ ä½œè€…ç»™å‡ºçš„è§‚ç‚¹æ˜¯:â€è¿›è¡Œå§”æ‰˜è®¾è®¡æ¨¡å¼,å³ä¾‹å­ä¸­çš„å†…éƒ¨å§”æ‰˜(å°±æ˜¯åœ¨å¯¹è±¡é‡Œå¥—äº†ä¸ªå£³å†å¼•ç”¨äº†ä¸€é,ä¸ºçš„æ˜¯å°†å§”æ‰˜è¿›è¡Œéšè—).è¿™æ ·å¯ä»¥ä½¿æˆ‘ä»¬çš„APIè®¾è®¡å¾—æ›´åŠ æ¸…æ™°.â€æ–‡ä¸­çš„æ¸…æ™°æ˜¯æŒ‡,å½“æˆ‘ä»¬éœ€è¦å¼•ç”¨åŸå‹å¯¹è±¡çš„å±æ€§æ–¹æ³•æ—¶,æˆ‘ä»¬åœ¨å¯¹è±¡å†…éƒ¨è®¾ç½®å¯¹åº”ä¸“é—¨çš„å±æ€§(ä¾‹å­ä¸­çš„doCool),è¿›è¡Œå†…éƒ¨å§”æ‰˜(å…¶å®å°±æ˜¯å¥—ä¸ªå£³è¿›è¡Œéšè—).è¿™æ ·æˆ‘ä»¬å¯¹è±¡çš„å±æ€§å°±æ˜¯â€å®Œæ•´â€çš„. åœ¨å®é™…å·¥ä½œä¸­,æˆ‘ä»¬å¸¸å¸¸å°±æ˜¯æŠŠåŸå‹å¯¹è±¡ä½œä¸ºå­˜æ”¾å¯¹è±¡çš„å…¬å…±å±æ€§æ–¹æ³•çš„åœ°æ–¹.å¯¹äºä¸€èˆ¬æ¯”è¾ƒé‡è¦çš„æ“ä½œæ‰ä¼šåœ¨å¯¹è±¡é‡Œè¿›è¡Œå†…éƒ¨å§”æ‰˜(éšè—å§”æ‰˜)! 5.5 å°ç»“æ€»ç»“å¾—å¾ˆå¥½å¾ˆå…¨é¢,è¿™é‡Œæˆ‘è¿˜æ˜¯ç›´æ¥æ‘˜æŠ„äº†,ä¸æ˜¯å·æ‡’å“¦! å¦‚æœè¦è®¿é—®å¯¹è±¡ä¸­å¹¶ä¸å­˜åœ¨çš„ä¸€ä¸ªå±æ€§ï¼Œ[[Get]] æ“ä½œ(å‚è§ç¬¬ 3 ç« )å°±ä¼šæŸ¥æ‰¾å¯¹è±¡å†…éƒ¨[[Prototype]] å…³è”çš„å¯¹è±¡ã€‚ è¿™ä¸ªå…³è”å…³ç³»å®é™…ä¸Šå®šä¹‰äº†ä¸€æ¡â€œåŸå‹é“¾â€(æœ‰ç‚¹åƒåµŒå¥—çš„ä½œç”¨åŸŸé“¾)ï¼Œåœ¨æŸ¥æ‰¾å±æ€§æ—¶ä¼šå¯¹å®ƒè¿›è¡Œéå†ã€‚ æ‰€æœ‰æ™®é€šå¯¹è±¡éƒ½æœ‰å†…ç½®çš„ Object.prototypeï¼Œ æŒ‡å‘åŸå‹é“¾çš„é¡¶ç«¯(æ¯”å¦‚è¯´å…¨å±€ä½œç”¨åŸŸ)ï¼Œå¦‚ æœåœ¨åŸå‹é“¾ä¸­æ‰¾ä¸åˆ°æŒ‡å®šçš„å±æ€§å°±ä¼šåœæ­¢ã€‚toString()ã€valueOf() å’Œå…¶ä»–ä¸€äº›é€šç”¨çš„åŠŸèƒ½ éƒ½å­˜åœ¨äº Object.prototype å¯¹è±¡ä¸Šï¼Œå› æ­¤è¯­è¨€ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚ å…³è”ä¸¤ä¸ªå¯¹è±¡æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ new å…³é”®è¯è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œåœ¨è°ƒç”¨çš„ 4 ä¸ªæ­¥éª¤(ç¬¬ 2 ç« )ä¸­ä¼šåˆ›å»ºä¸€ä¸ªå…³è”å…¶ä»–å¯¹è±¡çš„æ–°å¯¹è±¡ã€‚ ä½¿ç”¨ new è°ƒç”¨å‡½æ•°æ—¶ä¼šæŠŠæ–°å¯¹è±¡çš„ .prototype å±æ€§å…³è”åˆ°â€œå…¶ä»–å¯¹è±¡â€(å°±æ˜¯æ„é€ å‡½æ•°prototypeæ‰€æŒ‡çš„å¯¹è±¡)ã€‚å¸¦ new çš„å‡½æ•°è°ƒç”¨ é€šå¸¸è¢«ç§°ä¸ºâ€œæ„é€ å‡½æ•°è°ƒç”¨â€ï¼Œå°½ç®¡å®ƒä»¬å®é™…ä¸Šå’Œä¼ ç»Ÿé¢å‘ç±»è¯­è¨€ä¸­çš„ç±»æ„é€ å‡½æ•°ä¸ä¸€æ ·ã€‚ JavaScript ä¸­çš„æœºåˆ¶æœ‰ä¸€ä¸ªæ ¸å¿ƒåŒºåˆ«ï¼Œé‚£å°±æ˜¯ä¸ä¼šè¿›è¡Œå¤åˆ¶ï¼Œå¯¹è±¡ä¹‹é—´æ˜¯é€šè¿‡å†…éƒ¨çš„ [[Prototype]] é“¾å…³è”çš„ã€‚ â€œå§”æ‰˜â€æ˜¯ä¸€ä¸ªæ›´åˆé€‚çš„æœ¯è¯­ï¼Œå› ä¸ºå¯¹è±¡ä¹‹é—´çš„å…³ç³»ä¸æ˜¯å¤åˆ¶è€Œæ˜¯å§”æ‰˜ã€‚(æ„æ€å°±æ˜¯åŸå…ˆç»§æ‰¿åº”è¯¥æ”¹ä¸ºåŸå…ˆå§”æ‰˜?) ç¬¬å…­ç«  è¡Œä¸ºå§”æ‰˜ç¬¬ 5 ç« çš„ç»“è®º:[[Prototype]] æœºåˆ¶å°±æ˜¯æŒ‡å¯¹è±¡ä¸­çš„ä¸€ä¸ªå†…éƒ¨é“¾æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼ŒJavaScript ä¸­è¿™ä¸ªæœºåˆ¶çš„æœ¬è´¨å°±æ˜¯å¯¹è±¡ä¹‹é—´çš„å…³è”å…³ç³»ã€‚åœ¨ç¬¬å…­ç« åˆè¢«ç§°ä¸ºå§”æ‰˜.PS:å‰é¢åœ¨è®²åŸå‹çš„æ—¶å€™æˆ‘å°±ä¹ æƒ¯ç”¨çˆ¶å¯¹è±¡æŒ‡ä»£åŸå‹å¯¹è±¡(ç±»ä¼¼â€çˆ¶ç±»â€),ç”¨å­å¯¹è±¡æŒ‡ä»£å…¶å®ä¾‹å¯¹è±¡(ç±»ä¼¼â€å­ç±»â€).æœ¬ç« ä¹Ÿå°†é‡‡ç”¨è¿™ç§ç§°å‘¼,æ•…ä¸‹é¢ä¸å†è¯´æ˜.(å…¶å®æˆ‘è§‰å¾—ç”¨çˆ¶å¯¹è±¡å’Œå­å¯¹è±¡ç§°å‘¼æ›´å½¢è±¡) 6.1 é¢å‘å§”æ‰˜çš„è®¾è®¡ä¸€å¥è¯:[[Prototype]]æœºåˆ¶æ˜¯é¢å‘å§”æ‰˜çš„è®¾è®¡,æ˜¯ä¸åŒäºé¢å‘ç±»çš„è®¾è®¡. ä¸‹é¢å°†åˆ†åˆ«ä»‹ç»ç±»ç†è®ºå’Œå§”æ‰˜ç†è®º. 6.1.1 ç±»ç†è®ºç±»ç†è®ºè®¾è®¡æ–¹æ³•: é¦–å…ˆå®šä¹‰ä¸€ä¸ªé€šç”¨çˆ¶(åŸº)ç±»ï¼Œåœ¨ çˆ¶ç±»ç±»ä¸­å®šä¹‰æ‰€æœ‰ä»»åŠ¡éƒ½æœ‰(é€šç”¨)çš„è¡Œä¸ºã€‚æ¥ç€å®šä¹‰å­ç±» ï¼Œå®ƒä»¬éƒ½ç»§æ‰¿è‡ª çˆ¶ç±»å¹¶ä¸”ä¼šæ·»åŠ ä¸€äº›ç‰¹æ®Šçš„è¡Œä¸ºæ¥å¤„ç†å¯¹åº”çš„ä»»åŠ¡,å¹¶ä¸”åœ¨ç»§æ‰¿æ—¶å­ç±»å¯ä»¥ä½¿ç”¨æ–¹æ³•é‡å†™(å’Œå¤šæ€)çˆ¶ç±»çš„è¡Œä¸º. ç±»ç†è®ºä¸­è®¸å¤šè¡Œä¸ºå¯ä»¥å…ˆâ€œæŠ½è±¡â€åˆ°çˆ¶ç±»ç„¶åå†ç”¨å­ç±»è¿›è¡Œç‰¹æ®ŠåŒ–(é‡å†™)ã€‚ps:è¿™éƒ¨åˆ†äº†è§£å³å¯,ç€é‡ç†è§£ä¸‹é¢JavaScriptç”¨åˆ°çš„å§”æ‰˜. 6.1.2 å§”æ‰˜ç†è®ºç±»ç†è®ºè®¾è®¡æ–¹æ³•: é¦–å…ˆä½ ä¼šå®šä¹‰ä¸€ä¸ªâ€çˆ¶â€å¯¹è±¡(ç›¸å½“äºä¸ŠèŠ‚ä¸­çš„çˆ¶ç±»)ï¼Œå®ƒä¼šåŒ…å«æ‰€æœ‰ä»»åŠ¡éƒ½å¯ä»¥ä½¿ç”¨(å§”æ‰˜)çš„å…·ä½“è¡Œä¸ºã€‚æ¥ç€ï¼Œå¯¹äºæ¯ä¸ªä»»åŠ¡ä½ éƒ½å¯ä»¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡(â€œå­â€å¯¹è±¡)æ¥å­˜å‚¨å¯¹åº”çš„æ•°æ®å’Œè¡Œä¸ºã€‚ä½ å¯ä»¥æŠŠç‰¹å®šçš„ä»»åŠ¡å¯¹è±¡éƒ½å…³è”åˆ°çˆ¶å¯¹è±¡ä¸Šï¼Œè®©å®ƒä»¬åœ¨éœ€è¦çš„æ—¶å€™å¯ä»¥è¿›è¡Œå§”æ‰˜ã€‚ (å…¶å®æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ç”¨çˆ¶å¯¹è±¡æ¥å®šä¹‰é€šç”¨çš„æ–¹æ³•,å­å¯¹è±¡è¿›è¡Œå§”æ‰˜.ç„¶åå­å¯¹è±¡è‡ªèº«ä¸ªæ€§çš„å±æ€§æ–¹æ³•å°±å†™åœ¨å­å¯¹è±¡æœ¬èº«,å¹¶é¿å…ä¸çˆ¶å¯¹è±¡çš„å±æ€§åå†²çª) ps: è¿™èŠ‚ä¹¦ä¸­è¿™æ®µè¯ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦æŠŠè¿™äº›è¡Œä¸ºæ”¾åœ¨ä¸€èµ·ï¼Œ**é€šè¿‡ç±»çš„å¤åˆ¶**ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬åˆ†åˆ«æ”¾åœ¨å„è‡ªç‹¬ç«‹ çš„å¯¹è±¡ä¸­ï¼Œéœ€è¦æ—¶å¯ä»¥å…è®¸ XYZ å¯¹è±¡å§”æ‰˜ç»™ Taskã€‚æœ‰ä¸ªé”™è¯¯.â€é€šè¿‡ç±»çš„å¤åˆ¶â€åº”è¯¥æ”¹ä¸ºâ€é€šè¿‡â€[[Prototype]]æœºåˆ¶â€.è¿™é‡Œåº”è¯¥æ˜¯ä½œè€…çš„æ‰‹è¯¯.åœ¨ JavaScript ä¸­ï¼Œ[[Prototype]] æœºåˆ¶ä¼šæŠŠå¯¹è±¡å…³è”åˆ°å…¶ä»–å¯¹è±¡ã€‚æ— è®ºä½ å¤šä¹ˆåŠªåŠ›åœ°è¯´æœè‡ª å·±ï¼ŒJavaScript ä¸­å°±æ˜¯æ²¡æœ‰ç±»ä¼¼â€œç±»â€çš„æŠ½è±¡æœºåˆ¶ã€‚(å…¶å®ä¸»è¦åŸå› è¿˜æ˜¯æ˜¯JavaScriptæ²¡æœ‰å®Œæ•´çš„å¤åˆ¶æœºåˆ¶) å§”æ‰˜ç†è®ºçš„ä½¿ç”¨å»ºè®®:PS:ä¹¦ä¸­è¿™é‡Œå†™äº†3æ¡,å…¶å®åªæœ‰2æ¡,ç¬¬ä¸‰æ¡ä¸è¿‡æ˜¯å¯¹ç¬¬ä¸€æ¡çš„è¯´æ˜,è¿™é‡Œæˆ‘è¿›è¡Œäº†åˆå¹¶. é€šå¸¸æ¥è¯´ï¼Œåœ¨ [[Prototype]] å§”æ‰˜ä¸­æœ€å¥½æŠŠçŠ¶æ€ä¿å­˜åœ¨å§”æ‰˜è€…(å­å¯¹è±¡)è€Œä¸æ˜¯å§”æ‰˜ç›®æ ‡(çˆ¶å¯¹è±¡)ä¸Šã€‚é‚£æ€ä¹ˆå®ç°å‘¢,å°±æ˜¯é€šè¿‡â€this çš„éšå¼ç»‘å®šâ€.åœ¨å§”æ‰˜ç›®æ ‡(çˆ¶å¯¹è±¡)ä¸Šçš„å‡½æ•°é‡Œé€šè¿‡thiså®šä¹‰ä¿å­˜çŠ¶æ€.å½“å§”æ‰˜è€…(å­å¯¹è±¡)å¼•ç”¨è¯¥å‡½æ•°æ–¹æ³•æ—¶,æ­¤æ—¶çš„thiså°±è‡ªåŠ¨ç»‘å®šåˆ°å§”æ‰˜è€…ä¸Šäº†. åœ¨å§”æ‰˜ä¸­æˆ‘ä»¬ä¼šå°½é‡é¿å…åœ¨ [[Prototype]] é“¾çš„ä¸åŒçº§åˆ«ä¸­ä½¿ç”¨ç›¸åŒçš„å‘½åï¼Œå¦åˆ™å°±éœ€è¦ä½¿ç”¨ç¬¨æ‹™å¹¶ä¸”è„†å¼±çš„è¯­æ³•æ¥æ¶ˆé™¤å¼•ç”¨æ­§ä¹‰(å‚è§ç¬¬ 4 ç« )ã€‚ è¡¥å……: 3. åœ¨ API æ¥å£çš„è®¾è®¡ä¸­ï¼Œå§”æ‰˜æœ€å¥½åœ¨å†…éƒ¨å®ç°ï¼Œä¸è¦ç›´æ¥æš´éœ²å‡ºå»ã€‚ è¿™ä¹ˆåšæ›´å¤šçš„æ˜¯å‡ºäºå®‰å…¨å’Œæ¥å£ç¨³å®šçš„è€ƒè™‘.å»ºè®®å­å¯¹è±¡å°†æ‰€æœ‰å¼•ç”¨çˆ¶å¯¹è±¡çš„æ–¹æ³•éƒ½å¥—ä¸ªå‡½æ•°éšè—èµ·æ¥,å¹¶å–ä¸€ä¸ªè¯­ä¹‰åŒ–çš„å±æ€§å. å§”æ‰˜ç†è®ºçš„ä½¿ç”¨æ³¨æ„: ç¦æ­¢ä¸¤ä¸ªå¯¹è±¡äº’ç›¸å§”æ‰˜:å½“ä½ å°†ç¬¬äºŒä¸ªå¯¹è±¡åå‘å§”æ‰˜ç»™å‰ä¸€ä¸ªå¯¹è±¡æ—¶,å°±ä¼šæŠ¥é”™. è°ƒè¯•: è¿™ä¸ªäº†è§£ä¸‹å°±è¡Œ.çŸ¥é“ä¸åŒæµè§ˆå™¨å’Œå·¥å…·å¯¹å§”æ‰˜çš„è§£æç»“æœå¹¶ä¸ä¸€å®šç›¸åŒ.(åæ§½:çœ‹äº†åŠå¤©åˆ°åé¢å‡ºç°å®é™…ä¸Šï¼Œåœ¨ç¼–å†™æœ¬ä¹¦æ—¶ï¼Œè¿™ä¸ªè¡Œä¸ºè¢«è®¤å®šæ˜¯ Chrome çš„ä¸€ä¸ª bugï¼Œ å½“ä½ è¯»åˆ°æ­¤ä¹¦æ—¶ï¼Œå®ƒå¯èƒ½å·²ç»è¢«ä¿®å¤äº†ã€‚æˆ‘åªæƒ³è¯´WTF! å¥½å§,æˆ‘çŸ¥é“chromeä»¥å‰å¯èƒ½å‡ºç°è¿‡è¿™ä¸ªâ€bugâ€äº†=.=) 6.1.3 æ¯”è¾ƒæ€ç»´æ¨¡å‹è¿™èŠ‚ä¸»è¦æ˜¯æ¯”è¾ƒäº†â€é€šè¿‡æ„é€ å‡½æ•°(æ¨¡æ‹Ÿç±»)å®ç°åŸå‹ç»§æ‰¿â€ä¸â€é€šè¿‡å¯¹è±¡å…³è”(å§”æ‰˜å½¢å¼,Object.create( â€¦ ))å®ç°åŸå‹ç»§æ‰¿â€ä¸¤ç§æ–¹å¼çš„åŒºåˆ«. ç»“è®º: é€šè¿‡å¯¹è±¡å…³è”,å§”æ‰˜å½¢å¼,æ›´åŠ ç®€æ´,æ›´åŠ æ¸…æ™°æ˜“æ‡‚. PS:è¿™é‡Œæˆ‘åŸæœ¬è‡ªå·±å¯¹ä¾‹å­ç”»å‡ºåŸå‹ç¤ºæ„å›¾.ä½†æ˜¯å‘ç°æ˜¯çœŸçš„å¤æ‚,å¹¶ä¸”å’Œä¹¦ä¸­ç®€æ´åçš„ç¤ºæ„å›¾æ˜¯å·®ä¸å¤šçš„,æ‰€ä»¥è¿™é‡Œå°±ä¸å±•ç¤ºäº†,å…å¾—è®©è¯»è€…çœ‹å¾—æ›´å¤´å¤§.è¿™é‡Œå»ºè®®,è¯»è€…è‡ªå·±åœ¨è‰ç¨¿çº¸ä¸Šç”»å‡ºåŸå‹ç¤ºæ„å›¾. 6.2 ç±»ä¸å¯¹è±¡å…¶å®è¿™èŠ‚è®²å¾—è¿˜æ˜¯â€é€šè¿‡æ„é€ å‡½æ•°(æ¨¡æ‹Ÿç±»)å®ç°åŸå‹ç»§æ‰¿â€ä¸â€é€šè¿‡å¯¹è±¡å…³è”(å§”æ‰˜å½¢å¼,Object.create( â€¦ ))å®ç°åŸå‹ç»§æ‰¿â€ä¸¤ç§æ–¹å¼çš„åŒºåˆ«.ä¸è¿‡è¿™æ¬¡ä¸»è¦æ˜¯ä»¥å‰ç«¯å®é™…ä½¿ç”¨åœºæ™¯è¿›è¡Œè®²è§£. 6.2.1 æ§ä»¶â€œç±»â€è¿™é‡Œæˆ‘å°±ä¸ä»¥ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œè®²è§£äº†,è€Œæ˜¯ç›´æ¥ç«™åœ¨æ›´é«˜çš„è§’åº¦å¯¹è¿™ç§â€ç±»â€é£æ ¼çš„ä»£ç è¿›è¡Œè®²è§£.æœ€å¤§ç‰¹ç‚¹: 1æ˜¯é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œæ¨¡æ‹Ÿç±»,2æ˜¯é€šè¿‡æ˜¾å¼ä¼ªå¤šæ€(ç¡¬ç»‘å®šå‡½æ•°)å…³è”ä¸¤ä¸ªå‡½æ•°.æ³¨æ„: ä¸ç®¡æ˜¯ç±»è¿˜æ˜¯å¯¹è±¡.è¿™ä¸¤ç§å½¢å¼ä¸€èˆ¬éƒ½éœ€è¦å®šä¹‰ä¸¤ç§æ•°æ®.ç¬¬ä¸€ç§å°±æ˜¯å®ä¾‹å¯¹è±¡è¦ç”¨åˆ°çš„â€åˆå§‹ä¿å­˜çš„æ•°æ®â€;ç¬¬äºŒç§å°±æ˜¯é€šç”¨è¡Œä¸ºçš„å®šä¹‰,åŒ…æ‹¬å¯¹å®ä¾‹å¯¹è±¡æ•°æ®çš„å¢åˆ æ”¹æŸ¥. ä¸‹é¢æåˆ°çš„æ˜¾å¼ä¼ªå¤šæ€(è¯¦è§ç¬¬å››ç« ),å…¶å®æŒ‡çš„å°±æ˜¯ä½¿ç”¨call()æ–¹æ³•è¿™ç§ç¡¬ç»‘å®š. æ³¨æ„ES6 classæ¨¡æ‹Ÿç±»çš„å†™æ³•æˆ‘å°±æ²¡å…·ä½“åˆ—å‡ºäº†.å®é™…ä¸Šclass ä»ç„¶æ˜¯é€šè¿‡ [[Prototype]] æœºåˆ¶å®ç°çš„,ä¸è¿‡æ˜¯ä¸ªè¡¨é¢ç®€æ´çš„è¯­æ³•ç³–. è™½ç„¶ä¹¦ä¸­å¯¹æ˜¾å¼ä¼ªå¤šæ€ç§°ä¸ºâ€ä¸‘é™‹çš„â€,è¿˜ç”¨äº†ä¸€ä¸ªè¯­æ°”åŠ¨è¯â€å‘¸!â€.è™½ç„¶è¿™æ ·ä¸å¥½,ä½†æœ‰æ—¶ç”¨callçœŸçš„å¾ˆæ–¹ä¾¿,æ‰€ä»¥ç”¨å¾—ä¹Ÿå¾ˆå¤š. 6.2.2 å§”æ‰˜æ§ä»¶å¯¹è±¡æœ€å¤§ç‰¹ç‚¹: é€šè¿‡å¯¹è±¡è½½ä½“æ¥æ¨¡æ‹Ÿçˆ¶å­,å¹¶é€šè¿‡Object,create(â€¦)æ¥å¯¹ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œå…³è”.å¹¶é€šè¿‡å§”æ‰˜çš„å½¢å¼è¿›è¡Œå¼•ç”¨.ä¸ä¸ŠèŠ‚ä¸­æåˆ°çš„ç±»å½¢å¼è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«:å¯¹è±¡fooæ„å»ºå,éœ€è¦æ‰‹åŠ¨è°ƒç”¨setUpæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–.æ•…å¯¹è±¡çš„æ„å»ºä¸åˆå§‹åŒ–æ˜¯åˆ†å¼€çš„.è€Œæ„é€ å‡½æ•°å½¢å¼åˆ™æ˜¯åœ¨new æ„é€ å‡½æ•°æ—¶, åŒæ—¶è¿›è¡Œäº†å¯¹è±¡æ„å»ºä¸åˆå§‹åŒ–.(å…³äºè¿™ç‚¹æˆ‘ä¸‹é¢è¿˜ä¼šå†è¯´æ˜çš„) å…³äºä¹¦ä¸­è¿™å¥ä½¿ç”¨ç±»æ„é€ å‡½æ•°çš„è¯ï¼Œä½ éœ€è¦(å¹¶ä¸æ˜¯ç¡¬æ€§è¦æ±‚ï¼Œä½†æ˜¯å¼ºçƒˆå»ºè®®)åœ¨åŒä¸€ä¸ªæ­¥éª¤ä¸­å®ç°æ„é€ å’Œåˆå§‹åŒ–ã€‚ç„¶è€Œï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹æŠŠè¿™ä¸¤æ­¥åˆ†å¼€(å°±åƒå¯¹è±¡å…³è”ä»£ç ä¸€æ ·)æ›´çµæ´»ã€‚çš„ç†è§£:ä½¿ç”¨ç±»æ„é€ å‡½æ•°å½¢å¼,å½“æˆ‘ä»¬ä½¿ç”¨new æ„é€ å‡½æ•°æ—¶,å…¶å®æ˜¯åœ¨ä¸€æ­¥å®ç°å¯¹è±¡çš„æ„å»ºå’Œå¯¹è±¡æ•°æ®çš„åˆå§‹åŒ–(é€šè¿‡æ„é€ å‡½æ•°é‡Œçš„call) ;ä½¿ç”¨è¿™ç§å§”æ‰˜å½¢å¼,æˆ‘ä»¬æ˜¯åˆ†åˆ«é€šè¿‡Object.create( ... );æ„å»ºå¯¹è±¡å’Œfoo.setUp( ...);æ¥åˆå§‹åŒ–çš„.å³æˆ‘ä»¬æ˜¯åˆ†ä¸¤æ­¥å®ç°çš„.è¿™æ ·åˆ†å¼€çš„è¯å…¶å®æ˜¯æ›´åŠ çµæ´»,ä¹Ÿæ›´ç¬¦åˆç¼–ç¨‹ä¸­çš„å…³æ³¨åˆ†ç¦»åŸåˆ™. 6.3 æ›´ç®€æ´çš„è®¾è®¡è¿™èŠ‚ä¹Ÿæ˜¯ä¸€æ ·é€šè¿‡ä¸¤è€…çš„å¯¹æ¯”æ¥çªæ˜¾å§”æ‰˜è®¾è®¡æ¨¡å¼çš„å„ç§ä¼˜ç‚¹.è¿™é‡Œæˆ‘å°±ä¸å†å¯¹ä¹¦ä¸­çš„ä¾‹å­è¿›è¡Œè§£è¯».å¦‚æœä½ çœŸæ­£ç†è§£äº†ç±»å’Œå§”æ‰˜çš„è¯,å…¶å®æ˜¯å¾ˆç®€å•çš„.å¦‚æœè§‰å¾—å¤æ‚çš„è¯,å¯ä»¥åœ¨çº¸ä¸Šç†ä¸€ä¸‹å‡½æ•°å’Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»,ä¸‹é¢æˆ‘å°±åªæ€»ç»“ä¸‹è¿™é‡Œæåˆ°å§”æ‰˜è®¾è®¡æ¨¡å¼çš„ä¼˜ç‚¹,å½“ç„¶æ ¸å¿ƒæ˜¯æ›´ç®€æ´. ç®€æ´ä½“ç°åœ¨: 1, å§”æ‰˜é‡ç‚¹åœ¨äºåªéœ€è¦ä¸¤ä¸ªå®ä½“(ä¸¤ä¸ªå¯¹è±¡ç›¸äº’å…³è”)ï¼Œè€Œä¹‹å‰çš„â€ç±»â€æ¨¡å¼éœ€è¦ä¸‰ä¸ª(çˆ¶â€ç±»â€,å­â€ç±»â€,å®ä¾‹å¯¹è±¡)å…¶å®å¯ä»¥è¿™ä¹ˆç†è§£:å§”æ‰˜æ¨¡å¼å°†â€å­ç±»â€å’Œâ€å®ä¾‹å¯¹è±¡â€åˆä¸ºä¸€ä¸ªå¯¹è±¡äº†ã€‚ 2, ä¸éœ€è¦åŸºç±»(çˆ¶ç±»)æ¥â€å…±äº«â€ä¸¤ä¸ªå®ä½“ä¹‹é—´çš„è¡Œä¸º.ä¸éœ€è¦å®ä¾‹åŒ–ç±»,ä¹Ÿä¸éœ€è¦åˆæˆ.å…¶å®è¿™ç¬¬äºŒæ¡å°±æ˜¯å¯¹ç¬¬ä¸€æ¡è¿™ç§ç»“æœçš„è¯´æ˜. é¢å¤–è¡¥å……å¼ºè°ƒ:åœ¨ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡æ‹Ÿç±»æ—¶,å­ç±»é€šå¸¸ä¼šå¯¹çˆ¶ç±»çš„è¡Œä¸ºè¿›è¡Œé‡å†™(å±æ€§åç›¸åŒ);ä½†å§”æ‰˜æ¨¡å¼åˆ™ä¸ä¼š,å®ƒä¼šé‡æ–°å–ä¸ªå±æ€§å,å†å¼•ç”¨çˆ¶å¯¹è±¡ä¸Šçš„è¡Œä¸º. 6.4 æ›´å¥½çš„è¯­æ³•è¿™èŠ‚ä¸»è¦æ˜¯ä»‹ç»ES6æä¾›çš„2ä¸ªç®€æ´å†™æ³•ä¸å…¶ä¸­çš„éšæ‚£. è¯­æ³•: åœ¨ ES6 ä¸­æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„å¯¹è±¡çš„å­—é¢å½¢å¼ä¸­ä½¿ç”¨ç®€æ´æ–¹æ³•å£°æ˜ï¼Œä¾‹å¦‚: 123 var Foo = &#123; bar() &#123; /*..*/ &#125;,//å­—é¢å½¢å¼å£°æ˜&#125;; åœ¨ ES6 ä¸­æˆ‘ä»¬å¯ä»¥ç”¨ Object. setPrototypeOf(..) æ¥ä¿®æ”¹å¯¹è±¡çš„ [[Prototype]],å…·ä½“ç”¨æ³•å¯ä»¥æŸ¥çœ‹MDNä¾‹å¦‚: 12345678910111213// ä½¿ç”¨æ›´å¥½çš„å¯¹è±¡å­—é¢å½¢å¼è¯­æ³•å’Œç®€æ´æ–¹æ³• var AuthController = &#123; errors: [], checkAuth() &#123; // ... &#125;, server(url,data) &#123; // ... &#125; // ... &#125;;// ç°åœ¨æŠŠ AuthController å…³è”åˆ° LoginController Object.setPrototypeOf( AuthController, LoginController ); å¼Šç«¯: å¯¹è±¡å­—é¢å½¢å¼è¯­æ³•:å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°è¡¨è¾¾å¼.åŒ¿åå‡½æ•°ä¼šå¯¼è‡´3ä¸ªç¼ºç‚¹:1. è°ƒè¯•æ ˆæ›´éš¾è¿½è¸ª;2. è‡ªæˆ‘å¼•ç”¨(é€’å½’ã€äº‹ä»¶(è§£é™¤)ç»‘å®šï¼Œç­‰ç­‰)æ›´éš¾; 3. ä»£ç (ç¨å¾®)æ›´éš¾ç†è§£ã€‚(å…¶å®æˆ‘è§‰å¾—è¿™3ä¸ªç¼ºç‚¹è¿˜å¥½,å½±å“ä¸æ˜¯é‚£ä¹ˆå¤§).ä½†æ˜¯è¿™ç§ç®€æ´è¯­æ³•å¾ˆç‰¹æ®Šï¼Œä¼šç»™å¯¹åº”çš„å‡½æ•°å¯¹è±¡è®¾ç½®ä¸€ä¸ªå†…éƒ¨çš„ name å±æ€§ï¼Œè¿™æ ·ç†è®ºä¸Šå¯ä»¥ç”¨åœ¨è¿½ è¸ªæ ˆä¸­ã€‚æ‰€ä»¥å®é™…ä¸Šå”¯ä¸€çš„å¼Šç«¯å°±åªå‰©ç¬¬2æ¡äº†.ç»ˆæå»ºè®®å°±æ˜¯:å¦‚æœä½ éœ€è¦è‡ªæˆ‘å¼•ç”¨çš„è¯ï¼Œé‚£æœ€å¥½ä½¿ç”¨ä¼ ç»Ÿçš„å…·åå‡½æ•°è¡¨è¾¾å¼æ¥å®šä¹‰å¯¹åº”çš„å‡½æ•°ï¼Œä¸è¦ä½¿ç”¨ç®€æ´æ–¹æ³•ã€‚ Object. setPrototypeOf(..) è¿™ä¸ªæ˜¯ä¹¦ä¸­æ²¡æœ‰æçš„,æˆ‘è§‰å¾—æœ‰å¿…è¦è¿›è¡Œè¡¥å……ä¸‹.é¦–å…ˆ,Object. setPrototypeOf(..)å¯èƒ½ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜,å¦‚æœå…³å¿ƒæ€§èƒ½,åˆ™åº”è¯¥ä½¿ç”¨Object.create()æ›¿ä»£.Object. setPrototypeOf(..)ä¸Object.create()çš„ä¸»è¦åŒºåˆ«: Object. setPrototypeOf(..)ä¼šç›´æ¥ä¿®æ”¹ç°æœ‰å¯¹è±¡çš„[[prototype]],Object.create()åˆ™æ˜¯è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡.æ‰€ä»¥ä½ éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹ä¸¢å¤±çš„çš„constructorå±æ€§(å¦‚æœä½ éœ€è¦çš„è¯).è€Œä½¿ç”¨setPrototypeOf(..)åˆ™ä¸éœ€è¦. 6.5 å†…çœåæ§½: çºµè§‚æ•´æœ¬ä¹¦,ä½œè€…å…³äºJavaScriptä¸­æ¨¡æ‹Ÿç±»å’Œç»§æ‰¿â€çš„æ‰¹è¯„,è¯´å®ƒä»¬å…·æœ‰å¾ˆå¤§è¯¯å¯¼æ€§!æ›´æ˜¯å—¤ä¹‹ä»¥é¼»!å°±å·®çˆ†ç²—å£äº†,JavaScriptå°±åƒä¸€ä¸ªå¼‚æ•™å¾’,åº”è¯¥ç»‘åœ¨åå­—æ¶ä¸Šè¢«çƒ§æ­»!ä½†æ˜¯ä»–è¿™æ ·çš„è§‚ç‚¹,éƒ½æ˜¯ç«™åœ¨å…¶ä»–è¯­è¨€çš„è§’åº¦æ¥çœ‹å¾…æ—¶,äº§ç”Ÿçš„.æˆ‘æƒ³æ›´å¤šçš„è¯»è€…å¯èƒ½æ˜¯åªæ¥è§¦è¿‡JavaScript.é‚£ä¹ˆä»–å…¶å®æ˜¯æ²¡æœ‰è¿™äº›ç–‘æƒ‘çš„!!!ä½ åè€Œç»™ä»–ä»¬è®²è¿™ä¸€å¤§å †å…¶ä»–è¯­è¨€çš„â€æ­£ç¡®â€å«ä¹‰,æœ‰æ—¶å€™ä¼šæ—¶å¾—å…¶å!è®©è¯»è€…æ›´åŠ å›°æƒ‘,å¦‚æœæ˜¯ç†è§£ä¸é€å½»çš„,åè€Œä¼šæ€€ç–‘è‡ªå·±æœ¬æ¥å†™çš„æ˜¯å¯¹çš„ä»£ç !æ‰€ä»¥è¯»è€…åº”è¯¥åšä¸€ä¸ªå¯ä»¥ç†è§£ä½œè€…æ„å›¾,å¹¶ä¸”æ‹¥æœ‰è‡ªæˆ‘è§è§£å’Œè§‚ç‚¹ç«‹åœº! ä»€ä¹ˆæ˜¯å†…çœ(è‡ªçœ)?é¦–å…ˆ,æœ¬èŠ‚éœ€è¦å¼„æ‡‚ä¸€ä¸ªé—®é¢˜,ä»€ä¹ˆæ˜¯å†…çœ,æˆ–è€…æ˜¯è‡ªçœã€‚ä¹¦ä¸­çš„è§£é‡Šæ˜¯è‡ªçœå°±æ˜¯æ£€æŸ¥å®ä¾‹çš„ç±»å‹ã€‚ç±»å®ä¾‹çš„è‡ªçœä¸»è¦ç›®çš„æ˜¯é€šè¿‡åˆ›å»ºæ–¹å¼æ¥åˆ¤æ–­å¯¹è±¡çš„ç»“æ„å’ŒåŠŸèƒ½ã€‚æˆ‘è¿™é‡Œå†æ›´é€šä¿—åœ°è§£é‡Šä¸‹:å½“æˆ‘ä»¬æ„å»ºå¾—åˆ°ä¸€ä¸ªå®ä¾‹å¯¹è±¡æ—¶,æœ‰æ—¶å€™æˆ‘ä»¬æ˜¯ä¸å¤ªæ¸…é™¤å®ƒçš„å±æ€§å’Œæ–¹æ³•çš„.å°¤å…¶æ˜¯ç¬¬ä¸‰æ–¹åº“.æœ‰æ—¶å€™è´¸ç„¶ä½¿ç”¨ä¼šå¯¼è‡´å¾ˆå¤šé”™è¯¯(ä¾‹å¦‚è°ƒç”¨çš„æ–¹æ³•ä¸å­˜åœ¨,æˆ–è€…æŠ¥é”™ç­‰).è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦é€šè¿‡è‡ªçœ.å…¶å®å°±æ˜¯é€šè¿‡ä¸€ç³»åˆ—æ“ä½œ,æ¥ç¡®è®¤å®ä¾‹æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„é‚£ä¸ª,å®ä¾‹çš„æ–¹æ³•æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„(å­˜åœ¨ä¸”å¯ç”¨). å†…çœçš„æ–¹æ³•: 1.é€šè¿‡ instanceof è¯­æ³•:123456789101112function Foo() &#123; // ...&#125;Foo.prototype.something = function()&#123; // ... &#125;var a1 = new Foo();// å‡è®¾æˆ‘ä»¬ä¸çŸ¥é“ä¸Šé¢çš„è¿‡ç¨‹,åªçŸ¥é“å¾—åˆ°å®ä¾‹å¯¹è±¡a1//æˆ‘ä»¬æƒ³çŸ¥é“a1æ˜¯ä¸æ˜¯æˆ‘æ‰€å¸Œæœ›çš„å‡½æ•°Fooæ‰€æ„å»ºçš„if (a1 instanceof Foo) &#123; a1.something();&#125; ä¾‹å­ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡a1,ä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“a1æ˜¯ä¸æ˜¯æˆ‘ä»¬æ‰€å¸Œæœ›çš„å‡½æ•°Fooæ‰€æ„é€ çš„,æ­¤æ—¶å°±å¯ä»¥é€šè¿‡instanceofè¿›è¡Œåˆ¤æ–­. instanceofæ¯”è¾ƒé€‚åˆåˆ¤æ–­å®ä¾‹å¯¹è±¡å’Œæ„é€ å‡½æ•°ä¹‹é—´çš„å…³ç³».ç¼ºé™·: ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³åˆ¤æ–­å‡½æ•°Aæ˜¯ä¸æ˜¯å‡½æ•°Bçš„â€å­ç±»â€æ—¶,åˆ™ä¼šç¨å¾®éº»çƒ¦ç‚¹,æˆ‘ä»¬éœ€è¦åƒè¿™æ ·A.prototype instanceof Bè¿›è¡Œåˆ¤æ–­.å¹¶ä¸”ä¹Ÿä¸èƒ½ç›´æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å…³è”. 2.é€šè¿‡ â€œé¸­å­ç±»å‹â€: ä¸ºä»€ä¹ˆä¼šå«è¿™ä¸ªåå­—?çœ‹äº†ä½œè€…çš„è§£é‡Š,è¿˜æ˜¯ä¸å¤ªèƒ½æ¥å—.ä¸å¤ªç†è§£å¤–å›½äººçš„è„‘å›è·¯.ä½ åœ¨å›½å†…å’Œåˆ«äººè¯´â€é¸­å­ç±»å‹â€,ä¼°è®¡ä¹Ÿæ˜¯ä¸€è„¸æ‡µé€¼.å…¶å®å¾ˆç®€å•,æ‰€è°“çš„â€é¸­å­ç±»å‹â€å…¶å®ä¹Ÿæ˜¯æˆ‘ä»¬å®é™…å·¥ä½œä¸­å¸¸ç”¨çš„:1234//å¦‚æœa1çš„somethingå­˜åœ¨çš„è¯,åˆ™æˆ‘ä»¬å¯ä»¥è¿›è¡Œè°ƒç”¨if ( a1.something) &#123; a1.something();&#125; å…¶å®è¿™ç§æ–¹æ³•æ˜¯éå¸¸å¸¸ç”¨çš„,æ’é™¤äº†åœ¨ä¸çŸ¥é“å­˜åœ¨æ€§æƒ…å†µä¸‹,è´¸ç„¶è°ƒç”¨çš„é£é™©.ç¼ºé™·: å…³äºä¹¦ä¸­æåˆ°çš„ç¼ºç‚¹,å››ä¸ªå­—æ¦‚æ‹¬å°±æ˜¯â€ä»¥åæ¦‚å…¨â€ .ä¹¦ä¸­å…³äºPromiseçš„ä¾‹å­,å°±æ˜¯ä»¥åæ¦‚å…¨çš„ä¾‹å­.æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶,åœ¨ifåˆ¤æ–­a1.somethingå­˜åœ¨æ—¶,æ‰ä¼šåœ¨åé¢ä½¿ç”¨somethingæ–¹æ³•.ä¸è¦ç›´æ¥ä½¿ç”¨anotherthing,è¿™ç§æ²¡ç¡®è®¤è¿‡çš„æ–¹æ³•. 3.å¦‚æœä½¿ç”¨å¯¹è±¡å…³è”æ—¶: åˆ™å¯ä»¥æ¯”è¾ƒç®€å•çš„ä½¿ç”¨Object.getPrototypeOf(..)è¿›è¡Œåˆ¤æ–­.ä¾‹å¦‚Object.getPrototypeOf(a)===Aå…¶ä¸­a,Aéƒ½æ˜¯å¯¹è±¡.å¦‚æœä¸ºtrue,åˆ™è¯´æ˜açš„åŸå‹é“¾ä¸Šå«æœ‰å¯¹è±¡A. 6.6 å°ç»“ é™¤äº†ç±»å’Œç»§æ‰¿è®¾è®¡æ¨¡å¼,è¡Œä¸ºå§”æ‰˜å…¶å®æ˜¯æ›´å¼ºå¤§,æ›´å€¼å¾—æ¨å¹¿çš„æ¨¡å¼(æœ¬è§‚ç‚¹ä»…ä»£è¡¨ä½œè€…çš„è§‚ç‚¹!) è¡Œä¸ºå§”æ‰˜è®¤ä¸ºå¯¹è±¡ä¹‹é—´æ˜¯å…„å¼Ÿå…³ç³»ï¼Œäº’ç›¸å§”æ‰˜ï¼Œè€Œä¸æ˜¯çˆ¶ç±»å’Œå­ç±»çš„å…³ç³»ã€‚JavaScript çš„ [[Prototype]] æœºåˆ¶æœ¬è´¨ä¸Šå°±æ˜¯è¡Œä¸ºå§”æ‰˜æœºåˆ¶ã€‚(æˆ‘è§‰å¾—è¿˜æ˜¯çˆ¶å­å¯¹è±¡å…³ç³».æˆ‘çš„è§£è¯´é‡Œä¹Ÿéƒ½æ˜¯çˆ¶å­ç›¸ç§°) å½“ä½ åªç”¨å¯¹è±¡æ¥è®¾è®¡ä»£ç æ—¶ï¼Œä¸ä»…å¯ä»¥è®©è¯­æ³•æ›´åŠ ç®€æ´ï¼Œè€Œä¸”å¯ä»¥è®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ã€‚ å¯¹è±¡å…³è”(å¯¹è±¡ä¹‹å‰äº’ç›¸å…³è”)æ˜¯ä¸€ç§ç¼–ç é£æ ¼ï¼Œå®ƒå€¡å¯¼çš„æ˜¯ç›´æ¥åˆ›å»ºå’Œå…³è”å¯¹è±¡ï¼Œä¸æŠŠå®ƒä»¬æŠ½è±¡æˆç±»ã€‚å¯¹è±¡å…³è”å¯ä»¥ç”¨åŸºäº [[Prototype]] çš„è¡Œä¸ºå§”æ‰˜éå¸¸è‡ªç„¶åœ°å®ç°]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
</search>
